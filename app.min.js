var k;
(function(e){var h=function(){function d(c){this.Nc={};this.xc=this.Qc=0;this.jb=[];this.ha=document.getElementById(c);this.gd=this.ha.getContext("2d");this.Jc=window.requestAnimationFrame.bind(window,this.Fd.bind(this))}d.prototype.mb=function(c,a){this.Nc[c]=a};d.prototype.Play=function(c){this.Ua&&this.ed();if(this.Ua=this.Nc[c])this.Ua.m=this,this.Ua.j();else throw Error();};d.prototype.j=function(){this.Jc()};d.prototype.Va=function(c,a,b){this.jb.push({element:c,type:a,listener:b});c.addEventListener(a,b)};
d.prototype.Kd=function(c,a,b){for(var f=0,g=this.jb;f<g.length;f++){var n=g[f];if(n.element===c&&n.type===a&&n.listener===b){e.Hc(this.jb,n);c.removeEventListener(a,b);return}}throw Error("Couldn't find event listener.");};d.prototype.ed=function(){for(var c=this.jb.length-1;0<=c;--c){var a=this.jb[c];this.Kd(a.element,a.type,a.listener)}this.jb=[];this.Ua.jd&&this.Ua.jd()};d.prototype.Fd=function(c){var a=c-this.xc;50<a&&(a=50);this.Qc=a/1E3;this.Ua.l(this.Qc);this.Ua.ma(this.gd);this.xc=c;this.Jc()};
return d}();e.m=h})(k||(k={}));(function(e){var h=function(){function d(c,a){void 0===c&&(c=0);void 0===a&&(a=0);this.x=c;this.y=a}d.prototype.Set=function(c,a){this.x=c;this.y=a};d.prototype.Z=function(){return new d(this.x,this.y)};return d}();e.ab=h})(k||(k={}));
(function(e){(function(h){function d(b,f){void 0===b&&(b=0);void 0===f&&(f=0);return new e.ab(b,f)}function c(b,f){if(f)f.x=b.x,f.y=b.y;else return d(b.x,b.y)}function a(b){return Math.sqrt(b.x*b.x+b.y*b.y)}h.de=new e.ab;h.Ta=new e.ab;h.v=d;h.Z=c;h.ud=function(b){return 0===b.x&&0===b.y};h.la=function(b,f,g){g.x=b.x+f.x;g.y=b.y+f.y};h.Sa=function(b,f,g){g.x=b.x-f.x;g.y=b.y-f.y};h.yc=function(b,f,g){g.x=b.x*f.x;g.y=b.y*f.y};h.i=function(b,f,g){void 0===g&&(g=b);g.x=b.x*f;g.y=b.y*f};h.sb=a;h.Kb=function(b){var f;
void 0===f&&(f=b);var g=a(b);0<g&&(f.x=b.x/g,f.y=b.y/g)};h.Pd=function(b,f,g){void 0===g&&(g=b);var a=Math.sin(f);f=Math.cos(f);b===g&&(b=c(b));g.x=b.x*f-b.y*a;g.y=b.x*a+b.y*f};h.ae=function(b){return Math.atan2(b.y,b.x)};h.rd=function(b,f){f.x=0<b.x?1/b.x:0;f.y=0<b.y?1/b.y:0};h.be=function(b,f){return b.x*f.x+b.y*f.y}})(e.X||(e.X={}))})(k||(k={}));
var l=this&&this.ee||function(e,h){function d(){this.constructor=e}for(var c in h)h.hasOwnProperty(c)&&(e[c]=h[c]);d.prototype=h.prototype;e.prototype=new d};
(function(e){var h=function(){function d(c,a,b,f){this.b=e.X.v(c,a);this.a=e.X.v(b,f);this.h=e.X.v(0,0);this.i=e.X.v(1,1);this.Ba=0;this.ea=1;this.rb=!0}d.prototype.ma=function(c){this.rb&&(c.save(),c.globalAlpha*=this.ea,c.translate(this.b.x,this.b.y),c.scale(this.i.x,this.i.y),c.rotate(this.Ba),e.X.ud(this.h)||c.translate(-this.h.x*this.a.x,-this.h.y*this.a.y),this.Ea?this.kd(c):this.Fa(c),c.restore())};d.prototype.Fa=function(){throw Error("Unimplemented");};d.prototype.kd=function(c){c.drawImage(this.Ea,
0,0)};d.prototype.dc=function(c,a){var b,f=e.X.Ta;a?(e.X.Z(c,a),b=a):b=e.X.Z(c);this.Oa&&this.Oa.dc(c,b);e.X.Sa(b,this.b,b);e.X.Z(this.i,f);e.X.rd(f,f);e.X.yc(b,f,b);e.X.Pd(b,-this.Ba,b);e.X.Z(this.h,f);e.X.yc(f,this.a,f);e.X.la(b,f,b);if(!a)return b};d.prototype.Eb=function(c){c=this.dc(c);var a=0<c.y&&c.y<this.a.y;return 0<c.x&&c.x<this.a.x&&a};d.prototype.Pa=function(){this.Oa.vb(this)};d.prototype.Cache=function(){this.Ea=document.createElement("canvas");this.Ea.width=this.a.x;this.Ea.height=
this.a.y;this.Fa(this.Ea.getContext("2d"))};return d}();e.Ob=h;h=function(d){function c(a,b,f,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===f&&(f=0);void 0===g&&(g=0);d.call(this,a,b,f,g);this.Ab=[]}l(c,d);c.prototype.f=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(b=0;b<a.length;b++){var f=a[b];if(f.Oa)throw Error("Child has parent");f.Oa=this;this.Ab.push(f)}};c.prototype.vb=function(a){var b=this.Ab.indexOf(a);if(0<=b)a.Oa=void 0,this.Ab.splice(b,1);else throw Error("Child doesn't exist in this layer");
};c.prototype.Fa=function(a){for(var b=0,f=this.Ab;b<f.length;b++)f[b].ma(a)};return c}(h);e.Ha=h})(k||(k={}));
(function(e){function h(b,f,g){var a=g.pageX,c=g.pageY,d=g.target.getBoundingClientRect(),a=new e.ab(a-d.left,c-d.top);b.call(f,a,g)}function d(b,a,g){var n=0,d=0;if("touchend"!==g.type){var n=g.targetTouches[0].pageX,d=g.targetTouches[0].pageY,e=g.target.getBoundingClientRect();c.Set(n-e.left,d-e.top)}b.call(a,c.Z(),g);g.preventDefault()}var c=new e.ab;e.Xb=function(b,a){return h.bind(null,b,a)};e.Yb=function(b,a){return d.bind(null,b,a)};var a=function(){function b(){this.Ac=[];this.Dc=[]}b.prototype.Da=
function(b,g){var a=0;this.Ac.push({object:b,action:function(){return a=Date.now()}});this.Dc.push({object:b,action:function(){450>Date.now()-a&&g()}});return this};b.prototype.Ya=function(b){this.vc(this.Ac,b)};b.prototype.tb=function(){};b.prototype.fb=function(b){this.vc(this.Dc,b)};b.prototype.vc=function(b,g){for(var a=0;a<b.length;a++){var c=b[a],d=c.action;c.object.Eb(g)&&d()}};b.prototype.l=function(){};return b}();e.pb=a})(k||(k={}));var m;
(function(e){var h=function(){function d(){this.Nb=new k.ab(320,370)}d.prototype.j=function(){var c=this;this.c=new k.Ha(0,0,320,370);this.o=new k.Tc;this.ba=new k.Rc;this.cb=new k.cb(180);this.m.Va(window,"resize",function(){return c.ta()})};d.prototype.l=function(c){this.ba.l(c);this.o.l(c)};d.prototype.ma=function(c){c.clearRect(0,0,c.canvas.width,c.canvas.height);this.c.ma(c)};d.prototype.Ya=function(c){this.fa.Ya(c)};d.prototype.tb=function(c){this.fa.tb(c)};d.prototype.fb=function(c){this.fa.fb(c)};
d.prototype.ta=function(){var c=window.innerHeight,a=Math.min(window.innerWidth/this.Nb.x,c/this.Nb.y);this.c.i.Set(a,a);this.c.a.Set(this.Nb.x,c/a);c=Math.floor(this.c.a.x*a);this.m.ha.width!==c&&(this.m.ha.width=c);a=Math.floor(this.c.a.y*a);this.m.ha.height!==a&&(this.m.ha.height=a)};d.prototype.Vb=function(){if(!this.fa)throw Error();this.m.Va(this.m.ha,"mousemove",k.Xb(this.tb,this));this.m.Va(this.m.ha,"mousedown",k.Xb(this.Ya,this));this.m.Va(this.m.ha,"mouseup",k.Xb(this.fb,this))};d.prototype.Wb=
function(){if(!this.fa)throw Error();this.m.Va(this.m.ha,"touchmove",k.Yb(this.tb,this));this.m.Va(this.m.ha,"touchstart",k.Yb(this.Ya,this));this.m.Va(this.m.ha,"touchend",k.Yb(this.fb,this))};return d}();e.yb=h})(m||(m={}));var p,q=p||(p={});(q.ka||(q.ka={})).color={active:"#88A825",gc:"#911146",Zc:"#ED8C2B",background:"#35203B"};var t;
(function(e){var h=function(){function d(c,a,b){void 0===b&&(b="white");this.Ga=c;this.a=a;this.pa=b;this.kc={};this.qa=a/c.Wa.Sb;this.Ma=c.Wa.Lb*this.qa;this.Cache=document.createElement("canvas");this.Cache.width=Object.keys(c.Ub).length*Math.ceil(this.Ma+this.qa);this.Cache.height=a;console.log("FontCache Size",this.a,"DotPx",this.qa,"Color",this.pa);this.Ld()}d.prototype.pc=function(c,a,b,f,g,n){void 0===b&&(b=0);void 0===f&&(f=0);void 0===g&&(g=1);void 0===n&&(n=g);c.drawImage(this.Cache,this.kc[a],
0,this.Ma,this.a,b,f,this.Ma*g,this.a*n)};d.prototype.Ld=function(){var c=this.Cache.getContext("2d"),a=0;c.fillStyle=this.pa;for(var b in this.Ga.Ub){this.Md(c,b);this.kc[b]=a;var f=Math.ceil(this.Ma+this.qa),a=a+f;c.translate(f,0)}};d.prototype.Md=function(c,a){for(var b=this.Ga,f=this.qa,g=0;g<b.Wa.Lb;++g)for(var n=0;n<b.Wa.Sb;++n)b.Ub[a][n*b.Wa.Lb+g]&&c.fillRect(g*f,n*f,f,f)};return d}();e.md=h})(t||(t={}));
(t||(t={})).Hd={Wa:{Lb:3,Sb:5},Ub:{"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],".":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],",":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],":":[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"?":[1,1,0,0,0,1,0,1,1,0,0,0,0,1,0],"\u2665":[1,0,1,1,1,1,1,1,1,0,1,0,0,0,0],0:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],1:[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,0],6:[0,
1,1,1,0,0,1,1,1,1,0,1,1,1,1],7:[1,1,1,0,0,1,0,1,0,0,1,0,0,1,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],9:[1,1,1,1,0,1,1,1,1,0,0,1,1,1,0],A:[0,1,0,1,0,1,1,1,1,1,0,1,1,0,1],B:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,0],C:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],D:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],E:[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],F:[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],G:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],H:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],I:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],J:[1,1,1,0,1,0,0,1,0,0,1,0,1,0,0],K:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,
1],L:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],N:[0,0,1,1,0,1,1,1,1,1,0,1,1,0,0],M:[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],O:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],P:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],Q:[1,1,1,1,0,1,1,0,1,1,1,0,0,0,1],R:[1,1,0,1,0,1,1,1,0,1,0,1,1,0,1],S:[1,1,1,1,0,0,1,1,0,0,0,1,1,1,1],T:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],U:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],W:[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],V:[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],Y:[1,0,1,1,0,1,1,0,1,0,1,0,0,1,0]},Cache:{}};
(function(e){var h=function(d){function c(a,b,f,g){void 0===f&&(f="");void 0===g&&(g={a:20,pa:"white",Ga:e.Hd});d.call(this,a,b,0,0);this.Text=f;this.ca=g;this.ib(g.pa);this.aa(g.a)}l(c,d);c.prototype.ib=function(a){this.Db=this.ca.Ga.Cache[a]?this.ca.Ga.Cache[a]:this.ca.Ga.Cache[a]=new e.md(this.ca.Ga,20,a)};c.prototype.Qa=function(a){this.Text=a;this.Xc()};c.prototype.aa=function(a){this.ca.a=a;this.qa=a/this.ca.Ga.Wa.Sb;this.Ma=this.ca.Ga.Wa.Lb*this.qa;this.Xc()};c.prototype.Fa=function(a){for(var b=
this.ca.a/this.Db.a,f=0;f<this.Text.length;++f){var g=this.Text[f];" "!==g&&this.Db.pc(a,g,0,0,b);a.translate(this.Ma+this.qa,0)}};c.prototype.Xc=function(){this.a.x=(this.Ma+this.qa)*this.Text.length-this.qa;this.a.y=this.ca.a};return c}(k.Ob);e.Text=h;h=function(d){function c(){d.apply(this,arguments)}l(c,d);c.prototype.ma=function(a){if(this.rb){var b=this.ca.a/this.Db.a,f=this.b,g=f.x,f=f.y,g=g-this.a.x*this.h.x*this.i.x,f=f-this.a.y*this.h.y*this.i.y,c=a.globalAlpha;a.globalAlpha*=this.ea;for(var d=
0;d<this.Text.length;++d){var e=this.Text[d];" "!==e&&this.Db.pc(a,e,g,f,b*this.i.x,b*this.i.y);g+=(this.Ma+this.qa)*this.i.x}a.globalAlpha=c}};c.prototype.Cache=function(){throw Error("Use gfx.Text if you want cache");};return c}(h);e.u=h})(t||(t={}));
(function(e){e.Hc=function(d,c){var a=d.indexOf(c);if(0<=a)d.splice(a,1);else throw Error();};e.Vd=function(d,c){var a=d.indexOf(c);0<=a&&d.splice(a,1)};e.vd=function(d){return d[d.length-1]};e.zb=function(d,c){var a=d.substr(1).match(/.{2}/g).map(function(b){return parseInt(b,16)}),a=a.map(function(b){return Math.min(b*c,255)|0});return"#"+((a[0]<<16)+(a[1]<<8)+a[2]+16777216).toString(16).substr(1)};var h=function(){function d(c){void 0===c&&(c=60);this.Fc=c;this.Id=0;this.Gb=Array(c);for(var a=
0;a<c;++a)this.Gb[a]=0}d.prototype.l=function(c){this.Gb[this.Id++%this.Gb.length]=c};d.prototype.tc=function(){return 1/this.nd()};d.prototype.nd=function(){for(var c=0,a=0;a<this.Fc;++a)c+=this.Gb[a];return c/this.Fc};return d}();e.cb=h;h=function(){function d(){this.mc=[]}d.prototype.la=function(c,a){this.mc.push([c,a]);return this};d.prototype.cd=function(){for(var c=0,a=this.mc;c<a.length;c++){var b=a[c];b[0].call(b[1])}};return d}();e.dd=h})(k||(k={}));
(function(e){var h=function(){function c(a,b){this.wb=a;this.Aa=b;this.ra=0;this.Jb=[];this.Bb=0;this.Zb=new e.dd;this.bc=this.Tb=!1}c.prototype.j=function(){var a=this.Rb();a.Aa&&(a.IsPlaying()&&a.Aa.Pc(a),a.Aa.Sd(a));for(;a;)a.Tb=!1,a.ra=0,a=a.$;return this};c.prototype.s=function(a,b,f){void 0===b&&(b=1);void 0===f&&(f=d.zd);this.Jb=[];for(var g in a)this.Jb.push({key:g,start:0,Yc:0,end:a[g]});this.Bb=b;this.ld=f;return this};c.prototype.xa=function(a){this.zc=a;return this};c.prototype.ga=function(a){void 0===
a&&(a=this.wb);this.$=a=new c(a,this.Aa);a.oa=this;return a};c.prototype.ac=function(a,b){this.Zb.la(function(){if(this.Aa)b(this.Aa.v(a).j());else throw Error();},this);return this};c.prototype.ia=function(a){return this.ga().s({},a)};c.prototype.Nd=function(){for(var a=this;a;a=a.oa)a.bc=!a.bc;return this};c.prototype.Ad=function(){var a=this;this.Zb.la(function(){setTimeout(a.j.bind(a),0)});return this};c.prototype.l=function(a){for(var b=this;b;)if(0===b.ra&&b.pd(),b.ra+=a,b.ra<=b.Bb){b.Uc(b.ra);
break}else b.Tb||(b.Uc(b.Bb),b.zc&&b.zc(b.wb),b.Aa&&!b.$&&b.Aa.Pc(b.Rb()),b.Tb=!0),b=b.$};c.prototype.Rb=function(){for(var a=this;a.oa;)a=a.oa;return a};c.prototype.IsPlaying=function(){if(this.Aa)return 0<=this.Aa.o.indexOf(this.Rb());throw Error();};c.prototype.Uc=function(a){for(var b=0,f=this.Jb;b<f.length;b++){var g=f[b];this.wb[g.key]=this.ld(a,g.start,g.Yc,this.Bb)}};c.prototype.pd=function(){for(var a=0,b=this.Jb;a<b.length;a++){var f=b[a];if(this.bc){var g=f.start||this.wb[f.key];f.start=
f.end;f.end=g}else f.start=this.wb[f.key];f.Yc=f.end-f.start}this.Zb.cd()};return c}();e.Xd=h;var d;(function(c){c.zd=function(a,b,f,g){return f*a/g+b};c.Na=function(a,b,f,g){a/=g;a--;return f*(a*a*a+1)+b};c.Mc=function(a,b,f,g){return-f/2*(Math.cos(Math.PI*a/g)-1)+b}})(d=e.ya||(e.ya={}));h=function(){function c(){this.o=[]}c.prototype.v=function(a){return new e.Xd(a,this)};c.prototype.Sd=function(a){this.o.push(a)};c.prototype.Pc=function(a){e.Hc(this.o,a)};c.prototype.l=function(a){for(var b=0,
f=this.o;b<f.length;b++)f[b].l(a)};return c}();e.Tc=h})(k||(k={}));
(function(e){var h=function(d){function c(){d.apply(this,arguments)}l(c,d);c.prototype.j=function(){var a=this;d.prototype.j.call(this);this.m.ha.style.background="black";this.wa=new k.Ha;this.wa.i.Set(.5,.5);var b=new t.u(0,0,"A GAME BY KAKUS");b.h.Set(.5,.5);var f=new t.u(0,b.a.y+10,"MADE FOR JS13K WITH ");f.h.Set(.5,.5);var g=new t.u(f.a.x/2,f.b.y,"\u2665");g.h.Set(0,.5);g.ib("red");var c=new t.u(0,f.b.y+300,"2015");c.h.Set(.5,.5);this.wa.f(b);this.wa.f(f);this.wa.f(g);this.wa.f(c);this.c.ea=0;
this.o.v(this.c).s({ea:1}).ga().ia(1).ga().s({ea:0}).xa(function(){return a.m.Play("menu")}).j();this.c.f(this.wa);this.ta()};c.prototype.ta=function(){d.prototype.ta.call(this);this.wa.b.Set(this.c.a.x/2,this.c.a.y/3)};return c}(e.yb);e.Rd=h})(m||(m={}));
(function(e){var h=function(d){function c(a,b,f,g,c){void 0===c&&(c={fillStyle:"red"});d.call(this,a,b,f,g);this.ca=c}l(c,d);c.prototype.Fa=function(a){this.ca.fc&&(a.globalCompositeOperation=this.ca.fc);this.ca.fillStyle&&(a.fillStyle=this.ca.fillStyle,a.fillRect(0,0,this.a.x,this.a.y));this.ca.strokeStyle&&(a.strokeStyle=this.ca.strokeStyle,a.strokeRect(0,0,this.a.x,this.a.y))};return c}(k.Ob);e.Za=h})(t||(t={}));
(function(e){e.ub=function(e,d){if(d<e)throw Error();return e+Math.random()*(d-e)}})(k||(k={}));
(function(e){var h=function(){function c(a,b,f,g){void 0===g&&(g=NaN);this.lc=a;this.oc=b;this.ia=f;this.qd=g;this.bb=this.ra=0}c.prototype.l=function(a){this.ra+=a;this.ra>this.ia&&(0===this.bb&&(this.lc.call(this.oc,a),this.bb+=1),this.ra-this.ia>this.qd*this.bb&&(this.lc.call(this.oc,a),this.bb+=1))};return c}();e.ce=h;var d=function(){function c(){this.ba=[]}c.prototype.ia=function(a,b,f){var g=this,c;this.ba.push(c=new h(function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];
e.Vd(g.ba,c);b.apply(f,a)},f,a));return c};c.prototype.Ic=function(a,b,c,g){void 0===g&&(g=0);this.ba.push(new h(b,c,g,a))};c.prototype.l=function(a){for(var b=0,c=this.ba;b<c.length;b++)c[b].l(a)};c.prototype.Gc=function(){this.ba=[]};return c}();e.Rc=d})(k||(k={}));
(function(e){(function(h){var d=k.X,c=k.X.Ta,a=function(b){function a(){b.apply(this,arguments);this.ja=d.v(0,0);this.da=[];this.pa="red";this.w=1}l(a,b);a.prototype.l=function(b){this.qb()?(this.pa=1<this.g.Fb?e.ka.color.Zc:e.ka.color.active,this.Zd(b)):(d.Z(this.ja,c),d.i(c,b),d.la(this.b,c,this.b))};a.prototype.Fa=function(){throw Error("Unimplemented");};a.prototype.qb=function(){return 1<this.da.length};a.prototype.La=function(b){if(!(100<this.da.length)){var a=k.vd(this.da),f=2>this.da.length;
if(a){if(d.Sa(b,a,c),b=d.sb(c),20<b){d.Kb(c);d.i(c,20);for(var e=d.Z(c);20<b;)d.la(a,e,c),this.da.push(a=d.Z(c)),b-=20;if(f){f=this.da;a=f[0];f=f[1];d.Sa(f,a,c);b=this.ja;var h;void 0===h&&(h=.01);(0===b.y||0===c.y?b.y===c.y:Math.abs(Math.abs(b.x/b.y)-Math.abs(c.x/c.y))<h)||(h=d.sb(this.ja),d.Sa(f,this.b,this.ja),d.Kb(this.ja),d.Z(this.ja,a),d.i(a,10),d.la(this.b,a,a),d.i(this.ja,h))}}}else this.da.push(d.Z(b))}};a.prototype.Zd=function(b){var a=d.sb(this.ja);b=a*b;for(var f=0;0<b;)if(d.Sa(this.da[0],
this.b,c),0<(f=d.sb(c))-b){d.Kb(c);d.Z(c,this.ja);d.i(c,b);d.la(this.b,c,this.b);d.i(this.ja,a);break}else if(b-=f,d.la(this.b,c,this.b),this.da.shift(),this.w+=this.g.Fb,1>this.da.length)break};return a}(k.Ob);h.$c=a})(e.Mb||(e.Mb={}))})(p||(p={}));
(function(e){(function(e){var d=function(c){function a(b,a,g,n){c.call(this,b,a,g,n);this.na=new t.Text(0,0);this.na.h.Set(.5,.5);this.na.b.Set(g/2,n/2)}l(a,c);a.prototype.l=function(b){this.Ba+=1*Math.PI*b;c.prototype.l.call(this,b)};a.prototype.Fa=function(b){b.globalCompositeOperation="xor";b.fillStyle=this.pa;b.fillRect(0,0,this.a.x,this.a.y);this.na.Qa(this.w.toFixed(0));this.na.Ba=-this.Ba;this.na.ma(b)};return a}(e.$c);e.Jd=d})(e.Mb||(e.Mb={}))})(p||(p={}));
(function(e){var h=k.X,d=function(b){function a(){b.apply(this,arguments)}l(a,b);a.prototype.ma=function(a){var c=a.globalCompositeOperation;a.globalCompositeOperation="xor";b.prototype.ma.call(this,a);a.globalCompositeOperation=c};return a}(t.u),c=function(b){function a(){b.apply(this,arguments)}l(a,b);a.prototype.ma=function(a){var c=a.globalCompositeOperation;a.globalCompositeOperation="destination-over";b.prototype.ma.call(this,a);a.globalCompositeOperation=c};return a}(t.u),a=function(b){function a(g,
f,d){void 0===d&&(d={Ra:3,sa:15});b.call(this,0,0,g,f);this.za=d;this.w=0;this.Fb=1;this.xb=this.za.sa;this.td=!1;this.o=new k.Tc;this.ba=new k.Rc;this.ba.Ic(this.za.Ra,this.Hb,this);this.ba.ia(this.za.sa,this.$b,this);this.ba.Ic(1,this.$d,this,this.za.sa-5.5);this.Ka=new c(g/2,g/3);this.Ka.h.Set(.5,.5);this.Ka.ib(k.zb(e.ka.color.background,1.4));this.Ka.aa(120)}l(a,b);a.prototype.l=function(b){this.xb-=b;this.o.l(b);this.ba.l(b);0<=this.xb&&(this.Ka.Qa(this.xb.toFixed(0)),this.ec(b),this.Yd())};
a.prototype.ec=function(b){for(var a=this.va;a;a=a.$)if(a.g){a.l(b);if(a.qb())for(var c=a.$;c;c=c.$)c.qb()&&this.sd(a,c)&&this.Dd(a,c);a.b.y<-a.a.y/2?this.Bc(a):a.b.x>this.a.x||0>a.b.x?this.Bc(a):a.b.y>this.a.y&&this.Ed(a)}};a.prototype.Yd=function(){for(var a=[],b=this.va;b;b=b.$)b.qb()&&a.push(b);var c=4>a.length?1:a.length/2|0;if(0<c-this.Fb)for(var f=0;f<a.length;f++)b=a[f],this.o.v(b.i).s({x:1.5,y:1.5},.2,k.ya.Na).ga().s({x:1,y:1},.2).j();this.Fb=c};a.prototype.ad=function(a){this.$a?(this.$a.$=
a,a.oa=this.$a,this.$a=a):this.va=this.$a=a;a.g=this};a.prototype.gb=function(a){a.$?a.oa?(a.oa.$=a.$,a.$.oa=a.oa):(a.$.oa=null,this.va=a.$):a.oa?(a.oa.$=null,this.$a=a.oa):this.va=this.$a=null;a.g=void 0};a.prototype.od=function(a){for(var b=this.va;b;b=b.$)if(b.Eb(a))return b;return null};a.prototype.sc=function(a){if(!(2>a.da.length)){var b=a.da[a.da.length-1],c=h.Ta;h.Sa(b,a.da[a.da.length-2],c);h.i(c,20);h.la(b,c,c);a.La(c)}};a.prototype.Fa=function(a){a.strokeStyle=e.ka.color.active;a.setLineDash([3,
9]);a.lineWidth=2;for(var c=this.va;c;c=c.$)if(c.qb()){a.beginPath();a.moveTo(c.b.x,c.b.y);for(var f=0,d=c.da;f<d.length;f++){var h=d[f];a.lineTo(h.x,h.y)}a.stroke()}b.prototype.Fa.call(this,a);this.Ka.ma(a)};a.prototype.sd=function(a,b){var c=h.Ta;h.Sa(a.b,b.b,c);return h.sb(c)<(a.a.x+b.a.x)/2};a.prototype.Bc=function(a){var b=Math.min(-a.w,-10);this.w+=b;a.b.y+=a.a.y/2;this.Pb(a.b,b);this.gb(a);this.vb(a);this.Hb()};a.prototype.Ed=function(a){this.w+=a.w;this.Pb(a.b,a.w);this.gb(a);this.vb(a)};
a.prototype.Dd=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];b.forEach(function(b){a.gb(b);a.o.v(b).s({ea:0},2).xa(function(){return b.Pa()}).j()})};a.prototype.$b=function(){var a=this;this.ba.Gc();var b=this.o.v(null);b.j();for(var c=this.va;c;c=c.$)if(1<c.w){var f=this.o.v(c.i).s({x:2,y:2},.3,k.ya.Na).ga(c).s({w:c.w/2|0},.5).xa(function(b){var c=Math.round(b.w);a.Pb(b.b,c);a.w+=c}).ga(c.i).s({x:5,y:5},.35).ac(c,function(a){return a.s({ea:0},.35)}).ga(c).xa(function(b){a.vb(b);
a.gb(b)});b.ga(f).xa(function(a){return a.j()});b=f}b.ga().xa(function(){a.Cc&&a.Cc();for(var b=a.va;b;b=b.$)if(1>=b.w&&b.g){var c=k.ub(0,.6);a.o.v(b.i).ia(c).ga().s({x:5,y:5},.35).ac(b,function(a){return a.s({ea:0},.25)}).ga(b).xa(function(b){a.vb(b);a.gb(b)}).j()}a.td=!0})};a.prototype.Hb=function(){var a=new e.Mb.Jd(k.ub(15,this.a.x-15),this.a.y-5,30,30);a.pa=e.ka.color.gc;a.h.Set(.5,.5);a.ea=0;a.i.Set(.1,.1);var b=h.Ta;b.y=0;b.x=k.ub(15,this.a.x-15);h.Sa(a.b,b,b);h.Kb(b);h.i(b,k.ub(-80,-60));
h.Z(b,a.ja);this.o.v(a).s({ea:1},.2).j();this.o.v(a.i).s({x:1,y:1},.2).j();this.ad(a);this.f(a)};a.prototype.Pb=function(a,b){var c=new d(a.x,a.y,(0<b?"+":"")+b);c.h.Set(.5,.5);c.ib(0<b?e.ka.color.active:e.ka.color.gc);this.f(c);var f=0<b?2:1;this.o.v(c.i).s({x:f,y:f},.5,k.ya.Na).ia(.3).ga(c).s({ea:0},.3).xa(function(){c.Pa()}).j();if(0>a.x||a.x>this.a.x){var h=0<a.x?1:-1;this.o.v(c.b).s({x:a.x-h*c.a.x*f},.2).j()}else h=0<a.y?1:-1,this.o.v(c.b).s({y:a.y-h*c.a.y*f},.2).j()};a.prototype.$d=function(){this.Ka.i.Set(2,
2);this.o.v(this.Ka.i).ia(.1).ga().s({x:1,y:1},.4).j()};return a}(k.Ha);e.g=a})(p||(p={}));(function(e){(function(e){e.nc=function(d){return Math.max(Math.min(d,1),0)}})(e.hc||(e.hc={}))})(k||(k={}));
(function(e){var h=function(c){function a(a){void 0===a&&(a={Ra:3,sa:1,Ia:"",Xa:100});c.call(this);this.za=a}l(a,c);a.prototype.j=function(){var a=this;c.prototype.j.call(this);this.Ca=0;this.g=new p.g(this.c.a.x,this.c.a.y,this.za);this.g.Cc=function(){return a.ba.ia(1,a.$b,a)};this.c.f(this.g);this.fa=new d(this);this.Vb();this.Wb();this.c.f(this.jc=new t.Za(0,this.g.a.y,this.g.a.x,30,{fillStyle:"rgba(0, 0, 0, 0.5)"}));this.kb=new t.u(0,0,"TAP TO START");this.kb.h.Set(.5,.5);this.c.f(this.kb);this.na=
new t.u(0,0);this.na.h.Set(.5,.5);this.na.aa(15);this.c.f(this.na);this.hb=new t.u(0,0,"RESTART");this.hb.aa(10);this.hb.h.Set(1,.5);this.c.f(this.hb);this.eb=new t.u(0,0,"MENU");this.eb.aa(10);this.eb.h.Set(0,.5);this.c.f(this.eb);this.Cb=new t.u(0,0);this.Cb.aa(10);this.c.f(this.Cb);this.fa.Da(this.hb,function(){return a.m.Play("game")}).Da(this.eb,function(){return a.m.Play("select")});this.ta()};a.prototype.l=function(a){c.prototype.l.call(this,a);this.cb.l(a);this.fa.l();this.g.l(a*this.Ca);
this.Cb.Qa(this.cb.tc().toFixed(1));this.na.Qa(this.g.w.toString())};a.prototype.ma=function(a){a.clearRect(0,0,a.canvas.width,a.canvas.height);this.c.ma(a)};a.prototype.$b=function(){var a=this;this.za.Ia&&this.g.w>p.lb.uc(this.za.Ia)&&p.lb.Qd(this.za.Ia,this.g.w);var c=new k.Ha(this.c.a.x/2,150);this.g.Ka.rb=!1;var g=k.hc.nc(this.g.w/this.za.Xa),d=new e.wd(0,0);d.h.Set(.5,.5);d.Sc(this.o,g);g=new t.Text(0,100,"RESTART");g.aa(20);g.h.Set(.5,.5);g.ib(p.ka.color.background);var h=new t.Za(g.b.x,g.b.y,
g.a.x+20,g.a.y+10,{fillStyle:"white"});h.h.Set(.5,.5);var r=new t.u(0,160,"LEVEL SELECT");r.h.Set(.5,.5);c.f(d);c.f(h);c.f(g);c.f(r);this.c.f(c);this.eb.Pa();this.hb.Pa();this.o.v(this.na.b).s({y:100},1,k.ya.Na).ac(this.na.i,function(a){return a.s({x:2,y:2})}).j();this.fa=(new k.pb).Da(g,function(){return a.m.Play("game")}).Da(r,function(){return a.m.Play("select")})};a.prototype.ta=function(){c.prototype.ta.call(this);this.g.a.y=this.c.a.y-this.jc.a.y;this.jc.b.Set(0,this.g.a.y);this.kb.b.Set(this.g.a.x/
2,this.g.a.y/2);this.na.b.Set(this.g.a.x/2,this.g.a.y+13.5);this.hb.b.Set(this.g.a.x-10,this.g.a.y+13.5);this.eb.b.Set(10,this.g.a.y+13.5);this.Cb.b.Set(10.5,10.5)};return a}(e.yb);e.Ec=h;var d=function(c){function a(a){c.call(this);this.Ja=a;this.ob=new k.ab}l(a,c);a.prototype.Ya=function(a){k.X.Z(a,this.ob);var f=this.Ja.g.od(this.ob);f&&(f.da=[],this.ua=f);c.prototype.Ya.call(this,a)};a.prototype.fb=function(a){this.Ja.kb.Oa&&(this.Ja.Ca=1,this.Ja.kb.Pa());this.ua&&(this.Ja.g.sc(this.ua),this.ua=
void 0);c.prototype.fb.call(this,a)};a.prototype.tb=function(a){k.X.Z(a,this.ob);!this.ua&&this.Ja.g.Eb(a)&&this.Ya(a);this.ua&&!this.Ja.g.Eb(this.ob)&&(this.Ja.g.sc(this.ua),this.ua=void 0)};a.prototype.l=function(){this.ua&&(this.ua.Oa?this.ua.La(this.Ja.g.dc(this.ob)):this.ua=void 0)};return a}(k.pb)})(m||(m={}));
(function(e){var h=function(a){function b(){a.apply(this,arguments);this.yd=[{Ia:"World1.Level1",Ra:6,sa:5,Xa:15},{Ia:"World1.Level2",Ra:3,sa:15,Xa:200},{Ia:"World1.Level3",Ra:3,sa:30,Xa:650},{Ia:"World1.Level4",Ra:3,sa:60,Xa:1E3}]}l(b,a);b.prototype.j=function(){var b=this;a.prototype.j.call(this);this.m.ha.style.background=p.ka.color.background;this.fa=new k.pb;this.Vb();this.Wb();var g=new t.u(this.c.a.x/2,10,"CHALLANGE");g.h.Set(.5,0);g.aa(10);this.c.f(g);g=new t.u(this.c.a.x/2,30,"PRECISION");
g.h.Set(.5,0);this.c.f(g);var d=[];this.yd.forEach(function(a,g){var h=new c(g,a);h.b.Set(g&1?b.c.a.x+h.a.x:-h.a.x,120+70*g);h.h.Set(.5,.5);b.c.f(h);var v=b.o.v(h.b).s({x:b.c.a.x/2},1,k.ya.Na).xa(function(){return h.Td(b.o)}).j();d.push([h,v]);b.fa.Da(h,function(){b.o.v(h.i).s({x:1.1,y:1.1},1,k.ya.Na).xa(function(){b.m.mb("game",new e.Ec(a));b.m.Play("game")}).j();for(var c=0;c<d.length;c++){var g=d[c],v=g[1];g[0]!==h&&v.Nd().j()}})});g=new t.u(40,30,"MENU");g.h.Set(.5,.5);g.aa(10);var h=new t.Za(g.b.x,
g.b.y,50,30,{strokeStyle:"white"});h.h.Set(.5,.5);h.rb=!1;this.c.f(h);this.fa.Da(h,function(){return b.m.Play("menu")});this.c.f(g);this.ta()};b.prototype.l=function(){this.o.l(.016)};return b}(e.yb);e.xd=h;var d=function(a){function b(b,c){a.call(this,b,c,200,20);var d=new t.u(5,5,"BAD");d.aa(10);this.f(d);d=new t.u(195,5,"AWESOME");d.aa(10);d.h.Set(1,0);this.f(d);d=new t.Za(.5,.5,200,20,{strokeStyle:"white"});this.f(d);d=new t.Za(1.5,1.5,198,18,{fillStyle:"white",fc:"xor"});d.i.Set(0,1);this.f(this.rc=
d)}l(b,a);b.prototype.Sc=function(a,b){var c=this,d=a.v(this.rc.i).s({x:b},1,k.ya.Na).j();1===b&&d.xa(function(){return c.rc.ca.fillStyle=p.ka.color.Zc})};return b}(k.Ha);e.wd=d;var c=function(a){function b(b,c){a.call(this,0,0,250,40);this.hd=c;var e=new t.u(0,0,b.toString());e.aa(40);e.ib(p.ka.color.gc);this.f(e);this.w=p.lb.uc(c.Ia);e=new t.u(50,0,"HI-SCORE: "+this.w);e.aa(10);this.f(e);e=new t.u(251,0,"TIME: "+c.sa);e.aa(10);e.h.Set(1,0);this.f(e);this.Kc=new d(50,20);this.f(this.Kc);e=new t.Za(125,
20,270,60,{fillStyle:"rgba(0, 0, 0, 0.5)",fc:"destination-over"});e.h.Set(.5,.5);this.f(e)}l(b,a);b.prototype.Td=function(a){var b=k.hc.nc(this.w/this.hd.Xa);this.Kc.Sc(a,b)};return b}(k.Ha)})(m||(m={}));
(function(e){var h=function(){function d(){}Object.defineProperty(d.prototype,"PassedTutorial",{get:function(){return!!localStorage.getItem("PlayerPassedTutorial")},set:function(c){localStorage.setItem("PlayerPassedTutorial",""+c)},enumerable:!0,configurable:!0});d.prototype.uc=function(c){return parseInt(localStorage.getItem("HiScore."+c),10)||0};d.prototype.Qd=function(c,a){localStorage.setItem("HiScore."+c,a.toString())};d.prototype.fd=function(){localStorage.clear()};return d}();e.lb=new h})(p||
(p={}));
(function(e){var h=k.X,d=function(a){function b(){a.apply(this,arguments);this.Ib=0}l(b,a);b.prototype.j=function(){var b=this;a.prototype.j.call(this);this.Vc=[];this.Wc=12;this.fa=new k.pb;this.Vb();this.Wb();this.Qb=new t.u(10,10);this.Qb.aa(10);this.c.f(this.Qb);this.wa=new k.Ha;var c=1,d;for(d in localStorage){var e=new t.u(10,15*c,d.toUpperCase());e.aa(10);var r=new t.u(e.a.x+30,15*c,localStorage[d].toUpperCase());r.aa(10);this.c.f(e,r);c+=1}c=new t.Text(0,0,"SHAPES \u2665 NUMBERS");c.Cache();
c.h.Set(.5,.5);c=new k.Ha(0,100);c.h.Set(.5,.5);c.i.Set(2,2);d=new t.Text(5,5,"PLAY");e=new t.Za(0,0,d.a.x+10,d.a.y+10,{strokeStyle:"white",fillStyle:"rgba(0, 0, 0, 0.2)"});c.f(d);c.f(e);h.Z(e.a,c.a);c.Cache();d=new t.Text(0,200,"TUTORIAL");d.Cache();d.h.Set(.5,.5);e=new t.Text(0,260,"VOTE");e.Cache();e.h.Set(.5,.5);var u=new t.u(0,280,"CLEAR DATA");u.h.Set(.5,.5);u.aa(10);this.wa.f(c,d,e);this.fa.Da(c,function(){return b.m.Play(p.lb.Gd?"select":"tutorial")}).Da(d,function(){return b.m.Play("tutorial")}).Da(u,
function(){p.lb.fd();u.Qa("DONE")});this.o.v(c).s({Ba:Math.PI/12},2,k.ya.Mc).ga().s({Ba:-Math.PI/12},2,k.ya.Mc).ga().Ad().j();this.c.ea=0;this.o.v(this.c).s({ea:1}).j();this.ta();this.Bd();this.c.f(this.wa)};b.prototype.l=function(b){this.Ib+=b;this.cb.l(b);this.Qb.Qa(this.cb.tc().toFixed(1));b=.016;1>this.Ib&&(this.m.ha.style.background=k.zb(p.ka.color.background,this.Ib));for(var c=0,d=this.Vc;c<d.length;c++)d[c].l(b*this.Wc);a.prototype.l.call(this,b)};b.prototype.ta=function(){a.prototype.ta.call(this);
this.wa.b.Set(this.c.a.x/2,this.c.a.y/5)};b.prototype.Bd=function(){for(var a=new k.Ha,b=2;1<=b;--b){h.Z(this.c.a,a.a);var d=1/(b/2+1),e=new c(a.a.x,a.a.y,{Ra:.5,sa:1E9});e.i.Set(d,(b&1?-1:1)*d);e.h.Set(.5,.5);e.ea=d;h.i(e.a,1/d);e.Ka.rb=!1;a.f(e);this.Vc.push(e)}a.b.Set(this.c.a.x/2,this.c.a.y/2);this.c.f(a);this.o.v(this).s({Wc:1},2,k.ya.Na).j()};return b}(e.yb);e.Cd=d;var c=function(a){function b(){a.apply(this,arguments);this.Lc=1}l(b,a);b.prototype.l=function(a){this.o.l(a);this.ba.l(a);this.ec(a)};
b.prototype.ec=function(a){for(var b=h.Ta,c=this.va;c;c=c.$)if(h.Z(c.ja,b),h.i(b,a),h.la(c.b,b,c.b),c.Ba+=Math.PI/80,0>c.b.y||c.b.y>this.a.y||0>c.b.x||c.b.x>this.a.x)this.gb(c),c.Pa()};b.prototype.Hb=function(){a.prototype.Hb.call(this);var b=this.$a;b.pa=k.zb(b.pa,this.Lc);this.wc?b.Ea=this.wc:(b.Cache(),this.wc=b.Ea);.5<Math.random()||(b.pa=k.zb(p.ka.color.active,this.Lc),this.ic?b.Ea=this.ic:(b.Cache(),this.ic=b.Ea))};return b}(p.g)})(m||(m={}));
(function(e){var h=k.X,d=function(c){function a(){c.call(this,{Ra:15,sa:15,Ia:"",Xa:10});this.Oc="SEE THIS RED SQUARE?;THIS IS ITS TRAJECTORY;YOUR GOAL IS TO;REVERSE ITS TRAJECTORY;LIKE THAT;SO IT WILL HIT THE BOTTOM;THEN YOU WILL EARN POINTS;BUT YOU HAVE TO;DO THIS BEFORE;TIME RUN OUT;GOT IT?;".split(";")}l(a,c);a.prototype.j=function(){var a=this;c.prototype.j.call(this);var d=this.c.a.x/2;this.Ca=1;var e=new t.u(d,100);e.aa(15);e.h.Set(.5,.5);this.Ud=e;this.nb=0;var h=new t.u(d,130,"TAP TO CONTINIUE");
h.h.Set(.5,.5);h.aa(10);h.ea=.7;this.cc=h;this.kb.Pa();this.fa=new k.pb;this.ba.ia(1.5,function(){a.Ca=0;e.Qa(a.Oc[a.nb++]);a.c.f(h);a.c.f(e);a.fa.Da(a.c,a.qc.bind(a))})};a.prototype.qc=function(){var a=this;this.Ud.Qa(this.Oc[this.nb]);switch(this.nb){case 1:this.bd(this.g.va);break;case 2:case 3:break;case 4:this.Od(this.g.va);break;case 5:this.Ca=1;if(1>this.g.w){this.cc.Oa&&this.cc.Pa();this.ba.ia(.1,function(){return a.qc()});return}this.Ca=0;this.c.f(this.cc);this.ba.Gc();break;case 6:this.Ca=
1;this.ba.ia(1.5,function(){return a.Ca=0});break;case 7:case 8:break;case 9:this.Ca=1,this.g.l(this.g.xb-5.5),this.ba.ia(5.3,function(){return a.Ca=0});case 10:break;case 11:this.m.Play("select");p.lb.Gd=!0;return;default:throw Error();}this.nb+=1};a.prototype.bd=function(a){var c=h.Ta;h.Z(a.ja,c);h.i(c,10);h.la(c,a.b,c);a.La(a.b);a.La(c)};a.prototype.Od=function(a){var c=h.Ta;a.da=[];h.Z(a.ja,c);h.la(c,a.b,c);a.La(a.b);a.La(c);c.Set(this.g.a.x/2+k.ub(-30,30),this.g.a.y/2+50);a.La(c);c.Set(this.g.a.x/
2,this.g.a.y+50);a.La(c)};return a}(e.Ec);e.Wd=d})(m||(m={}));var w=new k.m("canvas");w.mb("splash",new m.Rd);w.mb("menu",new m.Cd);w.mb("select",new m.xd);w.mb("tutorial",new m.Wd);w.Play("splash");w.j();
