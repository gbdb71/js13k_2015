var k;
(function(f){var h=function(){function d(c){this.Rc={};this.Bc=this.Uc=0;this.jb=[];this.ha=document.getElementById(c);this.kd=this.ha.getContext("2d");this.Nc=window.requestAnimationFrame.bind(window,this.Kd.bind(this))}d.prototype.lb=function(c,b){this.Rc[c]=b};d.prototype.Play=function(c){this.Ta&&this.jd();if(this.Ta=this.Rc[c])this.Ta.l=this,this.Ta.j();else throw Error();};d.prototype.j=function(){this.Nc()};d.prototype.Ua=function(c,b,a){this.jb.push({element:c,type:b,listener:a});c.addEventListener(b,a)};
d.prototype.Od=function(c,b,a){for(var e=0,g=this.jb;e<g.length;e++){var p=g[e];if(p.element===c&&p.type===b&&p.listener===a){f.Lc(this.jb,p);c.removeEventListener(b,a);return}}throw Error("Couldn't find event listener.");};d.prototype.jd=function(){for(var c=this.jb.length-1;0<=c;--c){var b=this.jb[c];this.Od(b.element,b.type,b.listener)}this.jb=[];this.Ta.md&&this.Ta.md()};d.prototype.Kd=function(c){var b=c-this.Bc;50<b&&(b=50);this.Uc=b/1E3;this.Ta.m(this.Uc);this.Ta.ma(this.kd);this.Bc=c;this.Nc()};
return d}();f.l=h})(k||(k={}));(function(f){var h=function(){function d(c,b){void 0===c&&(c=0);void 0===b&&(b=0);this.x=c;this.y=b}d.prototype.Set=function(c,b){this.x=c;this.y=b};d.prototype.aa=function(c){return c?(c.x=this.x,c.y=this.y,c):new d(this.x,this.y)};return d}();f.ab=h})(k||(k={}));
(function(f){(function(h){function d(a,e){void 0===a&&(a=0);void 0===e&&(e=0);return new f.ab(a,e)}function c(a,e){if(e)e.x=a.x,e.y=a.y;else return d(a.x,a.y)}function b(a){return Math.sqrt(a.x*a.x+a.y*a.y)}h.ie=new f.ab;h.Sa=new f.ab;h.u=d;h.aa=c;h.xd=function(a){return 0===a.x&&0===a.y};h.la=function(a,e,g){g.x=a.x+e.x;g.y=a.y+e.y};h.Ra=function(a,e,g){g.x=a.x-e.x;g.y=a.y-e.y};h.Cc=function(a,e,g){g.x=a.x*e.x;g.y=a.y*e.y};h.i=function(a,e,g){void 0===g&&(g=a);g.x=a.x*e;g.y=a.y*e};h.rb=b;h.Mb=function(a){var e;
void 0===e&&(e=a);var g=b(a);0<g&&(e.x=a.x/g,e.y=a.y/g)};h.Td=function(a,e,g){void 0===g&&(g=a);var b=Math.sin(e);e=Math.cos(e);a===g&&(a=c(a));g.x=a.x*e-a.y*b;g.y=a.x*b+a.y*e};h.fe=function(a){return Math.atan2(a.y,a.x)};h.ud=function(a,e){e.x=0<a.x?1/a.x:0;e.y=0<a.y?1/a.y:0};h.ge=function(a,e){return a.x*e.x+a.y*e.y}})(f.w||(f.w={}))})(k||(k={}));
var l=this&&this.je||function(f,h){function d(){this.constructor=f}for(var c in h)h.hasOwnProperty(c)&&(f[c]=h[c]);d.prototype=h.prototype;f.prototype=new d};
(function(f){var h=function(){function d(c,b,a,e){this.b=f.w.u(c,b);this.a=f.w.u(a,e);this.h=f.w.u(0,0);this.i=f.w.u(1,1);this.Ba=0;this.ea=1;this.qb=!0}d.prototype.ma=function(c){this.qb&&(c.save(),c.globalAlpha*=this.ea,c.translate(this.b.x,this.b.y),c.scale(this.i.x,this.i.y),c.rotate(this.Ba),f.w.xd(this.h)||c.translate(-this.h.x*this.a.x,-this.h.y*this.a.y),this.Da?this.nd(c):this.Ea(c),c.restore())};d.prototype.Ea=function(){throw Error("Unimplemented");};d.prototype.nd=function(c){c.drawImage(this.Da,
0,0)};d.prototype.hc=function(c,b){var a,e=f.w.Sa;b?(f.w.aa(c,b),a=b):a=f.w.aa(c);this.Oa&&this.Oa.hc(c,a);f.w.Ra(a,this.b,a);f.w.aa(this.i,e);f.w.ud(e,e);f.w.Cc(a,e,a);f.w.Td(a,-this.Ba,a);f.w.aa(this.h,e);f.w.Cc(e,this.a,e);f.w.la(a,e,a);if(!b)return a};d.prototype.Gb=function(c){c=this.hc(c);var b=0<c.y&&c.y<this.a.y;return 0<c.x&&c.x<this.a.x&&b};d.prototype.Pa=function(){this.Oa.ub(this)};d.prototype.Cache=function(){this.Da=document.createElement("canvas");this.Da.width=this.a.x;this.Da.height=
this.a.y;this.Ea(this.Da.getContext("2d"))};return d}();f.Pb=h;h=function(d){function c(b,a,e,g){void 0===b&&(b=0);void 0===a&&(a=0);void 0===e&&(e=0);void 0===g&&(g=0);d.call(this,b,a,e,g);this.Bb=[]}l(c,d);c.prototype.g=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(a=0;a<b.length;a++){var e=b[a];if(e.Oa)throw Error("Child has parent");e.Oa=this;this.Bb.push(e)}};c.prototype.ub=function(b){var a=this.Bb.indexOf(b);if(0<=a)b.Oa=void 0,this.Bb.splice(a,1);else throw Error("Child doesn't exist in this layer");
};c.prototype.Ea=function(b){for(var a=0,e=this.Bb;a<e.length;a++)e[a].ma(b)};return c}(h);f.Ma=h})(k||(k={}));
(function(f){function h(a,e,g){var b=g.pageX,c=g.pageY,d=g.target.getBoundingClientRect(),b=new f.ab(b-d.left,c-d.top);a.call(e,b,g)}function d(a,e,g){var b=0,d=0;if("touchend"!==g.type){var b=g.targetTouches[0].pageX,d=g.targetTouches[0].pageY,f=g.target.getBoundingClientRect();c.Set(b-f.left,d-f.top)}a.call(e,c.aa(),g);g.preventDefault()}var c=new f.ab;f.Yb=function(a,e){return h.bind(null,a,e)};f.Zb=function(a,e){return d.bind(null,a,e)};var b=function(){function a(){this.Ec=[];this.Hc=[]}a.prototype.Ja=
function(a,g){var b=0;this.Ec.push({object:a,action:function(){return b=Date.now()}});this.Hc.push({object:a,action:function(){450>Date.now()-b&&g()}});return this};a.prototype.Xa=function(a){this.zc(this.Ec,a)};a.prototype.sb=function(){};a.prototype.fb=function(a){this.zc(this.Hc,a)};a.prototype.zc=function(a,g){for(var b=0;b<a.length;b++){var c=a[b],d=c.action;c.object.Gb(g)&&d()}};a.prototype.m=function(){};return a}();f.ob=b})(k||(k={}));var m;
(function(f){var h=function(){function d(){this.Cb=new k.ab(320,370)}d.prototype.j=function(){var c=this;this.c=new k.Ma(0,0,320,370);this.o=new k.Xc;this.$=new k.Vc;this.cb=new k.cb(180);this.l.Ua(window,"resize",function(){return c.ua()})};d.prototype.m=function(c){this.$.m(c);this.o.m(c)};d.prototype.ma=function(c){c.clearRect(0,0,c.canvas.width,c.canvas.height);this.c.ma(c)};d.prototype.Xa=function(c){this.fa.Xa(c)};d.prototype.sb=function(c){this.fa.sb(c)};d.prototype.fb=function(c){this.fa.fb(c)};
d.prototype.ua=function(){var c=window.innerHeight,b=Math.min(window.innerWidth/this.Cb.x,c/this.Cb.y);this.c.i.Set(b,b);this.c.a.Set(this.Cb.x,c/b);c=Math.floor(this.c.a.x*b);this.l.ha.width!==c&&(this.l.ha.width=c);b=Math.floor(this.c.a.y*b);this.l.ha.height!==b&&(this.l.ha.height=b)};d.prototype.Wb=function(){if(!this.fa)throw Error();this.l.Ua(this.l.ha,"mousemove",k.Yb(this.sb,this));this.l.Ua(this.l.ha,"mousedown",k.Yb(this.Xa,this));this.l.Ua(this.l.ha,"mouseup",k.Yb(this.fb,this))};d.prototype.Xb=
function(){if(!this.fa)throw Error();this.l.Ua(this.l.ha,"touchmove",k.Zb(this.sb,this));this.l.Ua(this.l.ha,"touchstart",k.Zb(this.Xa,this));this.l.Ua(this.l.ha,"touchend",k.Zb(this.fb,this))};return d}();f.zb=h})(m||(m={}));var n,q=n||(n={});(q.ka||(q.ka={})).color={active:"#88A825",kc:"#911146",cd:"#ED8C2B",background:"#35203B"};var t;
(function(f){var h=function(){function d(c,b,a){void 0===a&&(a="white");this.Fa=c;this.a=b;this.qa=a;this.oc={};this.ra=b/c.Va.Tb;this.La=c.Va.Nb*this.ra;this.Cache=document.createElement("canvas");this.Cache.width=Object.keys(c.Vb).length*Math.ceil(this.La+this.ra);this.Cache.height=b;console.log("FontCache Size",this.a,"DotPx",this.ra,"Color",this.qa);this.Pd()}d.prototype.tc=function(c,b,a,e,g,p){void 0===a&&(a=0);void 0===e&&(e=0);void 0===g&&(g=1);void 0===p&&(p=g);c.drawImage(this.Cache,this.oc[b],
0,this.La,this.a,a,e,this.La*g,this.a*p)};d.prototype.Pd=function(){var c=this.Cache.getContext("2d"),b=0;c.fillStyle=this.qa;for(var a in this.Fa.Vb){this.Qd(c,a);this.oc[a]=b;var e=Math.ceil(this.La+this.ra),b=b+e;c.translate(e,0)}};d.prototype.Qd=function(c,b){for(var a=this.Fa,e=this.ra,g=0;g<a.Va.Nb;++g)for(var p=0;p<a.Va.Tb;++p)a.Vb[b][p*a.Va.Nb+g]&&c.fillRect(g*e,p*e,e,e)};return d}();f.pd=h})(t||(t={}));
(t||(t={})).Ld={Va:{Nb:3,Tb:5},Vb:{"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],".":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],",":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],":":[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"?":[1,1,0,0,0,1,0,1,1,0,0,0,0,1,0],"\u2665":[1,0,1,1,1,1,1,1,1,0,1,0,0,0,0],0:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],1:[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,0],6:[0,
1,1,1,0,0,1,1,1,1,0,1,1,1,1],7:[1,1,1,0,0,1,0,1,0,0,1,0,0,1,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],9:[1,1,1,1,0,1,1,1,1,0,0,1,1,1,0],A:[0,1,0,1,0,1,1,1,1,1,0,1,1,0,1],B:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,0],C:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],D:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],E:[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],F:[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],G:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],H:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],I:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],J:[1,1,1,0,1,0,0,1,0,0,1,0,1,0,0],K:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,
1],L:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],N:[0,0,1,1,0,1,1,1,1,1,0,1,1,0,0],M:[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],O:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],P:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],Q:[1,1,1,1,0,1,1,0,1,1,1,0,0,0,1],R:[1,1,0,1,0,1,1,1,0,1,0,1,1,0,1],S:[1,1,1,1,0,0,1,1,0,0,0,1,1,1,1],T:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],U:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],W:[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],V:[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],Y:[1,0,1,1,0,1,1,0,1,0,1,0,0,1,0]},Cache:{}};
(function(f){var h=function(d){function c(b,a,e,g){void 0===e&&(e="");void 0===g&&(g={a:20,qa:"white",Fa:f.Ld});d.call(this,b,a,0,0);this.Text=e;this.ca=g;this.ib(g.qa);this.ba(g.a)}l(c,d);c.prototype.ib=function(b){this.Fb=this.ca.Fa.Cache[b]?this.ca.Fa.Cache[b]:this.ca.Fa.Cache[b]=new f.pd(this.ca.Fa,20,b)};c.prototype.Za=function(b){this.Text=b;this.ad()};c.prototype.ba=function(b){this.ca.a=b;this.ra=b/this.ca.Fa.Va.Tb;this.La=this.ca.Fa.Va.Nb*this.ra;this.ad()};c.prototype.Ea=function(b){for(var a=
this.ca.a/this.Fb.a,e=0;e<this.Text.length;++e){var g=this.Text[e];" "!==g&&this.Fb.tc(b,g,0,0,a);b.translate(this.La+this.ra,0)}};c.prototype.ad=function(){this.a.x=(this.La+this.ra)*this.Text.length-this.ra;this.a.y=this.ca.a};return c}(k.Pb);f.Text=h;h=function(d){function c(){d.apply(this,arguments)}l(c,d);c.prototype.ma=function(b){if(this.qb){var a=this.ca.a/this.Fb.a,e=this.b,g=e.x,e=e.y,g=g-this.a.x*this.h.x*this.i.x,e=e-this.a.y*this.h.y*this.i.y,c=b.globalAlpha;b.globalAlpha*=this.ea;for(var d=
0;d<this.Text.length;++d){var f=this.Text[d];" "!==f&&this.Fb.tc(b,f,g,e,a*this.i.x,a*this.i.y);g+=(this.La+this.ra)*this.i.x}b.globalAlpha=c}};c.prototype.Cache=function(){throw Error("Use gfx.Text if you want cache");};return c}(h);f.X=h})(t||(t={}));
(function(f){f.Lc=function(d,c){var b=d.indexOf(c);if(0<=b)d.splice(b,1);else throw Error();};f.Zd=function(d,c){var b=d.indexOf(c);0<=b&&d.splice(b,1)};f.yd=function(d){return d[d.length-1]};f.Ab=function(d,c){var b=d.substr(1).match(/.{2}/g).map(function(a){return parseInt(a,16)}),b=b.map(function(a){return Math.min(a*c,255)|0});return"#"+((b[0]<<16)+(b[1]<<8)+b[2]+16777216).toString(16).substr(1)};var h=function(){function d(c){void 0===c&&(c=60);this.ec=c;this.Md=0;this.fc=Array(c);for(var b=
0;b<c;++b)this.fc[b]=0}d.prototype.m=function(c){this.fc[this.Md++%this.ec]=c};d.prototype.xc=function(){return 1/this.qd()};d.prototype.qd=function(){for(var c=0,b=0;b<this.ec;++b)c+=this.fc[b];return c/this.ec};return d}();f.cb=h;h=function(){function d(){this.qc=[]}d.prototype.la=function(c,b){this.qc.push([c,b]);return this};d.prototype.gd=function(){for(var c=0,b=this.qc;c<b.length;c++){var a=b[c];a[0].call(a[1])}};return d}();f.hd=h})(k||(k={}));
(function(f){var h=function(){function c(b,a){this.vb=b;this.Aa=a;this.sa=0;this.Lb=[];this.Db=0;this.ac=new f.hd;this.dc=this.Ub=!1}c.prototype.j=function(){var b=this.Sb();b.Aa&&(b.IsPlaying()&&b.Aa.Tc(b),b.Aa.Wd(b));for(;b;)b.Ub=!1,b.sa=0,b=b.Z;return this};c.prototype.s=function(b,a,e){void 0===a&&(a=1);void 0===e&&(e=d.Cd);this.Lb=[];for(var g in b)this.Lb.push({key:g,start:0,bd:0,end:b[g]});this.Db=a;this.od=e;return this};c.prototype.xa=function(b){this.Dc=b;return this};c.prototype.ga=function(b){void 0===
b&&(b=this.vb);this.Z=b=new c(b,this.Aa);b.oa=this;return b};c.prototype.cc=function(b,a){this.ac.la(function(){if(this.Aa)a(this.Aa.u(b).j());else throw Error();},this);return this};c.prototype.ia=function(b){return this.ga().s({},b)};c.prototype.Rd=function(){for(var b=this;b;b=b.oa)b.dc=!b.dc;return this};c.prototype.Dd=function(){var b=this;this.ac.la(function(){setTimeout(b.j.bind(b),0)});return this};c.prototype.m=function(b){for(var a=this;a;)if(0===a.sa&&a.sd(),a.sa+=b,a.sa<=a.Db){a.Yc(a.sa);
break}else a.Ub||(a.Yc(a.Db),a.Dc&&a.Dc(a.vb),a.Aa&&!a.Z&&a.Aa.Tc(a.Sb()),a.Ub=!0),a=a.Z};c.prototype.Sb=function(){for(var b=this;b.oa;)b=b.oa;return b};c.prototype.IsPlaying=function(){if(this.Aa)return 0<=this.Aa.o.indexOf(this.Sb());throw Error();};c.prototype.Yc=function(b){for(var a=0,e=this.Lb;a<e.length;a++){var g=e[a];this.vb[g.key]=this.od(b,g.start,g.bd,this.Db)}};c.prototype.sd=function(){for(var b=0,a=this.Lb;b<a.length;b++){var e=a[b];if(this.dc){var g=e.start||this.vb[e.key];e.start=
e.end;e.end=g}else e.start=this.vb[e.key];e.bd=e.end-e.start}this.ac.gd()};return c}();f.be=h;var d;(function(c){c.Cd=function(b,a,e,g){return e*b/g+a};c.Na=function(b,a,e,g){b/=g;b--;return e*(b*b*b+1)+a};c.Qc=function(b,a,e,g){return-e/2*(Math.cos(Math.PI*b/g)-1)+a}})(d=f.ya||(f.ya={}));h=function(){function c(){this.o=[]}c.prototype.u=function(b){return new f.be(b,this)};c.prototype.Wd=function(b){this.o.push(b)};c.prototype.Tc=function(b){f.Lc(this.o,b)};c.prototype.m=function(b){for(var a=0,
e=this.o;a<e.length;a++)e[a].m(b)};return c}();f.Xc=h})(k||(k={}));
(function(f){var h=function(d){function c(){d.apply(this,arguments)}l(c,d);c.prototype.j=function(){var b=this;d.prototype.j.call(this);this.l.ha.style.background="black";this.pa=new k.Ma;this.pa.i.Set(.5,.5);var a=new t.X(0,0,"A GAME BY KAKUS");a.h.Set(.5,.5);var e=new t.X(0,a.a.y+10,"MADE FOR JS13K WITH ");e.h.Set(.5,.5);var g=new t.X(e.a.x/2,e.b.y,"\u2665");g.h.Set(0,.5);g.ib("red");var c=new t.X(0,e.b.y+300,"2015");c.h.Set(.5,.5);this.pa.g(a);this.pa.g(e);this.pa.g(g);this.pa.g(c);this.c.ea=0;
this.o.u(this.c).s({ea:1}).ga().ia(1).ga().s({ea:0}).xa(function(){return b.l.Play("menu")}).j();this.c.g(this.pa);this.ua()};c.prototype.ua=function(){d.prototype.ua.call(this);this.pa.b.Set(this.c.a.x/2,this.c.a.y/3)};return c}(f.zb);f.Vd=h})(m||(m={}));
(function(f){var h=function(d){function c(b,a,e,g,c){void 0===c&&(c={fillStyle:"red"});d.call(this,b,a,e,g);this.ca=c}l(c,d);c.prototype.Ea=function(b){this.ca.jc&&(b.globalCompositeOperation=this.ca.jc);this.ca.fillStyle&&(b.fillStyle=this.ca.fillStyle,b.fillRect(0,0,this.a.x,this.a.y));this.ca.strokeStyle&&(b.strokeStyle=this.ca.strokeStyle,b.strokeRect(0,0,this.a.x,this.a.y))};return c}(k.Pb);f.Ya=h})(t||(t={}));
(function(f){f.tb=function(f,d){if(d<f)throw Error();return f+Math.random()*(d-f)}})(k||(k={}));
(function(f){var h=function(){function c(b,a,e,g){void 0===g&&(g=NaN);this.pc=b;this.sc=a;this.ia=e;this.td=g;this.bb=this.sa=0}c.prototype.m=function(b){this.sa+=b;this.sa>this.ia&&(0===this.bb&&(this.pc.call(this.sc,b),this.bb+=1),this.sa-this.ia>this.td*this.bb&&(this.pc.call(this.sc,b),this.bb+=1))};return c}();f.he=h;var d=function(){function c(){this.$=[]}c.prototype.ia=function(b,a,e){var g=this,c;this.$.push(c=new h(function(){for(var b=[],d=0;d<arguments.length;d++)b[d-0]=arguments[d];f.Zd(g.$,
c);a.apply(e,b)},e,b));return c};c.prototype.Mc=function(b,a,e,g){void 0===g&&(g=0);this.$.push(new h(a,e,g,b))};c.prototype.m=function(b){for(var a=0,e=this.$;a<e.length;a++)e[a].m(b)};c.prototype.Kc=function(){this.$=[]};return c}();f.Vc=d})(k||(k={}));
(function(f){(function(h){var d=k.w,c=k.w.Sa,b=function(a){function b(){a.apply(this,arguments);this.ja=d.u(0,0);this.da=[];this.qa="red";this.v=1}l(b,a);b.prototype.m=function(a){this.pb()?(this.qa=1<this.f.Hb?f.ka.color.cd:f.ka.color.active,this.de(a)):(d.aa(this.ja,c),d.i(c,a),d.la(this.b,c,this.b))};b.prototype.Ea=function(){throw Error("Unimplemented");};b.prototype.pb=function(){return 1<this.da.length};b.prototype.Ka=function(a){if(!(100<this.da.length)){var b=k.yd(this.da),e=2>this.da.length;
if(b){if(d.Ra(a,b,c),a=d.rb(c),20<a){d.Mb(c);d.i(c,20);for(var f=d.aa(c);20<a;)d.la(b,f,c),this.da.push(b=d.aa(c)),a-=20;if(e){e=this.da;b=e[0];e=e[1];d.Ra(e,b,c);a=this.ja;var h;void 0===h&&(h=.01);(0===a.y||0===c.y?a.y===c.y:Math.abs(Math.abs(a.x/a.y)-Math.abs(c.x/c.y))<h)||(h=d.rb(this.ja),d.Ra(e,this.b,this.ja),d.Mb(this.ja),d.aa(this.ja,b),d.i(b,10),d.la(this.b,b,b),d.i(this.ja,h))}}}else this.da.push(d.aa(a))}};b.prototype.de=function(a){var b=d.rb(this.ja);a=b*a;for(var e=0;0<a;)if(d.Ra(this.da[0],
this.b,c),0<(e=d.rb(c))-a){d.Mb(c);d.aa(c,this.ja);d.i(c,a);d.la(this.b,c,this.b);d.i(this.ja,b);break}else if(a-=e,d.la(this.b,c,this.b),this.da.shift(),this.v+=this.f.Hb,1>this.da.length)break};return b}(k.Pb);h.dd=b})(f.Ob||(f.Ob={}))})(n||(n={}));
(function(f){(function(f){var d=function(c){function b(a,b,g,p){c.call(this,a,b,g,p);this.na=new t.Text(0,0);this.na.h.Set(.5,.5);this.na.b.Set(g/2,p/2)}l(b,c);b.prototype.m=function(a){this.Ba+=1*Math.PI*a;c.prototype.m.call(this,a)};b.prototype.Ea=function(a){a.globalCompositeOperation="xor";a.fillStyle=this.qa;a.fillRect(0,0,this.a.x,this.a.y);this.na.Za(this.v.toFixed(0));this.na.Ba=-this.Ba;this.na.ma(a)};return b}(f.dd);f.Nd=d})(f.Ob||(f.Ob={}))})(n||(n={}));
(function(f){var h=k.w,d=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.ma=function(b){var e=b.globalCompositeOperation;b.globalCompositeOperation="xor";a.prototype.ma.call(this,b);b.globalCompositeOperation=e};return b}(t.X),c=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.ma=function(b){var e=b.globalCompositeOperation;b.globalCompositeOperation="destination-over";a.prototype.ma.call(this,b);b.globalCompositeOperation=e};return b}(t.X),b=function(a){function b(g,
e,d){void 0===d&&(d={Qa:3,ta:15});a.call(this,0,0,g,e);this.za=d;this.v=0;this.Hb=1;this.wb=this.za.ta;this.wd=!1;this.o=new k.Xc;this.$=new k.Vc;this.$.Mc(this.za.Qa,this.Jb,this);this.$.ia(this.za.ta,this.bc,this);this.$.Mc(1,this.ee,this,this.za.ta-5.5);this.Ia=new c(g/2,g/3);this.Ia.h.Set(.5,.5);this.Ia.ib(k.Ab(f.ka.color.background,1.4));this.Ia.ba(120)}l(b,a);b.prototype.m=function(a){this.wb-=a;this.o.m(a);this.$.m(a);0<=this.wb&&(this.Ia.Za(this.wb.toFixed(0)),this.ic(a),this.ce())};b.prototype.ic=
function(a){for(var b=this.wa;b;b=b.Z)if(b.f){b.m(a);if(b.pb())for(var c=b.Z;c;c=c.Z)c.pb()&&this.vd(b,c)&&this.Id(b,c);b.b.y<-b.a.y/2?this.Fc(b):b.b.x>this.a.x||0>b.b.x?this.Fc(b):b.b.y>this.a.y&&this.Jd(b)}};b.prototype.ce=function(){for(var b=[],a=this.wa;a;a=a.Z)a.pb()&&b.push(a);var c=4>b.length?1:b.length/2|0;if(0<c-this.Hb)for(var e=0;e<b.length;e++)a=b[e],this.o.u(a.i).s({x:1.5,y:1.5},.2,k.ya.Na).ga().s({x:1,y:1},.2).j();this.Hb=c};b.prototype.ed=function(a){this.$a?(this.$a.Z=a,a.oa=this.$a,
this.$a=a):this.wa=this.$a=a;a.f=this};b.prototype.gb=function(a){a.Z?a.oa?(a.oa.Z=a.Z,a.Z.oa=a.oa):(a.Z.oa=null,this.wa=a.Z):a.oa?(a.oa.Z=null,this.$a=a.oa):this.wa=this.$a=null;a.f=void 0};b.prototype.rd=function(a){for(var b=this.wa;b;b=b.Z)if(b.Gb(a))return b;return null};b.prototype.wc=function(a){if(!(2>a.da.length)){var b=a.da[a.da.length-1],c=h.Sa;h.Ra(b,a.da[a.da.length-2],c);h.i(c,20);h.la(b,c,c);a.Ka(c)}};b.prototype.Ea=function(b){b.strokeStyle=f.ka.color.active;b.setLineDash([3,9]);b.lineWidth=
2;for(var c=this.wa;c;c=c.Z)if(c.pb()){b.beginPath();b.moveTo(c.b.x,c.b.y);for(var e=0,d=c.da;e<d.length;e++){var h=d[e];b.lineTo(h.x,h.y)}b.stroke()}a.prototype.Ea.call(this,b);this.Ia.ma(b)};b.prototype.vd=function(a,b){var c=h.Sa;h.Ra(a.b,b.b,c);return h.rb(c)<(a.a.x+b.a.x)/2};b.prototype.Fc=function(a){var b=Math.min(-a.v,-10);this.v+=b;a.b.y+=a.a.y/2;this.Qb(a.b,b);this.gb(a);this.ub(a);this.Jb()};b.prototype.Jd=function(a){this.v+=a.v;this.Qb(a.b,a.v);this.gb(a);this.ub(a)};b.prototype.Id=function(){for(var a=
this,b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];b.forEach(function(b){a.gb(b);a.o.u(b).s({ea:0},2).xa(function(){return b.Pa()}).j()})};b.prototype.bc=function(){var a=this;this.$.Kc();var b=this.o.u(null);b.j();for(var c=this.wa;c;c=c.Z)if(1<c.v){var e=this.o.u(c.i).s({x:2,y:2},.3,k.ya.Na).ga(c).s({v:c.v/2|0},.5).xa(function(b){var c=Math.round(b.v);a.Qb(b.b,c);a.v+=c}).ga(c.i).s({x:5,y:5},.35).cc(c,function(a){return a.s({ea:0},.35)}).ga(c).xa(function(b){a.ub(b);a.gb(b)});b.ga(e).xa(function(a){return a.j()});
b=e}b.ga().xa(function(){a.Gc&&a.Gc();for(var b=a.wa;b;b=b.Z)if(1>=b.v&&b.f){var c=k.tb(0,.6);a.o.u(b.i).ia(c).ga().s({x:5,y:5},.35).cc(b,function(a){return a.s({ea:0},.25)}).ga(b).xa(function(b){a.ub(b);a.gb(b)}).j()}a.wd=!0})};b.prototype.Jb=function(){var a=new f.Ob.Nd(k.tb(15,this.a.x-15),this.a.y-5,30,30);a.qa=f.ka.color.kc;a.h.Set(.5,.5);a.ea=0;a.i.Set(.1,.1);var b=h.Sa;b.y=0;b.x=k.tb(15,this.a.x-15);h.Ra(a.b,b,b);h.Mb(b);h.i(b,k.tb(-80,-60));h.aa(b,a.ja);this.o.u(a).s({ea:1},.2).j();this.o.u(a.i).s({x:1,
y:1},.2).j();this.ed(a);this.g(a)};b.prototype.Qb=function(a,b){var c=new d(a.x,a.y,(0<b?"+":"")+b);c.h.Set(.5,.5);c.ib(0<b?f.ka.color.active:f.ka.color.kc);this.g(c);var e=0<b?2:1;this.o.u(c.i).s({x:e,y:e},.5,k.ya.Na).ia(.3).ga(c).s({ea:0},.3).xa(function(){c.Pa()}).j();if(0>a.x||a.x>this.a.x){var h=0<a.x?1:-1;this.o.u(c.b).s({x:a.x-h*c.a.x*e},.2).j()}else h=0<a.y?1:-1,this.o.u(c.b).s({y:a.y-h*c.a.y*e},.2).j()};b.prototype.ee=function(){this.Ia.i.Set(2,2);this.o.u(this.Ia.i).ia(.1).ga().s({x:1,y:1},
.4).j()};return b}(k.Ma);f.f=b})(n||(n={}));(function(f){(function(f){f.rc=function(d){return Math.max(Math.min(d,1),0)}})(f.lc||(f.lc={}))})(k||(k={}));
(function(f){var h=function(c){function b(a){void 0===a&&(a={Qa:3,ta:1,Ga:"",Wa:100});c.call(this);this.za=a}l(b,c);b.prototype.j=function(){var a=this;c.prototype.j.call(this);this.Ca=0;this.f=new n.f(this.c.a.x,this.c.a.y,this.za);this.f.Gc=function(){return a.$.ia(1,a.bc,a)};this.c.g(this.f);this.fa=new d(this);this.Wb();this.Xb();this.c.g(this.nc=new t.Ya(0,this.f.a.y,this.f.a.x,30,{fillStyle:"rgba(0, 0, 0, 0.5)"}));this.kb=new t.X(0,0,"TAP TO START");this.kb.h.Set(.5,.5);this.c.g(this.kb);this.na=
new t.X(0,0);this.na.h.Set(.5,.5);this.na.ba(15);this.c.g(this.na);this.hb=new t.X(0,0,"RESTART");this.hb.ba(10);this.hb.h.Set(1,.5);this.c.g(this.hb);this.eb=new t.X(0,0,"MENU");this.eb.ba(10);this.eb.h.Set(0,.5);this.c.g(this.eb);this.Eb=new t.X(0,0);this.Eb.ba(10);this.c.g(this.Eb);this.fa.Ja(this.hb,function(){return a.l.Play("game")}).Ja(this.eb,function(){return a.l.Play("select")});this.ua()};b.prototype.m=function(a){c.prototype.m.call(this,a);this.cb.m(a);this.fa.m();this.f.m(a*this.Ca);
this.Eb.Za(this.cb.xc().toFixed(1));this.na.Za(this.f.v.toString())};b.prototype.ma=function(a){a.clearRect(0,0,a.canvas.width,a.canvas.height);this.c.ma(a)};b.prototype.bc=function(){var a=this;this.za.Ga&&this.f.v>n.yb.yc(this.za.Ga)&&n.yb.Ud(this.za.Ga,this.f.v);var b=new k.Ma(this.c.a.x/2,150);this.f.Ia.qb=!1;var c=k.lc.rc(this.f.v/this.za.Wa),d=new f.zd(0,0);d.h.Set(.5,.5);d.Wc(this.o,c);c=new t.Text(0,100,"RESTART");c.ba(20);c.h.Set(.5,.5);c.ib(n.ka.color.background);var h=new t.Ya(c.b.x,c.b.y,
c.a.x+20,c.a.y+10,{fillStyle:"white"});h.h.Set(.5,.5);var u=new t.X(0,160,"LEVEL SELECT");u.h.Set(.5,.5);b.g(d);b.g(h);b.g(c);b.g(u);this.c.g(b);this.eb.Pa();this.hb.Pa();this.o.u(this.na.b).s({y:100},1,k.ya.Na).cc(this.na.i,function(a){return a.s({x:2,y:2})}).j();this.fa=(new k.ob).Ja(c,function(){return a.l.Play("game")}).Ja(u,function(){return a.l.Play("select")})};b.prototype.ua=function(){c.prototype.ua.call(this);this.f.a.y=this.c.a.y-this.nc.a.y;this.nc.b.Set(0,this.f.a.y);this.kb.b.Set(this.f.a.x/
2,this.f.a.y/2);this.na.b.Set(this.f.a.x/2,this.f.a.y+13.5);this.hb.b.Set(this.f.a.x-10,this.f.a.y+13.5);this.eb.b.Set(10,this.f.a.y+13.5);this.Eb.b.Set(10.5,10.5)};return b}(f.zb);f.Jc=h;var d=function(c){function b(a){c.call(this);this.Ha=a;this.nb=new k.ab}l(b,c);b.prototype.Xa=function(a){k.w.aa(a,this.nb);var b=this.Ha.f.rd(this.nb);b&&(b.da=[],this.va=b);c.prototype.Xa.call(this,a)};b.prototype.fb=function(a){this.Ha.kb.Oa&&(this.Ha.Ca=1,this.Ha.kb.Pa());this.va&&(this.Ha.f.wc(this.va),this.va=
void 0);c.prototype.fb.call(this,a)};b.prototype.sb=function(a){k.w.aa(a,this.nb);!this.va&&this.Ha.f.Gb(a)&&this.Xa(a);this.va&&!this.Ha.f.Gb(this.nb)&&(this.Ha.f.wc(this.va),this.va=void 0)};b.prototype.m=function(){this.va&&(this.va.Oa?this.va.Ka(this.Ha.f.hc(this.nb)):this.va=void 0)};return b}(k.ob)})(m||(m={}));
(function(f){var h=function(b){function a(){b.apply(this,arguments);this.Bd=[{Ga:"World1.Level1",Qa:6,ta:5,Wa:15},{Ga:"World1.Level2",Qa:3,ta:15,Wa:200},{Ga:"World1.Level3",Qa:3,ta:30,Wa:650},{Ga:"World1.Level4",Qa:3,ta:60,Wa:2100}]}l(a,b);a.prototype.j=function(){var a=this;b.prototype.j.call(this);this.l.ha.style.background=n.ka.color.background;this.fa=new k.ob;this.Wb();this.Xb();var d=new t.X(this.c.a.x/2,10,"CHALLENGE");d.h.Set(.5,0);d.ba(10);this.c.g(d);d=new t.X(this.c.a.x/2,30,"PRECISION");
d.h.Set(.5,0);this.c.g(d);var h=[];this.Bd.forEach(function(b,d){var g=new c(d,b);g.b.Set(d&1?a.c.a.x+g.a.x:-g.a.x,120+70*d);g.h.Set(.5,.5);a.c.g(g);var r=a.o.u(g.b).s({x:a.c.a.x/2},1,k.ya.Na).xa(function(){return g.Xd(a.o)}).j();h.push([g,r]);a.fa.Ja(g,function(){a.o.u(g.i).s({x:1.1,y:1.1},1,k.ya.Na).xa(function(){a.l.lb("game",new f.Jc(b));a.l.Play("game")}).j();for(var c=0;c<h.length;c++){var d=h[c],r=d[1];d[0]!==g&&r.Rd().j()}})});d=new t.X(40,30,"MENU");d.h.Set(.5,.5);d.ba(10);var r=new t.Ya(d.b.x,
d.b.y,50,30,{strokeStyle:"white"});r.h.Set(.5,.5);r.qb=!1;this.c.g(r);this.fa.Ja(r,function(){return a.l.Play("menu")});this.c.g(d);this.ua()};return a}(f.zb);f.Ad=h;var d=function(b){function a(a,c){b.call(this,a,c,200,20);var d=new t.X(5,5,"BAD");d.ba(10);this.g(d);d=new t.X(195,5,"AWESOME");d.ba(10);d.h.Set(1,0);this.g(d);d=new t.Ya(.5,.5,200,20,{strokeStyle:"white"});this.g(d);d=new t.Ya(1.5,1.5,198,18,{fillStyle:"white",jc:"xor"});d.i.Set(0,1);this.g(this.vc=d)}l(a,b);a.prototype.Wc=function(a,
b){var c=this,d=a.u(this.vc.i).s({x:b},1,k.ya.Na).j();1===b&&d.xa(function(){return c.vc.ca.fillStyle=n.ka.color.cd})};return a}(k.Ma);f.zd=d;var c=function(b){function a(a,c){b.call(this,0,0,250,40);this.ld=c;var f=new t.X(0,0,a.toString());f.ba(40);f.ib(n.ka.color.kc);this.g(f);this.v=n.yb.yc(c.Ga);f=new t.X(50,0,"HI-SCORE: "+this.v);f.ba(10);this.g(f);f=new t.X(251,0,"TIME: "+c.ta);f.ba(10);f.h.Set(1,0);this.g(f);this.Oc=new d(50,20);this.g(this.Oc);f=new t.Ya(125,20,270,60,{fillStyle:"rgba(0, 0, 0, 0.5)",
jc:"destination-over"});f.h.Set(.5,.5);this.g(f)}l(a,b);a.prototype.Xd=function(a){var b=k.lc.rc(this.v/this.ld.Wa);this.Oc.Wc(a,b)};return a}(k.Ma)})(m||(m={}));
(function(f){var h=function(){function d(){}d.prototype.Ic=function(c){c&&localStorage.setItem("UserPassedTutorial",c.toString());return!!localStorage.getItem("UserPassedTutorial")};d.prototype.yc=function(c){return parseInt(localStorage.getItem("HiScore."+c),10)||0};d.prototype.Ud=function(c,b){localStorage.setItem("HiScore."+c,b.toString())};return d}();f.yb=new h})(n||(n={}));
(function(f){var h=k.w,d=function(b){function a(){b.apply(this,arguments);this.Kb=0}l(a,b);a.prototype.j=function(){var a=this;b.prototype.j.call(this);this.Zc=[];this.$c=12;this.Rb=new t.X(10,10);this.Rb.ba(10);this.pa=new t.Text(0,0,"SHAPES \u2665 NUMBERS");this.pa.Cache();this.pa.h.Set(.5,.5);this.Gd();this.Fd();this.xb=new t.Text(0,0,"0.6B");this.xb.ba(10);this.xb.h.Set(1,1);this.xb.Cache();this.o.u(this.Ib).s({Ba:Math.PI/12},2,k.ya.Qc).ga().s({Ba:-Math.PI/12},2,k.ya.Qc).ga().Dd().j();this.c.ea=
0;this.o.u(this.c).s({ea:1}).j();this.fa=new k.ob;this.Wb();this.Xb();this.fa.Ja(this.Ib,function(){return a.l.Play(n.yb.Ic()?"select":"tutorial")}).Ja(this.ae,function(){return a.l.Play("tutorial")});this.ua();this.Ed();this.c.g(this.Rb,this.pa,this.Ib,this.$b,this.xb)};a.prototype.m=function(a){this.Kb+=a;this.cb.m(a);this.Rb.Za(this.cb.xc().toFixed(1));1>this.Kb&&(this.l.ha.style.background=k.Ab(n.ka.color.background,this.Kb));for(var c=0,d=this.Zc;c<d.length;c++)d[c].m(a*this.$c);b.prototype.m.call(this,
a)};a.prototype.ua=function(){b.prototype.ua.call(this);var a=this.c.a.x/2,c=this.c.a.y/2,d=this.c.a.y/this.Cb.y;this.pa.b.Set(a,c-100*d);this.Ib.b.Set(a,c-10*d);this.$b.b.Set(a,c+70*d);this.xb.b.Set(this.c.a.x-10,this.c.a.y-10)};a.prototype.Ed=function(){for(var a=2;1<=a;--a){var b=1/(a/2+1),d=new c(this.c.a.x,this.c.a.y,{Qa:.5,ta:1E9});d.b.Set(this.c.a.x/2,this.c.a.y/2);d.i.Set(b,(a&1?-1:1)*b);d.h.Set(.5,.5);d.ea=b;h.i(d.a,1/b);d.Ia.qb=!1;this.c.g(d);this.Zc.push(d)}this.o.u(this).s({$c:1},2,k.ya.Na).j()};
a.prototype.Gd=function(){var a=new k.Ma(0,100);a.h.Set(.5,.5);a.i.Set(2,2);var b=new t.Text(5,5,"PLAY"),c=new t.Ya(0,0,b.a.x+10,b.a.y+10,{strokeStyle:"white",fillStyle:"rgba(0, 0, 0, 0.2)"});a.g(c,b);h.aa(c.a,a.a);a.Cache();this.Ib=a};a.prototype.Fd=function(){var a=new t.Text(0,0,"TUTORIAL");a.Cache();a.h.Set(.5,.5);this.ae=a;var b=new t.Text(0,60,"VOTE");b.Cache();b.h.Set(.5,.5);this.$b=new k.Ma;this.$b.g(a,b)};return a}(f.zb);f.Hd=d;var c=function(b){function a(){b.apply(this,arguments);this.Pc=
1}l(a,b);a.prototype.m=function(a){this.o.m(a);this.$.m(a);this.ic(a)};a.prototype.ic=function(a){for(var b=h.Sa,c=this.wa;c;c=c.Z)if(h.aa(c.ja,b),h.i(b,a),h.la(c.b,b,c.b),c.Ba+=Math.PI*a,0>c.b.y||c.b.y>this.a.y||0>c.b.x||c.b.x>this.a.x)this.gb(c),c.Pa()};a.prototype.Jb=function(){b.prototype.Jb.call(this);var a=this.$a;a.qa=k.Ab(a.qa,this.Pc);this.Ac?a.Da=this.Ac:(a.Cache(),this.Ac=a.Da);.5<Math.random()||(a.qa=k.Ab(n.ka.color.active,this.Pc),this.mc?a.Da=this.mc:(a.Cache(),this.mc=a.Da))};return a}(n.f)})(m||
(m={}));
(function(f){var h=k.w,d=function(c){function b(){c.call(this,{Qa:15,ta:15,Ga:"",Wa:10});this.Sc="SEE THIS RED SQUARE?;THIS IS ITS TRAJECTORY;YOUR GOAL IS TO;REVERSE ITS TRAJECTORY;LIKE THAT;SO IT WILL HIT THE BOTTOM;THEN YOU WILL EARN POINTS;BUT YOU HAVE TO DO THIS;BEFORE TIME RUNS OUT;GOT IT?;".split(";")}l(b,c);b.prototype.j=function(){var a=this;c.prototype.j.call(this);var b=this.c.a.x/2;this.Ca=1;var d=new t.X(b,100);d.ba(15);d.h.Set(.5,.5);this.Yd=d;this.mb=0;var f=new t.X(b,130,"TAP TO CONTINIUE");f.h.Set(.5,
.5);f.ba(10);f.ea=.7;this.gc=f;this.kb.Pa();this.fa=new k.ob;this.$.ia(1.5,function(){a.Ca=0;d.Za(a.Sc[a.mb++]);a.c.g(f);a.c.g(d);a.fa.Ja(a.c,a.uc.bind(a))})};b.prototype.uc=function(){var a=this;this.Yd.Za(this.Sc[this.mb]);switch(this.mb){case 1:this.fd(this.f.wa);break;case 2:case 3:break;case 4:this.Sd(this.f.wa);break;case 5:this.Ca=1;if(1>this.f.v){this.gc.Oa&&this.gc.Pa();this.$.ia(.1,function(){return a.uc()});return}this.Ca=0;this.c.g(this.gc);this.$.Kc();break;case 6:this.Ca=1;this.$.ia(1.5,
function(){return a.Ca=0});break;case 7:break;case 8:this.Ca=1,this.f.m(this.f.wb-5.5),this.$.ia(5.3,function(){return a.Ca=0});case 9:break;case 10:this.l.Play("select");n.yb.Ic(!0);return;default:throw Error();}this.mb+=1};b.prototype.fd=function(a){var b=h.Sa;h.aa(a.ja,b);h.i(b,10);h.la(b,a.b,b);a.Ka(a.b);a.Ka(b)};b.prototype.Sd=function(a){var b=h.Sa;a.da=[];h.aa(a.ja,b);h.la(b,a.b,b);a.Ka(a.b);a.Ka(b);b.Set(this.f.a.x/2+k.tb(-30,30),this.f.a.y/2+50);a.Ka(b);b.Set(this.f.a.x/2,this.f.a.y+50);
a.Ka(b)};return b}(f.Jc);f.$d=d})(m||(m={}));var v=new k.l("canvas");v.lb("splash",new m.Vd);v.lb("menu",new m.Hd);v.lb("select",new m.Ad);v.lb("tutorial",new m.$d);v.Play("splash");v.j();
