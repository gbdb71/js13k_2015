var k;
(function(f){var h=function(){function d(c){this.Ic={};this.uc=this.Lc=0;this.ib=[];this.ha=document.getElementById(c);this.bd=this.ha.getContext("2d");this.Fc=window.requestAnimationFrame.bind(window,this.zd.bind(this))}d.prototype.lb=function(c,a){this.Ic[c]=a};d.prototype.Play=function(c){this.Ua&&this.$c();if(this.Ua=this.Ic[c])this.Ua.l=this,this.Ua.j();else throw Error();};d.prototype.j=function(){this.Fc()};d.prototype.Va=function(c,a,b){this.ib.push({element:c,type:a,listener:b});c.addEventListener(a,b)};
d.prototype.Dd=function(c,a,b){for(var e=0,g=this.ib;e<g.length;e++){var p=g[e];if(p.element===c&&p.type===a&&p.listener===b){f.Dc(this.ib,p);c.removeEventListener(a,b);return}}throw Error("Couldn't find event listener.");};d.prototype.$c=function(){for(var c=this.ib.length-1;0<=c;--c){var a=this.ib[c];this.Dd(a.element,a.type,a.listener)}this.ib=[];this.Ua.dd&&this.Ua.dd()};d.prototype.zd=function(c){var a=c-this.uc;50<a&&(a=50);this.Lc=a/1E3;this.Ua.m(this.Lc);this.Ua.na(this.bd);this.uc=c;this.Fc()};
return d}();f.l=h})(k||(k={}));(function(f){var h=function(){function d(c,a){void 0===c&&(c=0);void 0===a&&(a=0);this.x=c;this.y=a}d.prototype.Set=function(c,a){this.x=c;this.y=a};d.prototype.aa=function(){return new d(this.x,this.y)};return d}();f.$a=h})(k||(k={}));
(function(f){(function(h){function d(b,e){void 0===b&&(b=0);void 0===e&&(e=0);return new f.$a(b,e)}function c(b,e){if(e)e.x=b.x,e.y=b.y;else return d(b.x,b.y)}function a(b){return Math.sqrt(b.x*b.x+b.y*b.y)}h.Xd=new f.$a;h.Ta=new f.$a;h.v=d;h.aa=c;h.od=function(b){return 0===b.x&&0===b.y};h.ma=function(b,e,g){g.x=b.x+e.x;g.y=b.y+e.y};h.Sa=function(b,e,g){g.x=b.x-e.x;g.y=b.y-e.y};h.vc=function(b,e,g){g.x=b.x*e.x;g.y=b.y*e.y};h.i=function(b,e,g){void 0===g&&(g=b);g.x=b.x*e;g.y=b.y*e};h.rb=a;h.Hb=function(b){var e;
void 0===e&&(e=b);var g=a(b);0<g&&(e.x=b.x/g,e.y=b.y/g)};h.Id=function(b,e,g){void 0===g&&(g=b);var a=Math.sin(e);e=Math.cos(e);b===g&&(b=c(b));g.x=b.x*e-b.y*a;g.y=b.x*a+b.y*e};h.Ud=function(b){return Math.atan2(b.y,b.x)};h.ld=function(b,e){e.x=0<b.x?1/b.x:0;e.y=0<b.y?1/b.y:0};h.Vd=function(b,e){return b.x*e.x+b.y*e.y}})(f.X||(f.X={}))})(k||(k={}));
var l=this&&this.Yd||function(f,h){function d(){this.constructor=f}for(var c in h)h.hasOwnProperty(c)&&(f[c]=h[c]);d.prototype=h.prototype;f.prototype=new d};
(function(f){var h=function(){function d(c,a,b,e){this.b=f.X.v(c,a);this.a=f.X.v(b,e);this.h=f.X.v(0,0);this.i=f.X.v(1,1);this.Aa=0;this.ea=1;this.qb=!0}d.prototype.na=function(c){this.qb&&(c.save(),c.globalAlpha*=this.ea,c.translate(this.b.x,this.b.y),c.scale(this.i.x,this.i.y),c.rotate(this.Aa),f.X.od(this.h)||c.translate(-this.h.x*this.a.x,-this.h.y*this.a.y),this.Da?this.ed(c):this.Fa(c),c.restore())};d.prototype.Fa=function(){throw Error("Unimplemented");};d.prototype.ed=function(c){c.drawImage(this.Da,
0,0)};d.prototype.ac=function(c,a){var b,e=f.X.Ta;a?(f.X.aa(c,a),b=a):b=f.X.aa(c);this.Oa&&this.Oa.ac(c,b);f.X.Sa(b,this.b,b);f.X.aa(this.i,e);f.X.ld(e,e);f.X.vc(b,e,b);f.X.Id(b,-this.Aa,b);f.X.aa(this.h,e);f.X.vc(e,this.a,e);f.X.ma(b,e,b);if(!a)return b};d.prototype.Cb=function(c){c=this.ac(c);var a=0<c.y&&c.y<this.a.y;return 0<c.x&&c.x<this.a.x&&a};d.prototype.Pa=function(){this.Oa.ub(this)};d.prototype.Cache=function(){this.Da=document.createElement("canvas");this.Da.width=this.a.x;this.Da.height=
this.a.y;this.Fa(this.Da.getContext("2d"))};return d}();f.Lb=h;h=function(d){function c(a,b,e,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===e&&(e=0);void 0===g&&(g=0);d.call(this,a,b,e,g);this.yb=[]}l(c,d);c.prototype.f=function(a){if(a.Oa)throw Error("Child has parent");a.Oa=this;this.yb.push(a)};c.prototype.ub=function(a){var b=this.yb.indexOf(a);if(0<=b)a.Oa=void 0,this.yb.splice(b,1);else throw Error("Child doesn't exist in this layer");};c.prototype.Fa=function(a){for(var b=0,e=this.yb;b<e.length;b++)e[b].na(a)};
return c}(h);f.Ma=h})(k||(k={}));
(function(f){function h(b,e,g){var a=g.pageX,c=g.pageY,d=g.target.getBoundingClientRect(),a=new f.$a(a-d.left,c-d.top);b.call(e,a,g)}function d(b,e,g){var a=0,d=0;if("touchend"!==g.type){var a=g.targetTouches[0].pageX,d=g.targetTouches[0].pageY,f=g.target.getBoundingClientRect();c.Set(a-f.left,d-f.top)}b.call(e,c.aa(),g);g.preventDefault()}var c=new f.$a;f.Ub=function(b,a){return h.bind(null,b,a)};f.Vb=function(b,a){return d.bind(null,b,a)};var a=function(){function b(){this.xc=[];this.Ac=[]}b.prototype.Ca=
function(b,g){var a=0;this.xc.push({object:b,action:function(){return a=Date.now()}});this.Ac.push({object:b,action:function(){450>Date.now()-a&&g()}});return this};b.prototype.Ya=function(b){this.sc(this.xc,b)};b.prototype.sb=function(){};b.prototype.cb=function(b){this.sc(this.Ac,b)};b.prototype.sc=function(b,g){for(var a=0;a<b.length;a++){var c=b[a],d=c.action;c.object.Cb(g)&&d()}};b.prototype.m=function(){};return b}();f.ob=a})(k||(k={}));var m;
(function(f){var h=function(){function d(){this.Kb=new k.$a(320,370)}d.prototype.j=function(){var c=this;this.c=new k.Ma(0,0,320,370);this.o=new k.Oc;this.$=new k.Mc;this.l.Va(window,"resize",function(){return c.ta()})};d.prototype.m=function(c){this.$.m(c);this.o.m(c)};d.prototype.na=function(c){c.clearRect(0,0,c.canvas.width,c.canvas.height);this.c.na(c)};d.prototype.Ya=function(c){this.fa.Ya(c)};d.prototype.sb=function(c){this.fa.sb(c)};d.prototype.cb=function(c){this.fa.cb(c)};d.prototype.ta=
function(){var c=window.innerHeight,a=Math.min(window.innerWidth/this.Kb.x,c/this.Kb.y);this.c.i.Set(a,a);this.c.a.Set(this.Kb.x,c/a);c=Math.floor(this.c.a.x*a);this.l.ha.width!==c&&(this.l.ha.width=c);a=Math.floor(this.c.a.y*a);this.l.ha.height!==a&&(this.l.ha.height=a)};d.prototype.Sb=function(){if(!this.fa)throw Error();this.l.Va(this.l.ha,"mousemove",k.Ub(this.sb,this));this.l.Va(this.l.ha,"mousedown",k.Ub(this.Ya,this));this.l.Va(this.l.ha,"mouseup",k.Ub(this.cb,this))};d.prototype.Tb=function(){if(!this.fa)throw Error();
this.l.Va(this.l.ha,"touchmove",k.Vb(this.sb,this));this.l.Va(this.l.ha,"touchstart",k.Vb(this.Ya,this));this.l.Va(this.l.ha,"touchend",k.Vb(this.cb,this))};return d}();f.xb=h})(m||(m={}));var n,q=n||(n={});(q.la||(q.la={})).color={active:"#88A825",dc:"#911146",Uc:"#ED8C2B",background:"#35203B"};var r;
(function(f){var h=function(){function d(c,a,b){void 0===b&&(b="white");this.Ga=c;this.a=a;this.Ea=b;this.ic={};this.qa=a/c.Wa.Pb;this.La=c.Wa.Ib*this.qa;this.Cache=document.createElement("canvas");this.Cache.width=Object.keys(c.Rb).length*Math.ceil(this.La+this.qa);this.Cache.height=a;console.log("FontCache Size",this.a,"DotPx",this.qa,"Color",this.Ea);this.Ed()}d.prototype.nc=function(c,a,b,e,g,p){void 0===b&&(b=0);void 0===e&&(e=0);void 0===g&&(g=1);void 0===p&&(p=g);c.drawImage(this.Cache,this.ic[a],
0,this.La,this.a,b,e,this.La*g,this.a*p)};d.prototype.Ed=function(){var c=this.Cache.getContext("2d"),a=0;c.fillStyle=this.Ea;for(var b in this.Ga.Rb){this.Fd(c,b);this.ic[b]=a;var e=Math.ceil(this.La+this.qa),a=a+e;c.translate(e,0)}};d.prototype.Fd=function(c,a){for(var b=this.Ga,e=this.qa,g=0;g<b.Wa.Ib;++g)for(var p=0;p<b.Wa.Pb;++p)b.Rb[a][p*b.Wa.Ib+g]&&c.fillRect(g*e,p*e,e,e)};return d}();f.gd=h})(r||(r={}));
(r||(r={})).Bd={Wa:{Ib:3,Pb:5},Rb:{"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],".":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],",":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],":":[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"?":[1,1,0,0,0,1,0,1,1,0,0,0,0,1,0],"\u2665":[1,0,1,1,1,1,1,1,1,0,1,0,0,0,0],0:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],1:[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,0],6:[0,
1,1,1,0,0,1,1,1,1,0,1,1,1,1],7:[1,1,1,0,0,1,0,1,0,0,1,0,0,1,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],9:[1,1,1,1,0,1,1,1,1,0,0,1,1,1,0],A:[0,1,0,1,0,1,1,1,1,1,0,1,1,0,1],B:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,0],C:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],D:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],E:[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],F:[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],G:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],H:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],I:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],J:[1,1,1,0,1,0,0,1,0,0,1,0,1,0,0],K:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,
1],L:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],N:[0,0,1,1,0,1,1,1,1,1,0,1,1,0,0],M:[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],O:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],P:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],Q:[1,1,1,1,0,1,1,0,1,1,1,0,0,0,1],R:[1,1,0,1,0,1,1,1,0,1,0,1,1,0,1],S:[1,1,1,1,0,0,1,1,0,0,0,1,1,1,1],T:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],U:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],W:[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],V:[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],Y:[1,0,1,1,0,1,1,0,1,0,1,0,0,1,0]},Cache:{}};
(function(f){var h=function(d){function c(a,b,e,g){void 0===e&&(e="");void 0===g&&(g={a:20,Ea:"white",Ga:f.Bd});d.call(this,a,b,0,0);this.Text=e;this.ca=g;this.hb(g.Ea);this.ba(g.a)}l(c,d);c.prototype.hb=function(a){this.Bb=this.ca.Ga.Cache[a]?this.ca.Ga.Cache[a]:this.ca.Ga.Cache[a]=new f.gd(this.ca.Ga,20,a)};c.prototype.Qa=function(a){this.Text=a;this.Sc()};c.prototype.ba=function(a){this.ca.a=a;this.qa=a/this.ca.Ga.Wa.Pb;this.La=this.ca.Ga.Wa.Ib*this.qa;this.Sc()};c.prototype.Fa=function(a){for(var b=
this.ca.a/this.Bb.a,e=0;e<this.Text.length;++e){var g=this.Text[e];" "!==g&&this.Bb.nc(a,g,0,0,b);a.translate(this.La+this.qa,0)}};c.prototype.Sc=function(){this.a.x=(this.La+this.qa)*this.Text.length-this.qa;this.a.y=this.ca.a};return c}(k.Lb);f.Text=h;h=function(d){function c(){d.apply(this,arguments)}l(c,d);c.prototype.na=function(a){if(this.qb){var b=this.ca.a/this.Bb.a,e=this.b,g=e.x,e=e.y,g=g-this.a.x*this.h.x*this.i.x,e=e-this.a.y*this.h.y*this.i.y,c=a.globalAlpha;a.globalAlpha*=this.ea;for(var d=
0;d<this.Text.length;++d){var f=this.Text[d];" "!==f&&this.Bb.nc(a,f,g,e,b*this.i.x,b*this.i.y);g+=(this.La+this.qa)*this.i.x}a.globalAlpha=c}};return c}(h);f.u=h})(r||(r={}));
(function(f){f.Dc=function(d,c){var a=d.indexOf(c);if(0<=a)d.splice(a,1);else throw Error();};f.Od=function(d,c){var a=d.indexOf(c);0<=a&&d.splice(a,1)};f.pd=function(d){return d[d.length-1]};f.hc=function(d,c){var a=d.substr(1).match(/.{2}/g).map(function(b){return parseInt(b,16)}),a=a.map(function(b){return Math.min(b*c,255)|0});return"#"+((a[0]<<16)+(a[1]<<8)+a[2]+16777216).toString(16).substr(1)};var h=function(){function d(){this.kc=[]}d.prototype.ma=function(c,a){this.kc.push([c,a]);return this};
d.prototype.Yc=function(){for(var c=0,a=this.kc;c<a.length;c++){var b=a[c];b[0].call(b[1])}};return d}();f.Zc=h})(k||(k={}));
(function(f){var h=function(){function c(a,b){this.vb=a;this.za=b;this.ra=0;this.Gb=[];this.zb=0;this.Wb=new f.Zc;this.Zb=this.Qb=!1}c.prototype.j=function(){var a=this.Ob();a.za&&(a.IsPlaying()&&a.za.Kc(a),a.za.Ld(a));for(;a;)a.Qb=!1,a.ra=0,a=a.Z;return this};c.prototype.s=function(a,b,e){void 0===b&&(b=1);void 0===e&&(e=d.td);this.Gb=[];for(var g in a)this.Gb.push({key:g,start:0,Tc:0,end:a[g]});this.zb=b;this.fd=e;return this};c.prototype.wa=function(a){this.wc=a;return this};c.prototype.ga=function(a){void 0===
a&&(a=this.vb);this.Z=a=new c(a,this.za);a.pa=this;return a};c.prototype.Yb=function(a,b){this.Wb.ma(function(){if(this.za)b(this.za.v(a).j());else throw Error();},this);return this};c.prototype.ia=function(a){return this.ga().s({},a)};c.prototype.Gd=function(){for(var a=this;a;a=a.pa)a.Zb=!a.Zb;return this};c.prototype.ud=function(){var a=this;this.Wb.ma(function(){setTimeout(a.j.bind(a),0)});return this};c.prototype.m=function(a){for(var b=this;b;)if(0===b.ra&&b.jd(),b.ra+=a,b.ra<=b.zb){b.Pc(b.ra);
break}else b.Qb||(b.Pc(b.zb),b.wc&&b.wc(b.vb),b.za&&!b.Z&&b.za.Kc(b.Ob()),b.Qb=!0),b=b.Z};c.prototype.Ob=function(){for(var a=this;a.pa;)a=a.pa;return a};c.prototype.IsPlaying=function(){if(this.za)return 0<=this.za.o.indexOf(this.Ob());throw Error();};c.prototype.Pc=function(a){for(var b=0,e=this.Gb;b<e.length;b++){var g=e[b];this.vb[g.key]=this.fd(a,g.start,g.Tc,this.zb)}};c.prototype.jd=function(){for(var a=0,b=this.Gb;a<b.length;a++){var e=b[a];if(this.Zb){var g=e.start||this.vb[e.key];e.start=
e.end;e.end=g}else e.start=this.vb[e.key];e.Tc=e.end-e.start}this.Wb.Yc()};return c}();f.Qd=h;var d;(function(c){c.td=function(a,b,e,g){return e*a/g+b};c.Na=function(a,b,e,g){a/=g;a--;return e*(a*a*a+1)+b};c.Hc=function(a,b,e,g){return-e/2*(Math.cos(Math.PI*a/g)-1)+b}})(d=f.xa||(f.xa={}));h=function(){function c(){this.o=[]}c.prototype.v=function(a){return new f.Qd(a,this)};c.prototype.Ld=function(a){this.o.push(a)};c.prototype.Kc=function(a){f.Dc(this.o,a)};c.prototype.m=function(a){for(var b=0,
e=this.o;b<e.length;b++)e[b].m(a)};return c}();f.Oc=h})(k||(k={}));
(function(f){var h=function(d){function c(){d.apply(this,arguments)}l(c,d);c.prototype.j=function(){var a=this;d.prototype.j.call(this);this.l.ha.style.background="black";this.ja=new k.Ma;this.ja.i.Set(.5,.5);var b=new r.u(0,0,"A GAME BY KAKUS");b.h.Set(.5,.5);var e=new r.u(0,b.a.y+10,"MADE FOR JS13K WITH ");e.h.Set(.5,.5);var g=new r.u(e.a.x/2,e.b.y,"\u2665");g.h.Set(0,.5);g.hb("red");var c=new r.u(0,e.b.y+300,"2015");c.h.Set(.5,.5);this.ja.f(b);this.ja.f(e);this.ja.f(g);this.ja.f(c);this.c.ea=0;
this.o.v(this.c).s({ea:1}).ga().ia(1).ga().s({ea:0}).wa(function(){return a.l.Play("menu")}).j();this.c.f(this.ja);this.ta()};c.prototype.ta=function(){d.prototype.ta.call(this);this.ja.b.Set(this.c.a.x/2,this.c.a.y/3)};return c}(f.xb);f.Kd=h})(m||(m={}));
(function(f){var h=function(d){function c(a,b,e,g,c){void 0===c&&(c={fillStyle:"red"});d.call(this,a,b,e,g);this.ca=c}l(c,d);c.prototype.Fa=function(a){this.ca.cc&&(a.globalCompositeOperation=this.ca.cc);this.ca.fillStyle&&(a.fillStyle=this.ca.fillStyle,a.fillRect(0,0,this.a.x,this.a.y));this.ca.strokeStyle&&(a.strokeStyle=this.ca.strokeStyle,a.strokeRect(0,0,this.a.x,this.a.y))};return c}(k.Lb);f.eb=h})(r||(r={}));
(function(f){f.tb=function(f,d){if(d<f)throw Error();return f+Math.random()*(d-f)}})(k||(k={}));
(function(f){var h=function(){function c(a,b,e,g){void 0===g&&(g=NaN);this.jc=a;this.mc=b;this.ia=e;this.kd=g;this.ab=this.ra=0}c.prototype.m=function(a){this.ra+=a;this.ra>this.ia&&(0===this.ab&&(this.jc.call(this.mc,a),this.ab+=1),this.ra-this.ia>this.kd*this.ab&&(this.jc.call(this.mc,a),this.ab+=1))};return c}();f.Wd=h;var d=function(){function c(){this.$=[]}c.prototype.ia=function(a,b,e){var g=this,c;this.$.push(c=new h(function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];f.Od(g.$,
c);b.apply(e,a)},e,a));return c};c.prototype.Ec=function(a,b,e,g){void 0===g&&(g=0);this.$.push(new h(b,e,g,a))};c.prototype.m=function(a){for(var b=0,e=this.$;b<e.length;b++)e[b].m(a)};c.prototype.Cc=function(){this.$=[]};return c}();f.Mc=d})(k||(k={}));
(function(f){(function(h){var d=k.X,c=k.X.Ta,a=function(b){function a(){b.apply(this,arguments);this.ka=d.v(0,0);this.da=[];this.Ea="red";this.w=1}l(a,b);a.prototype.m=function(b){this.pb()?(this.Ea=1<this.g.Db?f.la.color.Uc:f.la.color.active,this.Sd(b)):(d.aa(this.ka,c),d.i(c,b),d.ma(this.b,c,this.b))};a.prototype.Fa=function(){throw Error("Unimplemented");};a.prototype.pb=function(){return 1<this.da.length};a.prototype.Ka=function(b){var a=k.pd(this.da),e=2>this.da.length;if(a){if(d.Sa(b,a,c),b=
d.rb(c),20<b){d.Hb(c);d.i(c,20);for(var f=d.aa(c);20<b;)d.ma(a,f,c),this.da.push(a=d.aa(c)),b-=20;if(e){e=this.da;a=e[0];e=e[1];d.Sa(e,a,c);b=this.ka;var h;void 0===h&&(h=.01);(0===b.y||0===c.y?b.y===c.y:Math.abs(Math.abs(b.x/b.y)-Math.abs(c.x/c.y))<h)||(h=d.rb(this.ka),d.Sa(e,this.b,this.ka),d.Hb(this.ka),d.aa(this.ka,a),d.i(a,10),d.ma(this.b,a,a),d.i(this.ka,h))}}}else this.da.push(d.aa(b))};a.prototype.Sd=function(b){var a=d.rb(this.ka);b=a*b;for(var e=0;0<b;)if(d.Sa(this.da[0],this.b,c),0<(e=
d.rb(c))-b){d.Hb(c);d.aa(c,this.ka);d.i(c,b);d.ma(this.b,c,this.b);d.i(this.ka,a);break}else if(b-=e,d.ma(this.b,c,this.b),this.da.shift(),this.w+=this.g.Db,1>this.da.length)break};return a}(k.Lb);h.Vc=a})(f.Jb||(f.Jb={}))})(n||(n={}));
(function(f){(function(f){var d=function(c){function a(b,a,g,p){c.call(this,b,a,g,p);this.oa=new r.Text(0,0);this.oa.h.Set(.5,.5);this.oa.b.Set(g/2,p/2)}l(a,c);a.prototype.m=function(b){this.Aa+=1*Math.PI*b;c.prototype.m.call(this,b)};a.prototype.Fa=function(b){b.globalCompositeOperation="xor";b.fillStyle=this.Ea;b.fillRect(0,0,this.a.x,this.a.y);this.oa.Qa(this.w.toFixed(0));this.oa.Aa=-this.Aa;this.oa.na(b)};return a}(f.Vc);f.Cd=d})(f.Jb||(f.Jb={}))})(n||(n={}));
(function(f){var h=k.X,d=function(b){function a(){b.apply(this,arguments)}l(a,b);a.prototype.na=function(a){var e=a.globalCompositeOperation;a.globalCompositeOperation="xor";b.prototype.na.call(this,a);a.globalCompositeOperation=e};return a}(r.u),c=function(b){function a(){b.apply(this,arguments)}l(a,b);a.prototype.na=function(a){var e=a.globalCompositeOperation;a.globalCompositeOperation="destination-over";b.prototype.na.call(this,a);a.globalCompositeOperation=e};return a}(r.u),a=function(b){function a(g,
e,d){void 0===d&&(d={Ra:3,sa:15});b.call(this,0,0,g,e);this.ya=d;this.w=0;this.Db=1;this.wb=this.ya.sa;this.nd=!1;this.o=new k.Oc;this.$=new k.Mc;this.$.Ec(this.ya.Ra,this.Eb,this);this.$.ia(this.ya.sa,this.Xb,this);this.$.Ec(1,this.Td,this,this.ya.sa-5.5);this.Ja=new c(g/2,g/3);this.Ja.h.Set(.5,.5);this.Ja.hb(k.hc(f.la.color.background,1.4));this.Ja.ba(120)}l(a,b);a.prototype.m=function(b){this.wb-=b;this.o.m(b);this.$.m(b);0<=this.wb&&(this.Ja.Qa(this.wb.toFixed(0)),this.bc(b),this.Rd())};a.prototype.bc=
function(b){for(var a=this.va;a;a=a.Z)if(a.g){a.m(b);if(a.pb())for(var c=a.Z;c;c=c.Z)c.pb()&&this.md(a,c)&&this.xd(a,c);a.b.y<-a.a.y/2?this.yc(a):a.b.x>this.a.x||0>a.b.x?this.yc(a):a.b.y>this.a.y&&this.yd(a)}};a.prototype.Rd=function(){for(var a=[],b=this.va;b;b=b.Z)b.pb()&&a.push(b);var c=4>a.length?1:a.length/2|0;if(0<c-this.Db)for(var e=0;e<a.length;e++)b=a[e],this.o.v(b.i).s({x:1.5,y:1.5},.2,k.xa.Na).ga().s({x:1,y:1},.2).j();this.Db=c};a.prototype.Wc=function(a){this.Za?(this.Za.Z=a,a.pa=this.Za,
this.Za=a):this.va=this.Za=a;a.g=this};a.prototype.fb=function(a){a.Z?a.pa?(a.pa.Z=a.Z,a.Z.pa=a.pa):(a.Z.pa=null,this.va=a.Z):a.pa?(a.pa.Z=null,this.Za=a.pa):this.va=this.Za=null;a.g=void 0};a.prototype.hd=function(a){for(var b=this.va;b;b=b.Z)if(b.Cb(a))return b;return null};a.prototype.qc=function(a){if(!(2>a.da.length)){var b=a.da[a.da.length-1],c=h.Ta;h.Sa(b,a.da[a.da.length-2],c);h.i(c,20);h.ma(b,c,c);a.Ka(c)}};a.prototype.Fa=function(a){a.strokeStyle=f.la.color.active;a.setLineDash([3,9]);a.lineWidth=
2;for(var c=this.va;c;c=c.Z)if(c.pb()){a.beginPath();a.moveTo(c.b.x,c.b.y);for(var e=0,d=c.da;e<d.length;e++){var h=d[e];a.lineTo(h.x,h.y)}a.stroke()}b.prototype.Fa.call(this,a);this.Ja.na(a)};a.prototype.md=function(a,b){var c=h.Ta;h.Sa(a.b,b.b,c);return h.rb(c)<(a.a.x+b.a.x)/2};a.prototype.yc=function(a){var b=Math.min(-a.w,-10);this.w+=b;a.b.y+=a.a.y/2;this.Mb(a.b,b);this.fb(a);this.ub(a);this.Eb()};a.prototype.yd=function(a){this.w+=a.w;this.Mb(a.b,a.w);this.fb(a);this.ub(a)};a.prototype.xd=function(){for(var a=
this,b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];b.forEach(function(b){a.fb(b);a.o.v(b).s({ea:0},2).wa(function(){return b.Pa()}).j()})};a.prototype.Xb=function(){var a=this;this.$.Cc();var b=this.o.v(null);b.j();for(var c=this.va;c;c=c.Z)if(1<c.w){var e=this.o.v(c.i).s({x:2,y:2},.3,k.xa.Na).ga(c).s({w:c.w/2|0},.5).wa(function(b){var c=Math.round(b.w);a.Mb(b.b,c);a.w+=c}).ga(c.i).s({x:5,y:5},.35).Yb(c,function(a){return a.s({ea:0},.35)}).ga(c).wa(function(b){a.ub(b);a.fb(b)});b.ga(e).wa(function(a){return a.j()});
b=e}b.ga().wa(function(){a.zc&&a.zc();for(var b=a.va;b;b=b.Z)if(1>=b.w&&b.g){var c=k.tb(0,.6);a.o.v(b.i).ia(c).ga().s({x:5,y:5},.35).Yb(b,function(a){return a.s({ea:0},.25)}).ga(b).wa(function(b){a.ub(b);a.fb(b)}).j()}a.nd=!0})};a.prototype.Eb=function(){var a=new f.Jb.Cd(k.tb(15,this.a.x-15),this.a.y-5,30,30);a.Ea=f.la.color.dc;a.h.Set(.5,.5);a.ea=0;a.i.Set(.1,.1);var b=h.Ta;b.y=0;b.x=k.tb(15,this.a.x-15);h.Sa(a.b,b,b);h.Hb(b);h.i(b,k.tb(-80,-60));h.aa(b,a.ka);this.o.v(a).s({ea:1},.2).j();this.o.v(a.i).s({x:1,
y:1},.2).j();this.Wc(a);this.f(a)};a.prototype.Mb=function(a,b){var c=new d(a.x,a.y,(0<b?"+":"")+b);c.h.Set(.5,.5);c.hb(0<b?f.la.color.active:f.la.color.dc);this.f(c);var e=0<b?2:1;this.o.v(c.i).s({x:e,y:e},.5,k.xa.Na).ia(.3).ga(c).s({ea:0},.3).wa(function(){c.Pa()}).j();if(0>a.x||a.x>this.a.x){var h=0<a.x?1:-1;this.o.v(c.b).s({x:a.x-h*c.a.x*e},.2).j()}else h=0<a.y?1:-1,this.o.v(c.b).s({y:a.y-h*c.a.y*e},.2).j()};a.prototype.Td=function(){this.Ja.i.Set(2,2);this.o.v(this.Ja.i).ia(.1).ga().s({x:1,y:1},
.4).j()};return a}(k.Ma);f.g=a})(n||(n={}));(function(f){(function(f){f.lc=function(d){return Math.max(Math.min(d,1),0)}})(f.ec||(f.ec={}))})(k||(k={}));
(function(f){var h=function(c){function a(a){void 0===a&&(a={Ra:3,sa:1,Ha:"",Xa:100});c.call(this);this.ya=a}l(a,c);a.prototype.j=function(){var a=this;c.prototype.j.call(this);this.Ba=0;this.g=new n.g(this.c.a.x,this.c.a.y,this.ya);this.g.zc=function(){return a.$.ia(1,a.Xb,a)};this.c.f(this.g);this.fa=new d(this);this.Sb();this.Tb();this.c.f(this.gc=new r.eb(0,this.g.a.y,this.g.a.x,30,{fillStyle:"rgba(0, 0, 0, 0.5)"}));this.jb=new r.u(0,0,"TAP TO START");this.jb.h.Set(.5,.5);this.c.f(this.jb);this.oa=
new r.u(0,0);this.oa.h.Set(.5,.5);this.oa.ba(15);this.c.f(this.oa);this.gb=new r.u(0,0,"RESTART");this.gb.ba(10);this.gb.h.Set(1,.5);this.c.f(this.gb);this.bb=new r.u(0,0,"MENU");this.bb.ba(10);this.bb.h.Set(0,.5);this.c.f(this.bb);this.Ab=new r.u(0,0);this.Ab.ba(10);this.c.f(this.Ab);this.fa.Ca(this.gb,function(){return a.l.Play("game")}).Ca(this.bb,function(){return a.l.Play("select")});this.ta()};a.prototype.m=function(a){c.prototype.m.call(this,a);this.fa.m();this.g.m(a*this.Ba);this.Ab.Qa((1E3*
a).toFixed(1));this.oa.Qa(this.g.w.toString())};a.prototype.na=function(a){a.clearRect(0,0,a.canvas.width,a.canvas.height);this.c.na(a)};a.prototype.Xb=function(){var a=this;this.ya.Ha&&this.g.w>n.kb.rc(this.ya.Ha)&&n.kb.Jd(this.ya.Ha,this.g.w);var c=new k.Ma(this.c.a.x/2,150);this.g.Ja.qb=!1;var g=k.ec.lc(this.g.w/this.ya.Xa),d=new f.qd(0,0);d.h.Set(.5,.5);d.Nc(this.o,g);g=new r.Text(0,100,"RESTART");g.ba(20);g.h.Set(.5,.5);g.hb(n.la.color.background);var h=new r.eb(g.b.x,g.b.y,g.a.x+20,g.a.y+10,
{fillStyle:"white"});h.h.Set(.5,.5);var v=new r.u(0,180,"LEVEL SELECT");v.h.Set(.5,.5);c.f(d);c.f(h);c.f(g);c.f(v);this.c.f(c);this.bb.Pa();this.gb.Pa();this.o.v(this.oa.b).s({y:100},1,k.xa.Na).Yb(this.oa.i,function(a){return a.s({x:2,y:2})}).j();this.fa=(new k.ob).Ca(g,function(){return a.l.Play("game")}).Ca(v,function(){return a.l.Play("select")})};a.prototype.ta=function(){c.prototype.ta.call(this);this.g.a.y=this.c.a.y-this.gc.a.y;this.gc.b.Set(0,this.g.a.y);this.jb.b.Set(this.g.a.x/2,this.g.a.y/
2);this.oa.b.Set(this.g.a.x/2,this.g.a.y+13.5);this.gb.b.Set(this.g.a.x-10,this.g.a.y+13.5);this.bb.b.Set(10,this.g.a.y+13.5);this.Ab.b.Set(10.5,10.5)};return a}(f.xb);f.Bc=h;var d=function(c){function a(a){c.call(this);this.Ia=a;this.nb=new k.$a}l(a,c);a.prototype.Ya=function(a){k.X.aa(a,this.nb);var e=this.Ia.g.hd(this.nb);e&&(e.da=[],this.ua=e);c.prototype.Ya.call(this,a)};a.prototype.cb=function(a){this.Ia.jb.Oa&&(this.Ia.Ba=1,this.Ia.jb.Pa());this.ua&&(this.Ia.g.qc(this.ua),this.ua=void 0);c.prototype.cb.call(this,
a)};a.prototype.sb=function(a){k.X.aa(a,this.nb);!this.ua&&this.Ia.g.Cb(a)&&this.Ya(a);this.ua&&!this.Ia.g.Cb(this.nb)&&(this.Ia.g.qc(this.ua),this.ua=void 0)};a.prototype.m=function(){this.ua&&(this.ua.Oa?this.ua.Ka(this.Ia.g.ac(this.nb)):this.ua=void 0)};return a}(k.ob)})(m||(m={}));
(function(f){var h=function(a){function b(){a.apply(this,arguments);this.sd=[{Ha:"World1.Level1",Ra:6,sa:5,Xa:15},{Ha:"World1.Level2",Ra:3,sa:15,Xa:200},{Ha:"World1.Level3",Ra:3,sa:30,Xa:650},{Ha:"World1.Level4",Ra:3,sa:60,Xa:1E3}]}l(b,a);b.prototype.j=function(){var b=this;a.prototype.j.call(this);this.l.ha.style.background=n.la.color.background;this.fa=new k.ob;this.Sb();this.Tb();var g=new r.u(this.c.a.x/2,10,"CHALLANGE");g.h.Set(.5,0);g.ba(10);this.c.f(g);g=new r.u(this.c.a.x/2,30,"PRECISION");
g.h.Set(.5,0);this.c.f(g);var d=[];this.sd.forEach(function(a,g){var h=new c(g,a);h.b.Set(g&1?b.c.a.x+h.a.x:-h.a.x,120+70*g);h.h.Set(.5,.5);b.c.f(h);var u=b.o.v(h.b).s({x:b.c.a.x/2},1,k.xa.Na).wa(function(){return h.Md(b.o)}).j();d.push([h,u]);b.fa.Ca(h,function(){b.o.v(h.i).s({x:1.1,y:1.1},1,k.xa.Na).wa(function(){b.l.lb("game",new f.Bc(a));b.l.Play("game")}).j();for(var c=0;c<d.length;c++){var g=d[c],u=g[1];g[0]!==h&&u.Gd().j()}})});g=new r.u(40,30,"MENU");g.h.Set(.5,.5);g.ba(10);var h=new r.eb(g.b.x,
g.b.y,50,30,{strokeStyle:"white"});h.h.Set(.5,.5);h.qb=!1;this.c.f(h);this.fa.Ca(h,function(){return b.l.Play("menu")});this.c.f(g);this.ta()};b.prototype.m=function(){this.o.m(.016)};return b}(f.xb);f.rd=h;var d=function(a){function b(b,c){a.call(this,b,c,200,20);var d=new r.u(5,5,"BAD");d.ba(10);this.f(d);d=new r.u(195,5,"AWESOME");d.ba(10);d.h.Set(1,0);this.f(d);d=new r.eb(.5,.5,200,20,{strokeStyle:"white"});this.f(d);d=new r.eb(1.5,1.5,198,18,{fillStyle:"white",cc:"xor"});d.i.Set(0,1);this.f(this.pc=
d)}l(b,a);b.prototype.Nc=function(a,b){var c=this,d=a.v(this.pc.i).s({x:b},1,k.xa.Na).j();1===b&&d.wa(function(){return c.pc.ca.fillStyle=n.la.color.Uc})};return b}(k.Ma);f.qd=d;var c=function(a){function b(b,c){a.call(this,0,0,250,40);this.cd=c;var f=new r.u(0,0,b.toString());f.ba(40);f.hb(n.la.color.dc);this.f(f);this.w=n.kb.rc(c.Ha);f=new r.u(50,0,"HI-SCORE: "+this.w);f.ba(10);this.f(f);f=new r.u(251,0,"TIME: "+c.sa);f.ba(10);f.h.Set(1,0);this.f(f);this.Gc=new d(50,20);this.f(this.Gc);f=new r.eb(125,
20,270,60,{fillStyle:"rgba(0, 0, 0, 0.5)",cc:"destination-over"});f.h.Set(.5,.5);this.f(f)}l(b,a);b.prototype.Md=function(a){var b=k.ec.lc(this.w/this.cd.Xa);this.Gc.Nc(a,b)};return b}(k.Ma)})(m||(m={}));
(function(f){var h=function(){function d(){}Object.defineProperty(d.prototype,"PassedTutorial",{get:function(){return!!localStorage.getItem("UserPassedTutorial")},set:function(c){localStorage.setItem("UserPassedTutorial",""+c)},enumerable:!0,configurable:!0});d.prototype.rc=function(c){return parseInt(localStorage.getItem("HiScore."+c),10)||0};d.prototype.Jd=function(c,a){localStorage.setItem("HiScore."+c,a.toString())};d.prototype.ad=function(){localStorage.clear()};return d}();f.kb=new h})(n||(n=
{}));
(function(f){var h=k.X,d=function(a){function b(){a.apply(this,arguments);this.Fb=0}l(b,a);b.prototype.j=function(){var b=this;a.prototype.j.call(this);this.Qc=[];this.Rc=12;this.fa=new k.ob;this.Sb();this.Tb();this.Nb=new r.u(10,10);this.Nb.ba(10);this.c.f(this.Nb);this.ja=new k.Ma;var c=new r.u(0,0,"GAME NAME");c.Cache();c.h.Set(.5,.5);var d=new r.Text(0,100,"PLAY");d.Cache();d.h.Set(.5,.5);d.i.Set(2,2);var f=new r.u(0,200,"TUTORIAL");f.Cache();f.h.Set(.5,.5);var h=new r.u(0,260,"VOTE");h.Cache();h.h.Set(.5,
.5);var t=new r.u(0,280,"CLEAR DATA");t.h.Set(.5,.5);t.ba(10);this.ja.f(c);this.ja.f(d);this.ja.f(f);this.ja.f(h);this.fa.Ca(d,function(){return b.l.Play(n.kb.Ad?"select":"tutorial")}).Ca(f,function(){return b.l.Play("tutorial")}).Ca(t,function(){n.kb.ad();t.Qa("DONE")});this.o.v(d).s({Aa:Math.PI/12},2,k.xa.Hc).ga().s({Aa:-Math.PI/12},2,k.xa.Hc).ga().ud().j();this.c.ea=0;this.o.v(this.c).s({ea:1}).j();this.ta();this.vd();this.c.f(this.ja)};b.prototype.m=function(b){this.Fb+=b;this.Nb.Qa((1E3*b).toFixed(1));
b=.016;1>this.Fb&&(this.l.ha.style.background=k.hc(n.la.color.background,this.Fb));for(var c=0,d=this.Qc;c<d.length;c++)d[c].m(b*this.Rc);a.prototype.m.call(this,b)};b.prototype.ta=function(){a.prototype.ta.call(this);this.ja.b.Set(this.c.a.x/2,this.c.a.y/5)};b.prototype.vd=function(){for(var a=new k.Ma,b=1;3>b;++b){h.aa(this.c.a,a.a);var d=1/(b+1),f=new c(a.a.x,a.a.y,{Ra:.5,sa:1E3});f.i.Set(d,(b&1?-1:1)*d);f.h.Set(.5,.5);f.ea=d;h.i(f.a,1/d);f.Ja.qb=!1;a.f(f);this.Qc.push(f)}a.b.Set(this.c.a.x/2,
this.c.a.y/2);this.c.f(a);this.o.v(this).s({Rc:1},2,k.xa.Na).j()};return b}(f.xb);f.wd=d;var c=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.m=function(a){this.o.m(a);this.$.m(a);this.bc(a)};b.prototype.bc=function(a){for(var b=h.Ta,c=this.va;c;c=c.Z)if(h.aa(c.ka,b),h.i(b,a),h.ma(c.b,b,c.b),c.Aa+=Math.PI/80,0>c.b.x||c.b.x>this.a.x||0>c.b.y||c.b.y>this.a.y)this.fb(c),c.Pa()};b.prototype.Eb=function(){a.prototype.Eb.call(this);var b=this.Za;this.tc?b.Da=this.tc:(b.Cache(),this.tc=
b.Da);.5<Math.random()||(b.Ea=n.la.color.active,this.fc?b.Da=this.fc:(b.Cache(),this.fc=b.Da))};return b}(n.g)})(m||(m={}));
(function(f){var h=k.X,d=function(c){function a(){c.call(this,{Ra:15,sa:15,Ha:"",Xa:10});this.Jc="SEE THIS RED SQUARE?;THIS IS ITS TRAJECTORY;YOUR GOAL IS TO;REVERSE ITS TRAJECTORY;LIKE THAT;SO IT WILL HIT THE BOTTOM;THEN YOU WILL EARN POINTS;BUT YOU HAVE TO;DO THIS BEFORE;TIME RUN OUT;GOT IT?;".split(";")}l(a,c);a.prototype.j=function(){var a=this;c.prototype.j.call(this);var d=this.c.a.x/2;this.Ba=1;var f=new r.u(d,100);f.ba(15);f.h.Set(.5,.5);this.Nd=f;this.mb=0;var h=new r.u(d,130,"TAP TO CONTINIUE");
h.h.Set(.5,.5);h.ba(10);h.ea=.7;this.$b=h;this.jb.Pa();this.fa=new k.ob;this.$.ia(1.5,function(){a.Ba=0;f.Qa(a.Jc[a.mb++]);a.c.f(h);a.c.f(f);a.fa.Ca(a.c,a.oc.bind(a))})};a.prototype.oc=function(){var a=this;this.Nd.Qa(this.Jc[this.mb]);switch(this.mb){case 1:this.Xc(this.g.va);break;case 2:case 3:break;case 4:this.Hd(this.g.va);break;case 5:this.Ba=1;if(1>this.g.w){this.$b.Oa&&this.$b.Pa();this.$.ia(.1,function(){return a.oc()});return}this.Ba=0;this.c.f(this.$b);this.$.Cc();break;case 6:this.Ba=
1;this.$.ia(1.5,function(){return a.Ba=0});break;case 7:case 8:break;case 9:this.Ba=1,this.g.m(this.g.wb-5.5),this.$.ia(5.3,function(){return a.Ba=0});case 10:break;case 11:this.l.Play("select");n.kb.Ad=!0;return;default:throw Error();}this.mb+=1};a.prototype.Xc=function(a){var c=h.Ta;h.aa(a.ka,c);h.i(c,10);h.ma(c,a.b,c);a.Ka(a.b);a.Ka(c)};a.prototype.Hd=function(a){var c=h.Ta;a.da=[];h.aa(a.ka,c);h.ma(c,a.b,c);a.Ka(a.b);a.Ka(c);c.Set(this.g.a.x/2+k.tb(-30,30),this.g.a.y/2+50);a.Ka(c);c.Set(this.g.a.x/
2,this.g.a.y+50);a.Ka(c)};return a}(f.Bc);f.Pd=d})(m||(m={}));var w=new k.l("canvas");w.lb("splash",new m.Kd);w.lb("menu",new m.wd);w.lb("select",new m.rd);w.lb("tutorial",new m.Pd);w.Play("splash");w.j();
