var k;
(function(f){var h=function(){function e(c){this.Rc={};this.Bc=this.Uc=0;this.jb=[];this.ha=document.getElementById(c);this.kd=this.ha.getContext("2d");this.Nc=window.requestAnimationFrame.bind(window,this.Ld.bind(this))}e.prototype.lb=function(c,b){this.Rc[c]=b};e.prototype.Play=function(c){this.Ta&&this.jd();if(this.Ta=this.Rc[c])this.Ta.l=this,this.Ta.j();else throw Error();};e.prototype.j=function(){this.Nc()};e.prototype.Ua=function(c,b,a){this.jb.push({element:c,type:b,listener:a});c.addEventListener(b,a)};
e.prototype.Pd=function(c,b,a){for(var d=0,g=this.jb;d<g.length;d++){var p=g[d];if(p.element===c&&p.type===b&&p.listener===a){f.Lc(this.jb,p);c.removeEventListener(b,a);return}}throw Error("Couldn't find event listener.");};e.prototype.jd=function(){for(var c=this.jb.length-1;0<=c;--c){var b=this.jb[c];this.Pd(b.element,b.type,b.listener)}this.jb=[];this.Ta.md&&this.Ta.md()};e.prototype.Ld=function(c){var b=c-this.Bc;50<b&&(b=50);this.Uc=b/1E3;this.Ta.m(this.Uc);this.Ta.ma(this.kd);this.Bc=c;this.Nc()};
return e}();f.l=h})(k||(k={}));(function(f){var h=function(){function e(c,b){void 0===c&&(c=0);void 0===b&&(b=0);this.x=c;this.y=b}e.prototype.Set=function(c,b){this.x=c;this.y=b};e.prototype.aa=function(c){return c?(c.x=this.x,c.y=this.y,c):new e(this.x,this.y)};return e}();f.bb=h})(k||(k={}));
(function(f){(function(h){function e(a,d){void 0===a&&(a=0);void 0===d&&(d=0);return new f.bb(a,d)}function c(a,d){if(d)d.x=a.x,d.y=a.y;else return e(a.x,a.y)}function b(a){return Math.sqrt(a.x*a.x+a.y*a.y)}h.je=new f.bb;h.Sa=new f.bb;h.u=e;h.aa=c;h.xd=function(a){return 0===a.x&&0===a.y};h.la=function(a,d,g){g.x=a.x+d.x;g.y=a.y+d.y};h.Ra=function(a,d,g){g.x=a.x-d.x;g.y=a.y-d.y};h.Cc=function(a,d,g){g.x=a.x*d.x;g.y=a.y*d.y};h.i=function(a,d,g){void 0===g&&(g=a);g.x=a.x*d;g.y=a.y*d};h.rb=b;h.Mb=function(a){var d;
void 0===d&&(d=a);var g=b(a);0<g&&(d.x=a.x/g,d.y=a.y/g)};h.Ud=function(a,d,g){void 0===g&&(g=a);var b=Math.sin(d);d=Math.cos(d);a===g&&(a=c(a));g.x=a.x*d-a.y*b;g.y=a.x*b+a.y*d};h.ge=function(a){return Math.atan2(a.y,a.x)};h.ud=function(a,d){d.x=0<a.x?1/a.x:0;d.y=0<a.y?1/a.y:0};h.he=function(a,d){return a.x*d.x+a.y*d.y}})(f.X||(f.X={}))})(k||(k={}));
var l=this&&this.ke||function(f,h){function e(){this.constructor=f}for(var c in h)h.hasOwnProperty(c)&&(f[c]=h[c]);e.prototype=h.prototype;f.prototype=new e};
(function(f){var h=function(){function e(c,b,a,d){this.b=f.X.u(c,b);this.a=f.X.u(a,d);this.h=f.X.u(0,0);this.i=f.X.u(1,1);this.Ca=0;this.ea=1;this.qb=!0}e.prototype.ma=function(c){this.qb&&(c.save(),c.globalAlpha*=this.ea,c.translate(this.b.x,this.b.y),c.scale(this.i.x,this.i.y),c.rotate(this.Ca),f.X.xd(this.h)||c.translate(-this.h.x*this.a.x,-this.h.y*this.a.y),this.Ea?this.nd(c):this.Fa(c),c.restore())};e.prototype.Fa=function(){throw Error("Unimplemented");};e.prototype.nd=function(c){c.drawImage(this.Ea,
0,0)};e.prototype.hc=function(c,b){var a,d=f.X.Sa;b?(f.X.aa(c,b),a=b):a=f.X.aa(c);this.Oa&&this.Oa.hc(c,a);f.X.Ra(a,this.b,a);f.X.aa(this.i,d);f.X.ud(d,d);f.X.Cc(a,d,a);f.X.Ud(a,-this.Ca,a);f.X.aa(this.h,d);f.X.Cc(d,this.a,d);f.X.la(a,d,a);if(!b)return a};e.prototype.Gb=function(c){c=this.hc(c);var b=0<c.y&&c.y<this.a.y;return 0<c.x&&c.x<this.a.x&&b};e.prototype.Pa=function(){this.Oa.ub(this)};e.prototype.Cache=function(){this.Ea=document.createElement("canvas");this.Ea.width=this.a.x;this.Ea.height=
this.a.y;this.Fa(this.Ea.getContext("2d"))};return e}();f.Pb=h;h=function(e){function c(b,a,d,g){void 0===b&&(b=0);void 0===a&&(a=0);void 0===d&&(d=0);void 0===g&&(g=0);e.call(this,b,a,d,g);this.Bb=[]}l(c,e);c.prototype.g=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(a=0;a<b.length;a++){var d=b[a];if(d.Oa)throw Error("Child has parent");d.Oa=this;this.Bb.push(d)}};c.prototype.ub=function(b){var a=this.Bb.indexOf(b);if(0<=a)b.Oa=void 0,this.Bb.splice(a,1);else throw Error("Child doesn't exist in this layer");
};c.prototype.Fa=function(b){for(var a=0,d=this.Bb;a<d.length;a++)d[a].ma(b)};return c}(h);f.Aa=h})(k||(k={}));
(function(f){function h(a,d,g){var b=g.pageX,c=g.pageY,e=g.target.getBoundingClientRect(),b=new f.bb(b-e.left,c-e.top);a.call(d,b,g)}function e(a,d,g){var b=0,e=0;if("touchend"!==g.type){var b=g.targetTouches[0].pageX,e=g.targetTouches[0].pageY,f=g.target.getBoundingClientRect();c.Set(b-f.left,e-f.top)}a.call(d,c.aa(),g);g.preventDefault()}var c=new f.bb;f.Yb=function(a,d){return h.bind(null,a,d)};f.Zb=function(a,d){return e.bind(null,a,d)};var b=function(){function a(){this.Ec=[];this.Hc=[]}a.prototype.Ka=
function(a,g){var b=0;this.Ec.push({object:a,action:function(){return b=Date.now()}});this.Hc.push({object:a,action:function(){450>Date.now()-b&&g()}});return this};a.prototype.Xa=function(a){this.zc(this.Ec,a)};a.prototype.sb=function(){};a.prototype.gb=function(a){this.zc(this.Hc,a)};a.prototype.zc=function(a,g){for(var b=0;b<a.length;b++){var c=a[b],e=c.action;c.object.Gb(g)&&e()}};a.prototype.m=function(){};return a}();f.ob=b})(k||(k={}));var m;
(function(f){var h=function(){function e(){this.Cb=new k.bb(320,370)}e.prototype.j=function(){var c=this;this.c=new k.Aa(0,0,320,370);this.o=new k.Xc;this.$=new k.Vc;this.eb=new k.eb(120);this.l.Ua(window,"resize",function(){return c.ua()})};e.prototype.m=function(c){this.$.m(c);this.o.m(c)};e.prototype.ma=function(c){c.clearRect(0,0,c.canvas.width,c.canvas.height);this.c.ma(c)};e.prototype.Xa=function(c){this.fa.Xa(c)};e.prototype.sb=function(c){this.fa.sb(c)};e.prototype.gb=function(c){this.fa.gb(c)};
e.prototype.ua=function(){var c=window.innerHeight,b=Math.min(window.innerWidth/this.Cb.x,c/this.Cb.y);this.c.i.Set(b,b);this.c.a.Set(this.Cb.x,c/b);c=Math.floor(this.c.a.x*b);this.l.ha.width!==c&&(this.l.ha.width=c);b=Math.floor(this.c.a.y*b);this.l.ha.height!==b&&(this.l.ha.height=b)};e.prototype.Wb=function(){if(!this.fa)throw Error();this.l.Ua(this.l.ha,"mousemove",k.Yb(this.sb,this));this.l.Ua(this.l.ha,"mousedown",k.Yb(this.Xa,this));this.l.Ua(this.l.ha,"mouseup",k.Yb(this.gb,this))};e.prototype.Xb=
function(){if(!this.fa)throw Error();this.l.Ua(this.l.ha,"touchmove",k.Zb(this.sb,this));this.l.Ua(this.l.ha,"touchstart",k.Zb(this.Xa,this));this.l.Ua(this.l.ha,"touchend",k.Zb(this.gb,this))};return e}();f.zb=h})(m||(m={}));var n,q=n||(n={});(q.ka||(q.ka={})).color={active:"#88A825",kc:"#911146",cd:"#ED8C2B",background:"#35203B"};var r;
(function(f){var h=function(){function e(c,b,a){void 0===a&&(a="white");this.Ga=c;this.a=b;this.qa=a;this.oc={};this.ra=b/c.Va.Tb;this.Ma=c.Va.Nb*this.ra;this.Cache=document.createElement("canvas");this.Cache.width=Object.keys(c.Vb).length*Math.ceil(this.Ma+this.ra);this.Cache.height=b;console.log("FontCache Size",this.a,"DotPx",this.ra,"Color",this.qa);this.Qd()}e.prototype.tc=function(c,b,a,d,g,p){void 0===a&&(a=0);void 0===d&&(d=0);void 0===g&&(g=1);void 0===p&&(p=g);c.drawImage(this.Cache,this.oc[b],
0,this.Ma,this.a,a,d,this.Ma*g,this.a*p)};e.prototype.Qd=function(){var c=this.Cache.getContext("2d"),b=0;c.fillStyle=this.qa;for(var a in this.Ga.Vb){this.Rd(c,a);this.oc[a]=b;var d=Math.ceil(this.Ma+this.ra),b=b+d;c.translate(d,0)}};e.prototype.Rd=function(c,b){for(var a=this.Ga,d=this.ra,g=0;g<a.Va.Nb;++g)for(var p=0;p<a.Va.Tb;++p)a.Vb[b][p*a.Va.Nb+g]&&c.fillRect(g*d,p*d,d,d)};return e}();f.pd=h})(r||(r={}));
(r||(r={})).Md={Va:{Nb:3,Tb:5},Vb:{"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],".":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],",":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],":":[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"?":[1,1,0,0,0,1,0,1,1,0,0,0,0,1,0],"\u2665":[1,0,1,1,1,1,1,1,1,0,1,0,0,0,0],0:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],1:[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,0],6:[0,
1,1,1,0,0,1,1,1,1,0,1,1,1,1],7:[1,1,1,0,0,1,0,1,0,0,1,0,0,1,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],9:[1,1,1,1,0,1,1,1,1,0,0,1,1,1,0],A:[0,1,0,1,0,1,1,1,1,1,0,1,1,0,1],B:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,0],C:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],D:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],E:[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],F:[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],G:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],H:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],I:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],J:[1,1,1,0,1,0,0,1,0,0,1,0,1,0,0],K:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,
1],L:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],N:[0,0,1,1,0,1,1,1,1,1,0,1,1,0,0],M:[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],O:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],P:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],Q:[1,1,1,1,0,1,1,0,1,1,1,0,0,0,1],R:[1,1,0,1,0,1,1,1,0,1,0,1,1,0,1],S:[1,1,1,1,0,0,1,1,0,0,0,1,1,1,1],T:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],U:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],W:[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],V:[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],Y:[1,0,1,1,0,1,1,0,1,0,1,0,0,1,0]},Cache:{}};
(function(f){var h=function(e){function c(b,a,d,g){void 0===d&&(d="");void 0===g&&(g={a:20,qa:"white",Ga:f.Md});e.call(this,b,a,0,0);this.Text=d;this.ca=g;this.Za(g.qa);this.ba(g.a)}l(c,e);c.prototype.Za=function(b){this.Fb=this.ca.Ga.Cache[b]?this.ca.Ga.Cache[b]:this.ca.Ga.Cache[b]=new f.pd(this.ca.Ga,20,b)};c.prototype.$a=function(b){this.Text=b;this.ad()};c.prototype.ba=function(b){this.ca.a=b;this.ra=b/this.ca.Ga.Va.Tb;this.Ma=this.ca.Ga.Va.Nb*this.ra;this.ad()};c.prototype.Fa=function(b){for(var a=
this.ca.a/this.Fb.a,d=0;d<this.Text.length;++d){var g=this.Text[d];" "!==g&&this.Fb.tc(b,g,0,0,a);b.translate(this.Ma+this.ra,0)}};c.prototype.ad=function(){this.a.x=(this.Ma+this.ra)*this.Text.length-this.ra;this.a.y=this.ca.a};return c}(k.Pb);f.Text=h;h=function(e){function c(){e.apply(this,arguments)}l(c,e);c.prototype.ma=function(b){if(this.qb){var a=this.ca.a/this.Fb.a,d=this.b,g=d.x,d=d.y,g=g-this.a.x*this.h.x*this.i.x,d=d-this.a.y*this.h.y*this.i.y,c=b.globalAlpha;b.globalAlpha*=this.ea;for(var e=
0;e<this.Text.length;++e){var f=this.Text[e];" "!==f&&this.Fb.tc(b,f,g,d,a*this.i.x,a*this.i.y);g+=(this.Ma+this.ra)*this.i.x}b.globalAlpha=c}};c.prototype.Cache=function(){throw Error("Use gfx.Text if you want cache");};return c}(h);f.w=h})(r||(r={}));
(function(f){f.Lc=function(e,c){var b=e.indexOf(c);if(0<=b)e.splice(b,1);else throw Error();};f.$d=function(e,c){var b=e.indexOf(c);0<=b&&e.splice(b,1)};f.yd=function(e){return e[e.length-1]};f.Ab=function(e,c){var b=e.substr(1).match(/.{2}/g).map(function(a){return parseInt(a,16)}),b=b.map(function(a){return Math.min(a*c,255)|0});return"#"+((b[0]<<16)+(b[1]<<8)+b[2]+16777216).toString(16).substr(1)};var h=function(){function e(c){void 0===c&&(c=60);this.ec=c;this.Nd=0;this.fc=Array(c);for(var b=
0;b<c;++b)this.fc[b]=0}e.prototype.m=function(c){this.fc[this.Nd++%this.ec]=c};e.prototype.xc=function(){return 1/this.qd()};e.prototype.qd=function(){for(var c=0,b=0;b<this.ec;++b)c+=this.fc[b];return c/this.ec};return e}();f.eb=h;h=function(){function e(){this.qc=[]}e.prototype.la=function(c,b){this.qc.push([c,b]);return this};e.prototype.gd=function(){for(var c=0,b=this.qc;c<b.length;c++){var a=b[c];a[0].call(a[1])}};return e}();f.hd=h})(k||(k={}));
(function(f){var h=function(){function c(b,a){this.vb=b;this.Ba=a;this.sa=0;this.Lb=[];this.Db=0;this.ac=new f.hd;this.dc=this.Ub=!1}c.prototype.j=function(){var b=this.Sb();b.Ba&&(b.IsPlaying()&&b.Ba.Tc(b),b.Ba.Xd(b));for(;b;)b.Ub=!1,b.sa=0,b=b.Z;return this};c.prototype.s=function(b,a,d){void 0===a&&(a=1);void 0===d&&(d=e.Cd);this.Lb=[];for(var g in b)this.Lb.push({key:g,start:0,bd:0,end:b[g]});this.Db=a;this.od=d;return this};c.prototype.xa=function(b){this.Dc=b;return this};c.prototype.ga=function(b){void 0===
b&&(b=this.vb);this.Z=b=new c(b,this.Ba);b.pa=this;return b};c.prototype.cc=function(b,a){this.ac.la(function(){if(this.Ba)a(this.Ba.u(b).j());else throw Error();},this);return this};c.prototype.ia=function(b){return this.ga().s({},b)};c.prototype.Sd=function(){for(var b=this;b;b=b.pa)b.dc=!b.dc;return this};c.prototype.Dd=function(){var b=this;this.ac.la(function(){setTimeout(b.j.bind(b),0)});return this};c.prototype.m=function(b){for(var a=this;a;)if(0===a.sa&&a.sd(),a.sa+=b,a.sa<=a.Db){a.Yc(a.sa);
break}else a.Ub||(a.Yc(a.Db),a.Dc&&a.Dc(a.vb),a.Ba&&!a.Z&&a.Ba.Tc(a.Sb()),a.Ub=!0),a=a.Z};c.prototype.Sb=function(){for(var b=this;b.pa;)b=b.pa;return b};c.prototype.IsPlaying=function(){if(this.Ba)return 0<=this.Ba.o.indexOf(this.Sb());throw Error();};c.prototype.Yc=function(b){for(var a=0,d=this.Lb;a<d.length;a++){var g=d[a];this.vb[g.key]=this.od(b,g.start,g.bd,this.Db)}};c.prototype.sd=function(){for(var b=0,a=this.Lb;b<a.length;b++){var d=a[b];if(this.dc){var g=d.start||this.vb[d.key];d.start=
d.end;d.end=g}else d.start=this.vb[d.key];d.bd=d.end-d.start}this.ac.gd()};return c}();f.ce=h;var e;(function(c){c.Cd=function(b,a,d,g){return d*b/g+a};c.Na=function(b,a,d,g){b/=g;b--;return d*(b*b*b+1)+a};c.Qc=function(b,a,d,g){return-d/2*(Math.cos(Math.PI*b/g)-1)+a}})(e=f.ya||(f.ya={}));h=function(){function c(){this.o=[]}c.prototype.u=function(b){return new f.ce(b,this)};c.prototype.Xd=function(b){this.o.push(b)};c.prototype.Tc=function(b){f.Lc(this.o,b)};c.prototype.m=function(b){for(var a=0,
d=this.o;a<d.length;a++)d[a].m(b)};return c}();f.Xc=h})(k||(k={}));
(function(f){var h=function(e){function c(){e.apply(this,arguments)}l(c,e);c.prototype.j=function(){var b=this;e.prototype.j.call(this);this.l.ha.style.background="black";this.oa=new k.Aa;this.oa.i.Set(.5,.5);var a=new r.w(0,0,"A GAME BY KAKUS");a.h.Set(.5,.5);var d=new k.Aa(0,a.a.y+10),g=new r.w(0,0,"MADE WITH "),c=new r.w(g.a.x,0,"\u2665");c.Za("red");var f=new r.w(c.b.x+c.a.x,0," FOR JS13K");d.h.Set(.5,.5);d.a.Set(f.b.x+f.a.x,f.a.y);d.g(g,c,f);g=new r.w(0,d.b.y+300,"2015");g.h.Set(.5,.5);this.oa.g(a);
this.oa.g(d);this.oa.g(g);this.c.ea=0;this.o.u(this.c).s({ea:1}).ga().ia(1).ga().s({ea:0}).xa(function(){return b.l.Play("menu")}).j();this.c.g(this.oa);this.ua()};c.prototype.ua=function(){e.prototype.ua.call(this);this.oa.b.Set(this.c.a.x/2,this.c.a.y/3)};return c}(f.zb);f.Wd=h})(m||(m={}));
(function(f){var h=function(e){function c(b,a,d,g,c){void 0===c&&(c={fillStyle:"red"});e.call(this,b,a,d,g);this.ca=c}l(c,e);c.prototype.Fa=function(b){this.ca.jc&&(b.globalCompositeOperation=this.ca.jc);this.ca.fillStyle&&(b.fillStyle=this.ca.fillStyle,b.fillRect(0,0,this.a.x,this.a.y));this.ca.strokeStyle&&(b.strokeStyle=this.ca.strokeStyle,b.strokeRect(0,0,this.a.x,this.a.y))};return c}(k.Pb);f.Ya=h})(r||(r={}));
(function(f){f.tb=function(f,e){if(e<f)throw Error();return f+Math.random()*(e-f)}})(k||(k={}));
(function(f){var h=function(){function c(b,a,d,g){void 0===g&&(g=NaN);this.pc=b;this.sc=a;this.ia=d;this.td=g;this.cb=this.sa=0}c.prototype.m=function(b){this.sa+=b;this.sa>this.ia&&(0===this.cb&&(this.pc.call(this.sc,b),this.cb+=1),this.sa-this.ia>this.td*this.cb&&(this.pc.call(this.sc,b),this.cb+=1))};return c}();f.ie=h;var e=function(){function c(){this.$=[]}c.prototype.ia=function(b,a,d){var g=this,c;this.$.push(c=new h(function(){for(var b=[],e=0;e<arguments.length;e++)b[e-0]=arguments[e];f.$d(g.$,
c);a.apply(d,b)},d,b));return c};c.prototype.Mc=function(b,a,d,g){void 0===g&&(g=0);this.$.push(new h(a,d,g,b))};c.prototype.m=function(b){for(var a=0,d=this.$;a<d.length;a++)d[a].m(b)};c.prototype.Kc=function(){this.$=[]};return c}();f.Vc=e})(k||(k={}));
(function(f){(function(h){var e=k.X,c=k.X.Sa,b=function(a){function b(){a.apply(this,arguments);this.ja=e.u(0,0);this.da=[];this.qa="red";this.v=1}l(b,a);b.prototype.m=function(a){this.pb()?(this.qa=1<this.f.Hb?f.ka.color.cd:f.ka.color.active,this.ee(a)):(e.aa(this.ja,c),e.i(c,a),e.la(this.b,c,this.b))};b.prototype.Fa=function(){throw Error("Unimplemented");};b.prototype.pb=function(){return 1<this.da.length};b.prototype.La=function(a){if(!(100<this.da.length)){var b=k.yd(this.da),d=2>this.da.length;
if(b){if(e.Ra(a,b,c),a=e.rb(c),20<a){e.Mb(c);e.i(c,20);for(var f=e.aa(c);20<a;)e.la(b,f,c),this.da.push(b=e.aa(c)),a-=20;if(d){d=this.da;b=d[0];d=d[1];e.Ra(d,b,c);a=this.ja;var h;void 0===h&&(h=.01);(0===a.y||0===c.y?a.y===c.y:Math.abs(Math.abs(a.x/a.y)-Math.abs(c.x/c.y))<h)||(h=e.rb(this.ja),e.Ra(d,this.b,this.ja),e.Mb(this.ja),e.aa(this.ja,b),e.i(b,10),e.la(this.b,b,b),e.i(this.ja,h))}}}else this.da.push(e.aa(a))}};b.prototype.ee=function(a){var b=e.rb(this.ja);a=b*a;for(var d=0;0<a;)if(e.Ra(this.da[0],
this.b,c),0<(d=e.rb(c))-a){e.Mb(c);e.aa(c,this.ja);e.i(c,a);e.la(this.b,c,this.b);e.i(this.ja,b);break}else if(a-=d,e.la(this.b,c,this.b),this.da.shift(),this.v+=this.f.Hb,1>this.da.length)break};return b}(k.Pb);h.dd=b})(f.Ob||(f.Ob={}))})(n||(n={}));
(function(f){(function(f){var e=function(c){function b(a,b,g,p){c.call(this,a,b,g,p);this.na=new r.Text(0,0);this.na.h.Set(.5,.5);this.na.b.Set(g/2,p/2)}l(b,c);b.prototype.m=function(a){this.Ca+=1*Math.PI*a;c.prototype.m.call(this,a)};b.prototype.Fa=function(a){a.globalCompositeOperation="xor";a.fillStyle=this.qa;a.fillRect(0,0,this.a.x,this.a.y);this.na.$a(this.v.toFixed(0));this.na.Ca=-this.Ca;this.na.ma(a)};return b}(f.dd);f.Od=e})(f.Ob||(f.Ob={}))})(n||(n={}));
(function(f){var h=k.X,e=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.ma=function(b){var d=b.globalCompositeOperation;b.globalCompositeOperation="xor";a.prototype.ma.call(this,b);b.globalCompositeOperation=d};return b}(r.w),c=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.ma=function(b){var d=b.globalCompositeOperation;b.globalCompositeOperation="destination-over";a.prototype.ma.call(this,b);b.globalCompositeOperation=d};return b}(r.w),b=function(a){function b(g,
d,e){void 0===e&&(e={Qa:3,ta:15});a.call(this,0,0,g,d);this.za=e;this.v=0;this.Hb=1;this.wb=this.za.ta;this.wd=!1;this.o=new k.Xc;this.$=new k.Vc;this.$.Mc(this.za.Qa,this.Jb,this);this.$.ia(this.za.ta,this.bc,this);this.$.Mc(1,this.fe,this,this.za.ta-5.5);this.Ja=new c(g/2,g/3);this.Ja.h.Set(.5,.5);this.Ja.Za(k.Ab(f.ka.color.background,1.4));this.Ja.ba(120)}l(b,a);b.prototype.m=function(a){this.wb-=a;this.o.m(a);this.$.m(a);0<=this.wb&&(this.Ja.$a(this.wb.toFixed(0)),this.ic(a),this.de())};b.prototype.ic=
function(a){for(var b=this.wa;b;b=b.Z)if(b.f){b.m(a);if(b.pb())for(var d=b.Z;d;d=d.Z)d.pb()&&this.vd(b,d)&&this.Jd(b,d);b.b.y<-b.a.y/2?this.Fc(b):b.b.x>this.a.x||0>b.b.x?this.Fc(b):b.b.y>this.a.y&&this.Kd(b)}};b.prototype.de=function(){for(var a=[],b=this.wa;b;b=b.Z)b.pb()&&a.push(b);var d=4>a.length?1:a.length/2|0;if(0<d-this.Hb)for(var c=0;c<a.length;c++)b=a[c],this.o.u(b.i).s({x:1.5,y:1.5},.2,k.ya.Na).ga().s({x:1,y:1},.2).j();this.Hb=d};b.prototype.ed=function(a){this.ab?(this.ab.Z=a,a.pa=this.ab,
this.ab=a):this.wa=this.ab=a;a.f=this};b.prototype.hb=function(a){a.Z?a.pa?(a.pa.Z=a.Z,a.Z.pa=a.pa):(a.Z.pa=null,this.wa=a.Z):a.pa?(a.pa.Z=null,this.ab=a.pa):this.wa=this.ab=null;a.f=void 0};b.prototype.rd=function(a){for(var b=this.wa;b;b=b.Z)if(b.Gb(a))return b;return null};b.prototype.wc=function(a){if(!(2>a.da.length)){var b=a.da[a.da.length-1],d=h.Sa;h.Ra(b,a.da[a.da.length-2],d);h.i(d,20);h.la(b,d,d);a.La(d)}};b.prototype.Fa=function(b){b.strokeStyle=f.ka.color.active;b.setLineDash([3,9]);b.lineWidth=
2;for(var d=this.wa;d;d=d.Z)if(d.pb()){b.beginPath();b.moveTo(d.b.x,d.b.y);for(var c=0,e=d.da;c<e.length;c++){var h=e[c];b.lineTo(h.x,h.y)}b.stroke()}a.prototype.Fa.call(this,b);this.Ja.ma(b)};b.prototype.vd=function(a,b){var d=h.Sa;h.Ra(a.b,b.b,d);return h.rb(d)<(a.a.x+b.a.x)/2};b.prototype.Fc=function(a){var b=Math.min(-a.v,-10);this.v+=b;a.b.y+=a.a.y/2;this.Qb(a.b,b);this.hb(a);this.ub(a);this.Jb()};b.prototype.Kd=function(a){this.v+=a.v;this.Qb(a.b,a.v);this.hb(a);this.ub(a)};b.prototype.Jd=function(){for(var a=
this,b=[],d=0;d<arguments.length;d++)b[d-0]=arguments[d];b.forEach(function(b){a.hb(b);a.o.u(b).s({ea:0},2).xa(function(){return b.Pa()}).j()})};b.prototype.bc=function(){var a=this;this.$.Kc();var b=this.o.u(null);b.j();for(var d=this.wa;d;d=d.Z)if(1<d.v){var c=this.o.u(d.i).s({x:2,y:2},.3,k.ya.Na).ga(d).s({v:d.v/2|0},.5).xa(function(b){var d=Math.round(b.v);a.Qb(b.b,d);a.v+=d}).ga(d.i).s({x:5,y:5},.35).cc(d,function(a){return a.s({ea:0},.35)}).ga(d).xa(function(b){a.ub(b);a.hb(b)});b.ga(c).xa(function(a){return a.j()});
b=c}b.ga().xa(function(){a.Gc&&a.Gc();for(var b=a.wa;b;b=b.Z)if(1>=b.v&&b.f){var d=k.tb(0,.6);a.o.u(b.i).ia(d).ga().s({x:5,y:5},.35).cc(b,function(a){return a.s({ea:0},.25)}).ga(b).xa(function(b){a.ub(b);a.hb(b)}).j()}a.wd=!0})};b.prototype.Jb=function(){var a=new f.Ob.Od(k.tb(15,this.a.x-15),this.a.y-5,30,30);a.qa=f.ka.color.kc;a.h.Set(.5,.5);a.ea=0;a.i.Set(.1,.1);var b=h.Sa;b.y=0;b.x=k.tb(15,this.a.x-15);h.Ra(a.b,b,b);h.Mb(b);h.i(b,k.tb(-80,-60));h.aa(b,a.ja);this.o.u(a).s({ea:1},.2).j();this.o.u(a.i).s({x:1,
y:1},.2).j();this.ed(a);this.g(a)};b.prototype.Qb=function(a,b){var d=new e(a.x,a.y,(0<b?"+":"")+b);d.h.Set(.5,.5);d.Za(0<b?f.ka.color.active:f.ka.color.kc);this.g(d);var c=0<b?2:1;this.o.u(d.i).s({x:c,y:c},.5,k.ya.Na).ia(.3).ga(d).s({ea:0},.3).xa(function(){d.Pa()}).j();if(0>a.x||a.x>this.a.x){var h=0<a.x?1:-1;this.o.u(d.b).s({x:a.x-h*d.a.x*c},.2).j()}else h=0<a.y?1:-1,this.o.u(d.b).s({y:a.y-h*d.a.y*c},.2).j()};b.prototype.fe=function(){this.Ja.i.Set(2,2);this.o.u(this.Ja.i).ia(.1).ga().s({x:1,y:1},
.4).j()};return b}(k.Aa);f.f=b})(n||(n={}));(function(f){(function(f){f.rc=function(e){return Math.max(Math.min(e,1),0)}})(f.lc||(f.lc={}))})(k||(k={}));
(function(f){var h=function(c){function b(a){void 0===a&&(a={Qa:3,ta:1,Ha:"",Wa:100});c.call(this);this.za=a}l(b,c);b.prototype.j=function(){var a=this;c.prototype.j.call(this);this.Da=0;this.f=new n.f(this.c.a.x,this.c.a.y,this.za);this.f.Gc=function(){return a.$.ia(1,a.bc,a)};this.c.g(this.f);this.fa=new e(this);this.Wb();this.Xb();this.c.g(this.nc=new r.Ya(0,this.f.a.y,this.f.a.x,30,{fillStyle:"rgba(0, 0, 0, 0.5)"}));this.kb=new r.w(0,0,"TAP TO START");this.kb.h.Set(.5,.5);this.c.g(this.kb);this.na=
new r.w(0,0);this.na.h.Set(.5,.5);this.na.ba(15);this.c.g(this.na);this.ib=new r.w(0,0,"RESTART");this.ib.ba(10);this.ib.h.Set(1,.5);this.c.g(this.ib);this.fb=new r.w(0,0,"MENU");this.fb.ba(10);this.fb.h.Set(0,.5);this.c.g(this.fb);this.Eb=new r.w(0,0);this.Eb.ba(10);this.c.g(this.Eb);this.fa.Ka(this.ib,function(){return a.l.Play("game")}).Ka(this.fb,function(){return a.l.Play("select")});this.ua()};b.prototype.m=function(a){c.prototype.m.call(this,a);this.eb.m(a);this.fa.m();this.f.m(a*this.Da);
this.Eb.$a(this.eb.xc().toFixed(1));this.na.$a(this.f.v.toString())};b.prototype.ma=function(a){a.clearRect(0,0,a.canvas.width,a.canvas.height);this.c.ma(a)};b.prototype.bc=function(){var a=this;this.za.Ha&&this.f.v>n.yb.yc(this.za.Ha)&&n.yb.Vd(this.za.Ha,this.f.v);var b=new k.Aa(this.c.a.x/2,150);this.f.Ja.qb=!1;var c=k.lc.rc(this.f.v/this.za.Wa),e=new f.zd(0,0);e.h.Set(.5,.5);e.Wc(this.o,c);c=new r.Text(0,100,"RESTART");c.ba(20);c.h.Set(.5,.5);c.Za(n.ka.color.background);var h=new r.Ya(c.b.x,c.b.y,
c.a.x+20,c.a.y+10,{fillStyle:"white"});h.h.Set(.5,.5);var u=new r.w(0,160,"LEVEL SELECT");u.h.Set(.5,.5);b.g(e);b.g(h);b.g(c);b.g(u);this.c.g(b);this.fb.Pa();this.ib.Pa();this.o.u(this.na.b).s({y:100},1,k.ya.Na).cc(this.na.i,function(a){return a.s({x:2,y:2})}).j();this.fa=(new k.ob).Ka(c,function(){return a.l.Play("game")}).Ka(u,function(){return a.l.Play("select")})};b.prototype.ua=function(){c.prototype.ua.call(this);this.f.a.y=this.c.a.y-this.nc.a.y;this.nc.b.Set(0,this.f.a.y);this.kb.b.Set(this.f.a.x/
2,this.f.a.y/2);this.na.b.Set(this.f.a.x/2,this.f.a.y+13.5);this.ib.b.Set(this.f.a.x-10,this.f.a.y+13.5);this.fb.b.Set(10,this.f.a.y+13.5);this.Eb.b.Set(10.5,10.5)};return b}(f.zb);f.Jc=h;var e=function(c){function b(a){c.call(this);this.Ia=a;this.nb=new k.bb}l(b,c);b.prototype.Xa=function(a){k.X.aa(a,this.nb);var b=this.Ia.f.rd(this.nb);b&&(b.da=[],this.va=b);c.prototype.Xa.call(this,a)};b.prototype.gb=function(a){this.Ia.kb.Oa&&(this.Ia.Da=1,this.Ia.kb.Pa());this.va&&(this.Ia.f.wc(this.va),this.va=
void 0);c.prototype.gb.call(this,a)};b.prototype.sb=function(a){k.X.aa(a,this.nb);!this.va&&this.Ia.f.Gb(a)&&this.Xa(a);this.va&&!this.Ia.f.Gb(this.nb)&&(this.Ia.f.wc(this.va),this.va=void 0)};b.prototype.m=function(){this.va&&(this.va.Oa?this.va.La(this.Ia.f.hc(this.nb)):this.va=void 0)};return b}(k.ob)})(m||(m={}));
(function(f){var h=function(b){function a(){b.apply(this,arguments);this.Bd=[{Ha:"World1.Level1",Qa:6,ta:5,Wa:15},{Ha:"World1.Level2",Qa:3,ta:15,Wa:200},{Ha:"World1.Level3",Qa:3,ta:30,Wa:650},{Ha:"World1.Level4",Qa:3,ta:60,Wa:2100}]}l(a,b);a.prototype.j=function(){var a=this;b.prototype.j.call(this);this.l.ha.style.background=n.ka.color.background;this.fa=new k.ob;this.Wb();this.Xb();var g=new r.w(this.c.a.x/2,10,"CHALLENGE");g.h.Set(.5,0);g.ba(10);this.c.g(g);g=new r.w(this.c.a.x/2,30,"PRECISION");
g.h.Set(.5,0);this.c.g(g);var e=[];this.Bd.forEach(function(b,g){var h=new c(g,b);h.b.Set(g&1?a.c.a.x+h.a.x:-h.a.x,120+70*g);h.h.Set(.5,.5);a.c.g(h);var t=a.o.u(h.b).s({x:a.c.a.x/2},1,k.ya.Na).xa(function(){return h.Yd(a.o)}).j();e.push([h,t]);a.fa.Ka(h,function(){a.o.u(h.i).s({x:1.1,y:1.1},1,k.ya.Na).xa(function(){a.l.lb("game",new f.Jc(b));a.l.Play("game")}).j();for(var c=0;c<e.length;c++){var g=e[c],t=g[1];g[0]!==h&&t.Sd().j()}})});g=new r.w(40,30,"MENU");g.h.Set(.5,.5);g.ba(10);var h=new r.Ya(g.b.x,
g.b.y,50,30,{strokeStyle:"white"});h.h.Set(.5,.5);h.qb=!1;this.c.g(h);this.fa.Ka(h,function(){return a.l.Play("menu")});this.c.g(g);this.ua()};return a}(f.zb);f.Ad=h;var e=function(b){function a(a,c){b.call(this,a,c,200,20);var e=new r.w(5,5,"BAD");e.ba(10);this.g(e);e=new r.w(195,5,"AWESOME");e.ba(10);e.h.Set(1,0);this.g(e);e=new r.Ya(.5,.5,200,20,{strokeStyle:"white"});this.g(e);e=new r.Ya(1.5,1.5,198,18,{fillStyle:"white",jc:"xor"});e.i.Set(0,1);this.g(this.vc=e)}l(a,b);a.prototype.Wc=function(a,
b){var c=this,e=a.u(this.vc.i).s({x:b},1,k.ya.Na).j();1===b&&e.xa(function(){return c.vc.ca.fillStyle=n.ka.color.cd})};return a}(k.Aa);f.zd=e;var c=function(b){function a(a,c){b.call(this,0,0,250,40);this.ld=c;var f=new r.w(0,0,a.toString());f.ba(40);f.Za(n.ka.color.kc);this.g(f);this.v=n.yb.yc(c.Ha);f=new r.w(50,0,"HI-SCORE: "+this.v);f.ba(10);this.g(f);f=new r.w(251,0,"TIME: "+c.ta);f.ba(10);f.h.Set(1,0);this.g(f);this.Oc=new e(50,20);this.g(this.Oc);f=new r.Ya(125,20,270,60,{fillStyle:"rgba(0, 0, 0, 0.5)",
jc:"destination-over"});f.h.Set(.5,.5);this.g(f)}l(a,b);a.prototype.Yd=function(a){var b=k.lc.rc(this.v/this.ld.Wa);this.Oc.Wc(a,b)};return a}(k.Aa)})(m||(m={}));
(function(f){var h=function(){function b(){}b.prototype.Ic=function(a){a&&localStorage.setItem("UserPassedTutorial",a.toString());return!!localStorage.getItem("UserPassedTutorial")};b.prototype.yc=function(a){return parseInt(localStorage.getItem("HiScore."+a),10)||0};b.prototype.Vd=function(a,b){localStorage.setItem("HiScore."+a,b.toString())};return b}();if("object"===typeof localStorage){var e=!0;try{localStorage.setItem("storageTest","1"),localStorage.removeItem("storageTest")}catch(c){Storage.prototype.setItem=
function(){e&&alert("If you want to save your scores please leave private browsing.");e=!1}}}f.yb=new h})(n||(n={}));
(function(f){var h=k.X,e=function(b){function a(){b.apply(this,arguments);this.Kb=0}l(a,b);a.prototype.j=function(){var a=this;b.prototype.j.call(this);this.Zc=[];this.$c=12;this.Rb=new r.w(10,10);this.Rb.ba(10);this.Hd();this.Gd();this.Fd();this.xb=new r.Text(0,0,"0.61B");this.xb.ba(10);this.xb.h.Set(1,1);this.xb.Cache();this.o.u(this.Ib).s({Ca:Math.PI/12},2,k.ya.Qc).ga().s({Ca:-Math.PI/12},2,k.ya.Qc).ga().Dd().j();this.c.ea=0;this.o.u(this.c).s({ea:1}).j();this.fa=new k.ob;this.Wb();this.Xb();this.fa.Ka(this.Ib,
function(){return a.l.Play(n.yb.Ic()?"select":"tutorial")}).Ka(this.be,function(){return a.l.Play("tutorial")});this.ua();this.Ed();this.c.g(this.Rb,this.oa,this.Ib,this.$b,this.xb)};a.prototype.m=function(a){this.Kb+=a;this.eb.m(a);this.Rb.$a(this.eb.xc().toFixed(1));1>this.Kb&&(this.l.ha.style.background=k.Ab(n.ka.color.background,this.Kb));for(var c=0,e=this.Zc;c<e.length;c++)e[c].m(a*this.$c);b.prototype.m.call(this,a)};a.prototype.ua=function(){b.prototype.ua.call(this);var a=this.c.a.x/2,c=
this.c.a.y/2,e=this.c.a.y/this.Cb.y;this.oa.b.Set(a,c-100*e);this.Ib.b.Set(a,c-10*e);this.$b.b.Set(a,c+70*e);this.xb.b.Set(this.c.a.x-10,this.c.a.y-10)};a.prototype.Ed=function(){for(var a=2;1<=a;--a){var b=1/(a/2+1),e=new c(this.c.a.x,this.c.a.y,{Qa:.5,ta:1E9});e.b.Set(this.c.a.x/2,this.c.a.y/2);e.i.Set(b,(a&1?-1:1)*b);e.h.Set(.5,.5);e.ea=b;h.i(e.a,1/b);e.Ja.qb=!1;this.c.g(e);this.Zc.push(e)}this.o.u(this).s({$c:1},2,k.ya.Na).j()};a.prototype.Gd=function(){var a=new k.Aa(0,100);a.h.Set(.5,.5);a.i.Set(2,
2);var b=new r.Text(5,5,"PLAY"),c=new r.Ya(0,0,b.a.x+10,b.a.y+10,{strokeStyle:"white",fillStyle:"rgba(0, 0, 0, 0.2)"});a.g(c,b);h.aa(c.a,a.a);a.Cache();this.Ib=a};a.prototype.Fd=function(){var a=new r.Text(0,0,"TUTORIAL");a.Cache();a.h.Set(.5,.5);this.be=a;var b=new r.Text(0,60,"VOTE");b.Cache();b.h.Set(.5,.5);this.$b=new k.Aa;this.$b.g(a,b)};a.prototype.Hd=function(){this.oa=new k.Aa;var a=new r.Text(0,0,"SHAPES"),b=new r.Text(a.a.x+20,0,"\u2665");b.Za("red");b.h.Set(.5,0);var c=new r.Text(b.b.x+
20,0,"NUMBERS"),e=c.b.x+c.a.x;this.oa.a.Set(e,a.a.y);this.oa.h.Set(b.b.x/e,.5);this.oa.g(a,b,c);this.oa.Cache()};return a}(f.zb);f.Id=e;var c=function(b){function a(){b.apply(this,arguments);this.Pc=1}l(a,b);a.prototype.m=function(a){this.o.m(a);this.$.m(a);this.ic(a)};a.prototype.ic=function(a){for(var b=h.Sa,c=this.wa;c;c=c.Z)if(h.aa(c.ja,b),h.i(b,a),h.la(c.b,b,c.b),c.Ca+=Math.PI*a,0>c.b.y||c.b.y>this.a.y||0>c.b.x||c.b.x>this.a.x)this.hb(c),c.Pa()};a.prototype.Jb=function(){b.prototype.Jb.call(this);
var a=this.ab;a.qa=k.Ab(a.qa,this.Pc);this.Ac?a.Ea=this.Ac:(a.Cache(),this.Ac=a.Ea);.5<Math.random()||(a.qa=k.Ab(n.ka.color.active,this.Pc),this.mc?a.Ea=this.mc:(a.Cache(),this.mc=a.Ea))};return a}(n.f)})(m||(m={}));
(function(f){var h=k.X,e=function(c){function b(){c.call(this,{Qa:15,ta:15,Ha:"",Wa:10});this.Sc="SEE THIS RED SQUARE?;THIS IS ITS TRAJECTORY;YOUR GOAL IS TO;REVERSE ITS TRAJECTORY;LIKE THAT;SO IT WILL HIT THE BOTTOM;THEN YOU WILL EARN POINTS;BUT YOU HAVE TO DO THIS;BEFORE TIME RUNS OUT;GOT IT?;".split(";")}l(b,c);b.prototype.j=function(){var a=this;c.prototype.j.call(this);var b=this.c.a.x/2;this.Da=1;var e=new r.w(b,100);e.ba(15);e.h.Set(.5,.5);this.Zd=e;this.mb=0;var f=new r.w(b,130,"TAP TO CONTINIUE");
f.h.Set(.5,.5);f.ba(10);f.ea=.7;this.gc=f;this.kb.Pa();this.fa=new k.ob;this.$.ia(1.5,function(){a.Da=0;e.$a(a.Sc[a.mb++]);a.c.g(f);a.c.g(e);a.fa.Ka(a.c,a.uc.bind(a))})};b.prototype.uc=function(){var a=this;this.Zd.$a(this.Sc[this.mb]);switch(this.mb){case 1:this.fd(this.f.wa);break;case 2:case 3:break;case 4:this.Td(this.f.wa);break;case 5:this.Da=1;if(1>this.f.v){this.gc.Oa&&this.gc.Pa();this.$.ia(.1,function(){return a.uc()});return}this.Da=0;this.c.g(this.gc);this.$.Kc();break;case 6:this.Da=
1;this.$.ia(1.5,function(){return a.Da=0});break;case 7:break;case 8:this.Da=1,this.f.m(this.f.wb-5.5),this.$.ia(5.3,function(){return a.Da=0});case 9:break;case 10:this.l.Play("select");n.yb.Ic(!0);return;default:throw Error();}this.mb+=1};b.prototype.fd=function(a){var b=h.Sa;h.aa(a.ja,b);h.i(b,10);h.la(b,a.b,b);a.La(a.b);a.La(b)};b.prototype.Td=function(a){var b=h.Sa;a.da=[];h.aa(a.ja,b);h.la(b,a.b,b);a.La(a.b);a.La(b);b.Set(this.f.a.x/2+k.tb(-30,30),this.f.a.y/2+50);a.La(b);b.Set(this.f.a.x/2,
this.f.a.y+50);a.La(b)};return b}(f.Jc);f.ae=e})(m||(m={}));var v=new k.l("canvas");v.lb("splash",new m.Wd);v.lb("menu",new m.Id);v.lb("select",new m.Ad);v.lb("tutorial",new m.ae);v.Play("splash");v.j();
