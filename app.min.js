var k;
(function(e){var g=function(){function d(b){this.Nc={};this.xc=this.Qc=0;this.jb=[];this.ha=document.getElementById(b);this.gd=this.ha.getContext("2d");this.Jc=window.requestAnimationFrame.bind(window,this.Fd.bind(this))}d.prototype.mb=function(b,c){this.Nc[b]=c};d.prototype.Play=function(b){this.Ua&&this.ed();if(this.Ua=this.Nc[b])this.Ua.m=this,this.Ua.j();else throw Error();};d.prototype.j=function(){this.Jc()};d.prototype.Va=function(b,c,a){this.jb.push({element:b,type:c,listener:a});b.addEventListener(c,a)};
d.prototype.Kd=function(b,c,a){for(var h=0,f=this.jb;h<f.length;h++){var m=f[h];if(m.element===b&&m.type===c&&m.listener===a){e.Hc(this.jb,m);b.removeEventListener(c,a);return}}throw Error("Couldn't find event listener.");};d.prototype.ed=function(){for(var b=this.jb.length-1;0<=b;--b){var c=this.jb[b];this.Kd(c.element,c.type,c.listener)}this.jb=[];this.Ua.jd&&this.Ua.jd()};d.prototype.Fd=function(b){var c=b-this.xc;50<c&&(c=50);this.Qc=c/1E3;this.Ua.l(this.Qc);this.Ua.na(this.gd);this.xc=b;this.Jc()};
return d}();e.m=g})(k||(k={}));(function(e){var g=function(){function d(b,c){void 0===b&&(b=0);void 0===c&&(c=0);this.x=b;this.y=c}d.prototype.Set=function(b,c){this.x=b;this.y=c};d.prototype.Z=function(){return new d(this.x,this.y)};return d}();e.ab=g})(k||(k={}));
(function(e){(function(g){function d(a,h){void 0===a&&(a=0);void 0===h&&(h=0);return new e.ab(a,h)}function b(a,h){if(h)h.x=a.x,h.y=a.y;else return d(a.x,a.y)}function c(a){return Math.sqrt(a.x*a.x+a.y*a.y)}g.de=new e.ab;g.Ta=new e.ab;g.u=d;g.Z=b;g.ud=function(a){return 0===a.x&&0===a.y};g.ma=function(a,h,f){f.x=a.x+h.x;f.y=a.y+h.y};g.Sa=function(a,h,f){f.x=a.x-h.x;f.y=a.y-h.y};g.yc=function(a,h,f){f.x=a.x*h.x;f.y=a.y*h.y};g.i=function(a,h,f){void 0===f&&(f=a);f.x=a.x*h;f.y=a.y*h};g.sb=c;g.Kb=function(a){var h;
void 0===h&&(h=a);var f=c(a);0<f&&(h.x=a.x/f,h.y=a.y/f)};g.Pd=function(a,h,f){void 0===f&&(f=a);var c=Math.sin(h);h=Math.cos(h);a===f&&(a=b(a));f.x=a.x*h-a.y*c;f.y=a.x*c+a.y*h};g.ae=function(a){return Math.atan2(a.y,a.x)};g.rd=function(a,c){c.x=0<a.x?1/a.x:0;c.y=0<a.y?1/a.y:0};g.be=function(a,c){return a.x*c.x+a.y*c.y}})(e.X||(e.X={}))})(k||(k={}));
var l=this&&this.ee||function(e,g){function d(){this.constructor=e}for(var b in g)g.hasOwnProperty(b)&&(e[b]=g[b]);d.prototype=g.prototype;e.prototype=new d};
(function(e){var g=function(){function d(b,c,a,h){this.b=e.X.u(b,c);this.a=e.X.u(a,h);this.h=e.X.u(0,0);this.i=e.X.u(1,1);this.Ba=0;this.ea=1;this.rb=!0}d.prototype.na=function(b){this.rb&&(b.save(),b.globalAlpha*=this.ea,b.translate(this.b.x,this.b.y),b.scale(this.i.x,this.i.y),b.rotate(this.Ba),e.X.ud(this.h)||b.translate(-this.h.x*this.a.x,-this.h.y*this.a.y),this.Ea?this.kd(b):this.Fa(b),b.restore())};d.prototype.Fa=function(){throw Error("Unimplemented");};d.prototype.kd=function(b){b.drawImage(this.Ea,
0,0)};d.prototype.dc=function(b,c){var a,h=e.X.Ta;c?(e.X.Z(b,c),a=c):a=e.X.Z(b);this.Oa&&this.Oa.dc(b,a);e.X.Sa(a,this.b,a);e.X.Z(this.i,h);e.X.rd(h,h);e.X.yc(a,h,a);e.X.Pd(a,-this.Ba,a);e.X.Z(this.h,h);e.X.yc(h,this.a,h);e.X.ma(a,h,a);if(!c)return a};d.prototype.Eb=function(b){b=this.dc(b);var c=0<b.y&&b.y<this.a.y;return 0<b.x&&b.x<this.a.x&&c};d.prototype.Pa=function(){this.Oa.vb(this)};d.prototype.Cache=function(){this.Ea=document.createElement("canvas");this.Ea.width=this.a.x;this.Ea.height=
this.a.y;this.Fa(this.Ea.getContext("2d"))};return d}();e.Ob=g;g=function(d){function b(c,a,h,f){void 0===c&&(c=0);void 0===a&&(a=0);void 0===h&&(h=0);void 0===f&&(f=0);d.call(this,c,a,h,f);this.Ab=[]}l(b,d);b.prototype.f=function(c){if(c.Oa)throw Error("Child has parent");c.Oa=this;this.Ab.push(c)};b.prototype.vb=function(c){var a=this.Ab.indexOf(c);if(0<=a)c.Oa=void 0,this.Ab.splice(a,1);else throw Error("Child doesn't exist in this layer");};b.prototype.Fa=function(c){for(var a=0,h=this.Ab;a<h.length;a++)h[a].na(c)};
return b}(g);e.Ha=g})(k||(k={}));
(function(e){function g(a,c,f){var b=f.pageX,d=f.pageY,g=f.target.getBoundingClientRect(),b=new e.ab(b-g.left,d-g.top);a.call(c,b,f)}function d(a,c,f){var m=0,d=0;if("touchend"!==f.type){var m=f.targetTouches[0].pageX,d=f.targetTouches[0].pageY,e=f.target.getBoundingClientRect();b.Set(m-e.left,d-e.top)}a.call(c,b.Z(),f);f.preventDefault()}var b=new e.ab;e.Xb=function(a,c){return g.bind(null,a,c)};e.Yb=function(a,c){return d.bind(null,a,c)};var c=function(){function a(){this.Ac=[];this.Dc=[]}a.prototype.Da=
function(a,f){var c=0;this.Ac.push({object:a,action:function(){return c=Date.now()}});this.Dc.push({object:a,action:function(){450>Date.now()-c&&f()}});return this};a.prototype.Ya=function(a){this.vc(this.Ac,a)};a.prototype.tb=function(){};a.prototype.fb=function(a){this.vc(this.Dc,a)};a.prototype.vc=function(a,f){for(var c=0;c<a.length;c++){var b=a[c],d=b.action;b.object.Eb(f)&&d()}};a.prototype.l=function(){};return a}();e.pb=c})(k||(k={}));var n;
(function(e){var g=function(){function d(){this.Nb=new k.ab(320,370)}d.prototype.j=function(){var b=this;this.c=new k.Ha(0,0,320,370);this.o=new k.Tc;this.aa=new k.Rc;this.cb=new k.cb(180);this.m.Va(window,"resize",function(){return b.ua()})};d.prototype.l=function(b){this.aa.l(b);this.o.l(b)};d.prototype.na=function(b){b.clearRect(0,0,b.canvas.width,b.canvas.height);this.c.na(b)};d.prototype.Ya=function(b){this.fa.Ya(b)};d.prototype.tb=function(b){this.fa.tb(b)};d.prototype.fb=function(b){this.fa.fb(b)};
d.prototype.ua=function(){var b=window.innerHeight,c=Math.min(window.innerWidth/this.Nb.x,b/this.Nb.y);this.c.i.Set(c,c);this.c.a.Set(this.Nb.x,b/c);b=Math.floor(this.c.a.x*c);this.m.ha.width!==b&&(this.m.ha.width=b);c=Math.floor(this.c.a.y*c);this.m.ha.height!==c&&(this.m.ha.height=c)};d.prototype.Vb=function(){if(!this.fa)throw Error();this.m.Va(this.m.ha,"mousemove",k.Xb(this.tb,this));this.m.Va(this.m.ha,"mousedown",k.Xb(this.Ya,this));this.m.Va(this.m.ha,"mouseup",k.Xb(this.fb,this))};d.prototype.Wb=
function(){if(!this.fa)throw Error();this.m.Va(this.m.ha,"touchmove",k.Yb(this.tb,this));this.m.Va(this.m.ha,"touchstart",k.Yb(this.Ya,this));this.m.Va(this.m.ha,"touchend",k.Yb(this.fb,this))};return d}();e.yb=g})(n||(n={}));var p,q=p||(p={});(q.la||(q.la={})).color={active:"#88A825",gc:"#911146",Zc:"#ED8C2B",background:"#35203B"};var u;
(function(e){var g=function(){function d(b,c,a){void 0===a&&(a="white");this.Ga=b;this.a=c;this.qa=a;this.kc={};this.ra=c/b.Wa.Sb;this.Ma=b.Wa.Lb*this.ra;this.Cache=document.createElement("canvas");this.Cache.width=Object.keys(b.Ub).length*Math.ceil(this.Ma+this.ra);this.Cache.height=c;console.log("FontCache Size",this.a,"DotPx",this.ra,"Color",this.qa);this.Ld()}d.prototype.pc=function(b,c,a,h,f,m){void 0===a&&(a=0);void 0===h&&(h=0);void 0===f&&(f=1);void 0===m&&(m=f);b.drawImage(this.Cache,this.kc[c],
0,this.Ma,this.a,a,h,this.Ma*f,this.a*m)};d.prototype.Ld=function(){var b=this.Cache.getContext("2d"),c=0;b.fillStyle=this.qa;for(var a in this.Ga.Ub){this.Md(b,a);this.kc[a]=c;var h=Math.ceil(this.Ma+this.ra),c=c+h;b.translate(h,0)}};d.prototype.Md=function(b,c){for(var a=this.Ga,h=this.ra,f=0;f<a.Wa.Lb;++f)for(var m=0;m<a.Wa.Sb;++m)a.Ub[c][m*a.Wa.Lb+f]&&b.fillRect(f*h,m*h,h,h)};return d}();e.md=g})(u||(u={}));
(u||(u={})).Hd={Wa:{Lb:3,Sb:5},Ub:{"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],".":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],",":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],":":[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"?":[1,1,0,0,0,1,0,1,1,0,0,0,0,1,0],"\u2665":[1,0,1,1,1,1,1,1,1,0,1,0,0,0,0],0:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],1:[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,0],6:[0,
1,1,1,0,0,1,1,1,1,0,1,1,1,1],7:[1,1,1,0,0,1,0,1,0,0,1,0,0,1,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],9:[1,1,1,1,0,1,1,1,1,0,0,1,1,1,0],A:[0,1,0,1,0,1,1,1,1,1,0,1,1,0,1],B:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,0],C:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],D:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],E:[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],F:[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],G:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],H:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],I:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],J:[1,1,1,0,1,0,0,1,0,0,1,0,1,0,0],K:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,
1],L:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],N:[0,0,1,1,0,1,1,1,1,1,0,1,1,0,0],M:[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],O:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],P:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],Q:[1,1,1,1,0,1,1,0,1,1,1,0,0,0,1],R:[1,1,0,1,0,1,1,1,0,1,0,1,1,0,1],S:[1,1,1,1,0,0,1,1,0,0,0,1,1,1,1],T:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],U:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],W:[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],V:[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],Y:[1,0,1,1,0,1,1,0,1,0,1,0,0,1,0]},Cache:{}};
(function(e){var g=function(d){function b(c,a,b,f){void 0===b&&(b="");void 0===f&&(f={a:20,qa:"white",Ga:e.Hd});d.call(this,c,a,0,0);this.Text=b;this.ca=f;this.ib(f.qa);this.ba(f.a)}l(b,d);b.prototype.ib=function(c){this.Db=this.ca.Ga.Cache[c]?this.ca.Ga.Cache[c]:this.ca.Ga.Cache[c]=new e.md(this.ca.Ga,20,c)};b.prototype.Qa=function(c){this.Text=c;this.Xc()};b.prototype.ba=function(c){this.ca.a=c;this.ra=c/this.ca.Ga.Wa.Sb;this.Ma=this.ca.Ga.Wa.Lb*this.ra;this.Xc()};b.prototype.Fa=function(c){for(var a=
this.ca.a/this.Db.a,b=0;b<this.Text.length;++b){var f=this.Text[b];" "!==f&&this.Db.pc(c,f,0,0,a);c.translate(this.Ma+this.ra,0)}};b.prototype.Xc=function(){this.a.x=(this.Ma+this.ra)*this.Text.length-this.ra;this.a.y=this.ca.a};return b}(k.Ob);e.Text=g;g=function(d){function b(){d.apply(this,arguments)}l(b,d);b.prototype.na=function(c){if(this.rb){var a=this.ca.a/this.Db.a,b=this.b,f=b.x,b=b.y,f=f-this.a.x*this.h.x*this.i.x,b=b-this.a.y*this.h.y*this.i.y,m=c.globalAlpha;c.globalAlpha*=this.ea;for(var d=
0;d<this.Text.length;++d){var e=this.Text[d];" "!==e&&this.Db.pc(c,e,f,b,a*this.i.x,a*this.i.y);f+=(this.Ma+this.ra)*this.i.x}c.globalAlpha=m}};b.prototype.Cache=function(){throw Error("Use gfx.Text if you want cache");};return b}(g);e.w=g})(u||(u={}));
(function(e){e.Hc=function(d,b){var c=d.indexOf(b);if(0<=c)d.splice(c,1);else throw Error();};e.Vd=function(d,b){var c=d.indexOf(b);0<=c&&d.splice(c,1)};e.vd=function(d){return d[d.length-1]};e.zb=function(d,b){var c=d.substr(1).match(/.{2}/g).map(function(a){return parseInt(a,16)}),c=c.map(function(a){return Math.min(a*b,255)|0});return"#"+((c[0]<<16)+(c[1]<<8)+c[2]+16777216).toString(16).substr(1)};var g=function(){function d(b){void 0===b&&(b=60);this.Fc=b;this.Id=0;this.Gb=Array(b);for(var c=
0;c<b;++c)this.Gb[c]=0}d.prototype.l=function(b){this.Gb[this.Id++%this.Gb.length]=b};d.prototype.tc=function(){return 1/this.nd()};d.prototype.nd=function(){for(var b=0,c=0;c<this.Fc;++c)b+=this.Gb[c];return b/this.Fc};return d}();e.cb=g;g=function(){function d(){this.mc=[]}d.prototype.ma=function(b,c){this.mc.push([b,c]);return this};d.prototype.cd=function(){for(var b=0,c=this.mc;b<c.length;b++){var a=c[b];a[0].call(a[1])}};return d}();e.dd=g})(k||(k={}));
(function(e){var g=function(){function b(c,a){this.wb=c;this.Aa=a;this.sa=0;this.Jb=[];this.Bb=0;this.Zb=new e.dd;this.bc=this.Tb=!1}b.prototype.j=function(){var c=this.Rb();c.Aa&&(c.IsPlaying()&&c.Aa.Pc(c),c.Aa.Sd(c));for(;c;)c.Tb=!1,c.sa=0,c=c.$;return this};b.prototype.s=function(c,a,b){void 0===a&&(a=1);void 0===b&&(b=d.zd);this.Jb=[];for(var f in c)this.Jb.push({key:f,start:0,Yc:0,end:c[f]});this.Bb=a;this.ld=b;return this};b.prototype.xa=function(c){this.zc=c;return this};b.prototype.ga=function(c){void 0===
c&&(c=this.wb);this.$=c=new b(c,this.Aa);c.pa=this;return c};b.prototype.ac=function(c,a){this.Zb.ma(function(){if(this.Aa)a(this.Aa.u(c).j());else throw Error();},this);return this};b.prototype.ia=function(c){return this.ga().s({},c)};b.prototype.Nd=function(){for(var c=this;c;c=c.pa)c.bc=!c.bc;return this};b.prototype.Ad=function(){var c=this;this.Zb.ma(function(){setTimeout(c.j.bind(c),0)});return this};b.prototype.l=function(c){for(var a=this;a;)if(0===a.sa&&a.pd(),a.sa+=c,a.sa<=a.Bb){a.Uc(a.sa);
break}else a.Tb||(a.Uc(a.Bb),a.zc&&a.zc(a.wb),a.Aa&&!a.$&&a.Aa.Pc(a.Rb()),a.Tb=!0),a=a.$};b.prototype.Rb=function(){for(var c=this;c.pa;)c=c.pa;return c};b.prototype.IsPlaying=function(){if(this.Aa)return 0<=this.Aa.o.indexOf(this.Rb());throw Error();};b.prototype.Uc=function(c){for(var a=0,b=this.Jb;a<b.length;a++){var f=b[a];this.wb[f.key]=this.ld(c,f.start,f.Yc,this.Bb)}};b.prototype.pd=function(){for(var c=0,a=this.Jb;c<a.length;c++){var b=a[c];if(this.bc){var f=b.start||this.wb[b.key];b.start=
b.end;b.end=f}else b.start=this.wb[b.key];b.Yc=b.end-b.start}this.Zb.cd()};return b}();e.Xd=g;var d;(function(b){b.zd=function(c,a,b,f){return b*c/f+a};b.Na=function(c,a,b,f){c/=f;c--;return b*(c*c*c+1)+a};b.Mc=function(c,a,b,f){return-b/2*(Math.cos(Math.PI*c/f)-1)+a}})(d=e.ya||(e.ya={}));g=function(){function b(){this.o=[]}b.prototype.u=function(c){return new e.Xd(c,this)};b.prototype.Sd=function(c){this.o.push(c)};b.prototype.Pc=function(c){e.Hc(this.o,c)};b.prototype.l=function(c){for(var a=0,
b=this.o;a<b.length;a++)b[a].l(c)};return b}();e.Tc=g})(k||(k={}));
(function(e){var g=function(d){function b(){d.apply(this,arguments)}l(b,d);b.prototype.j=function(){var b=this;d.prototype.j.call(this);this.m.ha.style.background="black";this.ja=new k.Ha;this.ja.i.Set(.5,.5);var a=new u.w(0,0,"A GAME BY KAKUS");a.h.Set(.5,.5);var h=new u.w(0,a.a.y+10,"MADE FOR JS13K WITH ");h.h.Set(.5,.5);var f=new u.w(h.a.x/2,h.b.y,"\u2665");f.h.Set(0,.5);f.ib("red");var m=new u.w(0,h.b.y+300,"2015");m.h.Set(.5,.5);this.ja.f(a);this.ja.f(h);this.ja.f(f);this.ja.f(m);this.c.ea=0;
this.o.u(this.c).s({ea:1}).ga().ia(1).ga().s({ea:0}).xa(function(){return b.m.Play("menu")}).j();this.c.f(this.ja);this.ua()};b.prototype.ua=function(){d.prototype.ua.call(this);this.ja.b.Set(this.c.a.x/2,this.c.a.y/3)};return b}(e.yb);e.Rd=g})(n||(n={}));
(function(e){var g=function(d){function b(b,a,h,f,m){void 0===m&&(m={fillStyle:"red"});d.call(this,b,a,h,f);this.ca=m}l(b,d);b.prototype.Fa=function(b){this.ca.fc&&(b.globalCompositeOperation=this.ca.fc);this.ca.fillStyle&&(b.fillStyle=this.ca.fillStyle,b.fillRect(0,0,this.a.x,this.a.y));this.ca.strokeStyle&&(b.strokeStyle=this.ca.strokeStyle,b.strokeRect(0,0,this.a.x,this.a.y))};return b}(k.Ob);e.Za=g})(u||(u={}));
(function(e){e.ub=function(e,d){if(d<e)throw Error();return e+Math.random()*(d-e)}})(k||(k={}));
(function(e){var g=function(){function b(b,a,h,f){void 0===f&&(f=NaN);this.lc=b;this.oc=a;this.ia=h;this.qd=f;this.bb=this.sa=0}b.prototype.l=function(b){this.sa+=b;this.sa>this.ia&&(0===this.bb&&(this.lc.call(this.oc,b),this.bb+=1),this.sa-this.ia>this.qd*this.bb&&(this.lc.call(this.oc,b),this.bb+=1))};return b}();e.ce=g;var d=function(){function b(){this.aa=[]}b.prototype.ia=function(b,a,h){var f=this,m;this.aa.push(m=new g(function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];
e.Vd(f.aa,m);a.apply(h,b)},h,b));return m};b.prototype.Ic=function(b,a,h,f){void 0===f&&(f=0);this.aa.push(new g(a,h,f,b))};b.prototype.l=function(b){for(var a=0,h=this.aa;a<h.length;a++)h[a].l(b)};b.prototype.Gc=function(){this.aa=[]};return b}();e.Rc=d})(k||(k={}));
(function(e){(function(g){var d=k.X,b=k.X.Ta,c=function(a){function c(){a.apply(this,arguments);this.ka=d.u(0,0);this.da=[];this.qa="red";this.v=1}l(c,a);c.prototype.l=function(a){this.qb()?(this.qa=1<this.g.Fb?e.la.color.Zc:e.la.color.active,this.Zd(a)):(d.Z(this.ka,b),d.i(b,a),d.ma(this.b,b,this.b))};c.prototype.Fa=function(){throw Error("Unimplemented");};c.prototype.qb=function(){return 1<this.da.length};c.prototype.La=function(a){if(!(100<this.da.length)){var c=k.vd(this.da),h=2>this.da.length;
if(c){if(d.Sa(a,c,b),a=d.sb(b),20<a){d.Kb(b);d.i(b,20);for(var e=d.Z(b);20<a;)d.ma(c,e,b),this.da.push(c=d.Z(b)),a-=20;if(h){h=this.da;c=h[0];h=h[1];d.Sa(h,c,b);a=this.ka;var g;void 0===g&&(g=.01);(0===a.y||0===b.y?a.y===b.y:Math.abs(Math.abs(a.x/a.y)-Math.abs(b.x/b.y))<g)||(g=d.sb(this.ka),d.Sa(h,this.b,this.ka),d.Kb(this.ka),d.Z(this.ka,c),d.i(c,10),d.ma(this.b,c,c),d.i(this.ka,g))}}}else this.da.push(d.Z(a))}};c.prototype.Zd=function(a){var c=d.sb(this.ka);a=c*a;for(var h=0;0<a;)if(d.Sa(this.da[0],
this.b,b),0<(h=d.sb(b))-a){d.Kb(b);d.Z(b,this.ka);d.i(b,a);d.ma(this.b,b,this.b);d.i(this.ka,c);break}else if(a-=h,d.ma(this.b,b,this.b),this.da.shift(),this.v+=this.g.Fb,1>this.da.length)break};return c}(k.Ob);g.$c=c})(e.Mb||(e.Mb={}))})(p||(p={}));
(function(e){(function(e){var d=function(b){function c(a,c,f,m){b.call(this,a,c,f,m);this.oa=new u.Text(0,0);this.oa.h.Set(.5,.5);this.oa.b.Set(f/2,m/2)}l(c,b);c.prototype.l=function(a){this.Ba+=1*Math.PI*a;b.prototype.l.call(this,a)};c.prototype.Fa=function(a){a.globalCompositeOperation="xor";a.fillStyle=this.qa;a.fillRect(0,0,this.a.x,this.a.y);this.oa.Qa(this.v.toFixed(0));this.oa.Ba=-this.Ba;this.oa.na(a)};return c}(e.$c);e.Jd=d})(e.Mb||(e.Mb={}))})(p||(p={}));
(function(e){var g=k.X,d=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.na=function(b){var c=b.globalCompositeOperation;b.globalCompositeOperation="xor";a.prototype.na.call(this,b);b.globalCompositeOperation=c};return b}(u.w),b=function(a){function b(){a.apply(this,arguments)}l(b,a);b.prototype.na=function(b){var c=b.globalCompositeOperation;b.globalCompositeOperation="destination-over";a.prototype.na.call(this,b);b.globalCompositeOperation=c};return b}(u.w),c=function(a){function c(f,
m,h){void 0===h&&(h={Ra:3,ta:15});a.call(this,0,0,f,m);this.za=h;this.v=0;this.Fb=1;this.xb=this.za.ta;this.td=!1;this.o=new k.Tc;this.aa=new k.Rc;this.aa.Ic(this.za.Ra,this.Hb,this);this.aa.ia(this.za.ta,this.$b,this);this.aa.Ic(1,this.$d,this,this.za.ta-5.5);this.Ka=new b(f/2,f/3);this.Ka.h.Set(.5,.5);this.Ka.ib(k.zb(e.la.color.background,1.4));this.Ka.ba(120)}l(c,a);c.prototype.l=function(a){this.xb-=a;this.o.l(a);this.aa.l(a);0<=this.xb&&(this.Ka.Qa(this.xb.toFixed(0)),this.ec(a),this.Yd())};
c.prototype.ec=function(a){for(var b=this.wa;b;b=b.$)if(b.g){b.l(a);if(b.qb())for(var c=b.$;c;c=c.$)c.qb()&&this.sd(b,c)&&this.Dd(b,c);b.b.y<-b.a.y/2?this.Bc(b):b.b.x>this.a.x||0>b.b.x?this.Bc(b):b.b.y>this.a.y&&this.Ed(b)}};c.prototype.Yd=function(){for(var a=[],b=this.wa;b;b=b.$)b.qb()&&a.push(b);var c=4>a.length?1:a.length/2|0;if(0<c-this.Fb)for(var h=0;h<a.length;h++)b=a[h],this.o.u(b.i).s({x:1.5,y:1.5},.2,k.ya.Na).ga().s({x:1,y:1},.2).j();this.Fb=c};c.prototype.ad=function(a){this.$a?(this.$a.$=
a,a.pa=this.$a,this.$a=a):this.wa=this.$a=a;a.g=this};c.prototype.gb=function(a){a.$?a.pa?(a.pa.$=a.$,a.$.pa=a.pa):(a.$.pa=null,this.wa=a.$):a.pa?(a.pa.$=null,this.$a=a.pa):this.wa=this.$a=null;a.g=void 0};c.prototype.od=function(a){for(var b=this.wa;b;b=b.$)if(b.Eb(a))return b;return null};c.prototype.sc=function(a){if(!(2>a.da.length)){var b=a.da[a.da.length-1],c=g.Ta;g.Sa(b,a.da[a.da.length-2],c);g.i(c,20);g.ma(b,c,c);a.La(c)}};c.prototype.Fa=function(b){b.strokeStyle=e.la.color.active;b.setLineDash([3,
9]);b.lineWidth=2;for(var c=this.wa;c;c=c.$)if(c.qb()){b.beginPath();b.moveTo(c.b.x,c.b.y);for(var h=0,d=c.da;h<d.length;h++){var g=d[h];b.lineTo(g.x,g.y)}b.stroke()}a.prototype.Fa.call(this,b);this.Ka.na(b)};c.prototype.sd=function(a,b){var c=g.Ta;g.Sa(a.b,b.b,c);return g.sb(c)<(a.a.x+b.a.x)/2};c.prototype.Bc=function(a){var b=Math.min(-a.v,-10);this.v+=b;a.b.y+=a.a.y/2;this.Pb(a.b,b);this.gb(a);this.vb(a);this.Hb()};c.prototype.Ed=function(a){this.v+=a.v;this.Pb(a.b,a.v);this.gb(a);this.vb(a)};
c.prototype.Dd=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];b.forEach(function(b){a.gb(b);a.o.u(b).s({ea:0},2).xa(function(){return b.Pa()}).j()})};c.prototype.$b=function(){var a=this;this.aa.Gc();var b=this.o.u(null);b.j();for(var c=this.wa;c;c=c.$)if(1<c.v){var h=this.o.u(c.i).s({x:2,y:2},.3,k.ya.Na).ga(c).s({v:c.v/2|0},.5).xa(function(b){var c=Math.round(b.v);a.Pb(b.b,c);a.v+=c}).ga(c.i).s({x:5,y:5},.35).ac(c,function(a){return a.s({ea:0},.35)}).ga(c).xa(function(b){a.vb(b);
a.gb(b)});b.ga(h).xa(function(a){return a.j()});b=h}b.ga().xa(function(){a.Cc&&a.Cc();for(var b=a.wa;b;b=b.$)if(1>=b.v&&b.g){var c=k.ub(0,.6);a.o.u(b.i).ia(c).ga().s({x:5,y:5},.35).ac(b,function(a){return a.s({ea:0},.25)}).ga(b).xa(function(b){a.vb(b);a.gb(b)}).j()}a.td=!0})};c.prototype.Hb=function(){var a=new e.Mb.Jd(k.ub(15,this.a.x-15),this.a.y-5,30,30);a.qa=e.la.color.gc;a.h.Set(.5,.5);a.ea=0;a.i.Set(.1,.1);var b=g.Ta;b.y=0;b.x=k.ub(15,this.a.x-15);g.Sa(a.b,b,b);g.Kb(b);g.i(b,k.ub(-80,-60));
g.Z(b,a.ka);this.o.u(a).s({ea:1},.2).j();this.o.u(a.i).s({x:1,y:1},.2).j();this.ad(a);this.f(a)};c.prototype.Pb=function(a,b){var c=new d(a.x,a.y,(0<b?"+":"")+b);c.h.Set(.5,.5);c.ib(0<b?e.la.color.active:e.la.color.gc);this.f(c);var h=0<b?2:1;this.o.u(c.i).s({x:h,y:h},.5,k.ya.Na).ia(.3).ga(c).s({ea:0},.3).xa(function(){c.Pa()}).j();if(0>a.x||a.x>this.a.x){var g=0<a.x?1:-1;this.o.u(c.b).s({x:a.x-g*c.a.x*h},.2).j()}else g=0<a.y?1:-1,this.o.u(c.b).s({y:a.y-g*c.a.y*h},.2).j()};c.prototype.$d=function(){this.Ka.i.Set(2,
2);this.o.u(this.Ka.i).ia(.1).ga().s({x:1,y:1},.4).j()};return c}(k.Ha);e.g=c})(p||(p={}));(function(e){(function(e){e.nc=function(d){return Math.max(Math.min(d,1),0)}})(e.hc||(e.hc={}))})(k||(k={}));
(function(e){var g=function(b){function c(a){void 0===a&&(a={Ra:3,ta:1,Ia:"",Xa:100});b.call(this);this.za=a}l(c,b);c.prototype.j=function(){var a=this;b.prototype.j.call(this);this.Ca=0;this.g=new p.g(this.c.a.x,this.c.a.y,this.za);this.g.Cc=function(){return a.aa.ia(1,a.$b,a)};this.c.f(this.g);this.fa=new d(this);this.Vb();this.Wb();this.c.f(this.jc=new u.Za(0,this.g.a.y,this.g.a.x,30,{fillStyle:"rgba(0, 0, 0, 0.5)"}));this.kb=new u.w(0,0,"TAP TO START");this.kb.h.Set(.5,.5);this.c.f(this.kb);this.oa=
new u.w(0,0);this.oa.h.Set(.5,.5);this.oa.ba(15);this.c.f(this.oa);this.hb=new u.w(0,0,"RESTART");this.hb.ba(10);this.hb.h.Set(1,.5);this.c.f(this.hb);this.eb=new u.w(0,0,"MENU");this.eb.ba(10);this.eb.h.Set(0,.5);this.c.f(this.eb);this.Cb=new u.w(0,0);this.Cb.ba(10);this.c.f(this.Cb);this.fa.Da(this.hb,function(){return a.m.Play("game")}).Da(this.eb,function(){return a.m.Play("select")});this.ua()};c.prototype.l=function(a){b.prototype.l.call(this,a);this.cb.l(a);this.fa.l();this.g.l(a*this.Ca);
this.Cb.Qa(this.cb.tc().toFixed(1));this.oa.Qa(this.g.v.toString())};c.prototype.na=function(a){a.clearRect(0,0,a.canvas.width,a.canvas.height);this.c.na(a)};c.prototype.$b=function(){var a=this;this.za.Ia&&this.g.v>p.lb.uc(this.za.Ia)&&p.lb.Qd(this.za.Ia,this.g.v);var b=new k.Ha(this.c.a.x/2,150);this.g.Ka.rb=!1;var c=k.hc.nc(this.g.v/this.za.Xa),d=new e.wd(0,0);d.h.Set(.5,.5);d.Sc(this.o,c);c=new u.Text(0,100,"RESTART");c.ba(20);c.h.Set(.5,.5);c.ib(p.la.color.background);var g=new u.Za(c.b.x,c.b.y,
c.a.x+20,c.a.y+10,{fillStyle:"white"});g.h.Set(.5,.5);var r=new u.w(0,160,"LEVEL SELECT");r.h.Set(.5,.5);b.f(d);b.f(g);b.f(c);b.f(r);this.c.f(b);this.eb.Pa();this.hb.Pa();this.o.u(this.oa.b).s({y:100},1,k.ya.Na).ac(this.oa.i,function(a){return a.s({x:2,y:2})}).j();this.fa=(new k.pb).Da(c,function(){return a.m.Play("game")}).Da(r,function(){return a.m.Play("select")})};c.prototype.ua=function(){b.prototype.ua.call(this);this.g.a.y=this.c.a.y-this.jc.a.y;this.jc.b.Set(0,this.g.a.y);this.kb.b.Set(this.g.a.x/
2,this.g.a.y/2);this.oa.b.Set(this.g.a.x/2,this.g.a.y+13.5);this.hb.b.Set(this.g.a.x-10,this.g.a.y+13.5);this.eb.b.Set(10,this.g.a.y+13.5);this.Cb.b.Set(10.5,10.5)};return c}(e.yb);e.Ec=g;var d=function(b){function c(a){b.call(this);this.Ja=a;this.ob=new k.ab}l(c,b);c.prototype.Ya=function(a){k.X.Z(a,this.ob);var c=this.Ja.g.od(this.ob);c&&(c.da=[],this.va=c);b.prototype.Ya.call(this,a)};c.prototype.fb=function(a){this.Ja.kb.Oa&&(this.Ja.Ca=1,this.Ja.kb.Pa());this.va&&(this.Ja.g.sc(this.va),this.va=
void 0);b.prototype.fb.call(this,a)};c.prototype.tb=function(a){k.X.Z(a,this.ob);!this.va&&this.Ja.g.Eb(a)&&this.Ya(a);this.va&&!this.Ja.g.Eb(this.ob)&&(this.Ja.g.sc(this.va),this.va=void 0)};c.prototype.l=function(){this.va&&(this.va.Oa?this.va.La(this.Ja.g.dc(this.ob)):this.va=void 0)};return c}(k.pb)})(n||(n={}));
(function(e){var g=function(c){function a(){c.apply(this,arguments);this.yd=[{Ia:"World1.Level1",Ra:6,ta:5,Xa:15},{Ia:"World1.Level2",Ra:3,ta:15,Xa:200},{Ia:"World1.Level3",Ra:3,ta:30,Xa:650},{Ia:"World1.Level4",Ra:3,ta:60,Xa:1E3}]}l(a,c);a.prototype.j=function(){var a=this;c.prototype.j.call(this);this.m.ha.style.background=p.la.color.background;this.fa=new k.pb;this.Vb();this.Wb();var d=new u.w(this.c.a.x/2,10,"CHALLANGE");d.h.Set(.5,0);d.ba(10);this.c.f(d);d=new u.w(this.c.a.x/2,30,"PRECISION");
d.h.Set(.5,0);this.c.f(d);var g=[];this.yd.forEach(function(c,d){var f=new b(d,c);f.b.Set(d&1?a.c.a.x+f.a.x:-f.a.x,120+70*d);f.h.Set(.5,.5);a.c.f(f);var t=a.o.u(f.b).s({x:a.c.a.x/2},1,k.ya.Na).xa(function(){return f.Td(a.o)}).j();g.push([f,t]);a.fa.Da(f,function(){a.o.u(f.i).s({x:1.1,y:1.1},1,k.ya.Na).xa(function(){a.m.mb("game",new e.Ec(c));a.m.Play("game")}).j();for(var b=0;b<g.length;b++){var d=g[b],t=d[1];d[0]!==f&&t.Nd().j()}})});d=new u.w(40,30,"MENU");d.h.Set(.5,.5);d.ba(10);var t=new u.Za(d.b.x,
d.b.y,50,30,{strokeStyle:"white"});t.h.Set(.5,.5);t.rb=!1;this.c.f(t);this.fa.Da(t,function(){return a.m.Play("menu")});this.c.f(d);this.ua()};a.prototype.l=function(){this.o.l(.016)};return a}(e.yb);e.xd=g;var d=function(b){function a(a,d){b.call(this,a,d,200,20);var e=new u.w(5,5,"BAD");e.ba(10);this.f(e);e=new u.w(195,5,"AWESOME");e.ba(10);e.h.Set(1,0);this.f(e);e=new u.Za(.5,.5,200,20,{strokeStyle:"white"});this.f(e);e=new u.Za(1.5,1.5,198,18,{fillStyle:"white",fc:"xor"});e.i.Set(0,1);this.f(this.rc=
e)}l(a,b);a.prototype.Sc=function(a,b){var c=this,d=a.u(this.rc.i).s({x:b},1,k.ya.Na).j();1===b&&d.xa(function(){return c.rc.ca.fillStyle=p.la.color.Zc})};return a}(k.Ha);e.wd=d;var b=function(b){function a(a,f){b.call(this,0,0,250,40);this.hd=f;var e=new u.w(0,0,a.toString());e.ba(40);e.ib(p.la.color.gc);this.f(e);this.v=p.lb.uc(f.Ia);e=new u.w(50,0,"HI-SCORE: "+this.v);e.ba(10);this.f(e);e=new u.w(251,0,"TIME: "+f.ta);e.ba(10);e.h.Set(1,0);this.f(e);this.Kc=new d(50,20);this.f(this.Kc);e=new u.Za(125,
20,270,60,{fillStyle:"rgba(0, 0, 0, 0.5)",fc:"destination-over"});e.h.Set(.5,.5);this.f(e)}l(a,b);a.prototype.Td=function(a){var b=k.hc.nc(this.v/this.hd.Xa);this.Kc.Sc(a,b)};return a}(k.Ha)})(n||(n={}));
(function(e){var g=function(){function d(){}Object.defineProperty(d.prototype,"PassedTutorial",{get:function(){return!!localStorage.getItem("UserPassedTutorial")},set:function(b){localStorage.setItem("UserPassedTutorial",""+b)},enumerable:!0,configurable:!0});d.prototype.uc=function(b){return parseInt(localStorage.getItem("HiScore."+b),10)||0};d.prototype.Qd=function(b,c){localStorage.setItem("HiScore."+b,c.toString())};d.prototype.fd=function(){localStorage.clear()};return d}();e.lb=new g})(p||(p=
{}));
(function(e){var g=k.X,d=function(c){function a(){c.apply(this,arguments);this.Ib=0}l(a,c);a.prototype.j=function(){var a=this;c.prototype.j.call(this);this.Vc=[];this.Wc=12;this.fa=new k.pb;this.Vb();this.Wb();this.Qb=new u.w(10,10);this.Qb.ba(10);this.c.f(this.Qb);this.ja=new k.Ha;var b=new u.Text(0,0,"SHAPES \u2665 NUMBERS");b.Cache();b.h.Set(.5,.5);var d=new k.Ha(0,100);d.h.Set(.5,.5);d.i.Set(2,2);var e=new u.Text(5,5,"PLAY"),r=new u.Za(0,0,e.a.x+10,e.a.y+10,{strokeStyle:"white",fillStyle:"rgba(0, 0, 0, 0.2)"});d.f(e);
d.f(r);g.Z(r.a,d.a);d.Cache();e=new u.Text(0,200,"TUTORIAL");e.Cache();e.h.Set(.5,.5);r=new u.Text(0,260,"VOTE");r.Cache();r.h.Set(.5,.5);var v=new u.w(0,280,"CLEAR DATA");v.h.Set(.5,.5);v.ba(10);this.ja.f(b);this.ja.f(d);this.ja.f(e);this.ja.f(r);this.fa.Da(d,function(){return a.m.Play(p.lb.Gd?"select":"tutorial")}).Da(e,function(){return a.m.Play("tutorial")}).Da(v,function(){p.lb.fd();v.Qa("DONE")});this.o.u(d).s({Ba:Math.PI/12},2,k.ya.Mc).ga().s({Ba:-Math.PI/12},2,k.ya.Mc).ga().Ad().j();this.c.ea=
0;this.o.u(this.c).s({ea:1}).j();this.ua();this.Bd();this.c.f(this.ja)};a.prototype.l=function(a){this.Ib+=a;this.cb.l(a);this.Qb.Qa(this.cb.tc().toFixed(1));a=.016;1>this.Ib&&(this.m.ha.style.background=k.zb(p.la.color.background,this.Ib));for(var b=0,d=this.Vc;b<d.length;b++)d[b].l(a*this.Wc);c.prototype.l.call(this,a)};a.prototype.ua=function(){c.prototype.ua.call(this);this.ja.b.Set(this.c.a.x/2,this.c.a.y/5)};a.prototype.Bd=function(){for(var a=new k.Ha,c=2;1<=c;--c){g.Z(this.c.a,a.a);var d=
1/(c/2+1),e=new b(a.a.x,a.a.y,{Ra:.5,ta:1E9});e.i.Set(d,(c&1?-1:1)*d);e.h.Set(.5,.5);e.ea=d;g.i(e.a,1/d);e.Ka.rb=!1;a.f(e);this.Vc.push(e)}a.b.Set(this.c.a.x/2,this.c.a.y/2);this.c.f(a);this.o.u(this).s({Wc:1},2,k.ya.Na).j()};return a}(e.yb);e.Cd=d;var b=function(b){function a(){b.apply(this,arguments);this.Lc=1}l(a,b);a.prototype.l=function(a){this.o.l(a);this.aa.l(a);this.ec(a)};a.prototype.ec=function(a){for(var b=g.Ta,c=this.wa;c;c=c.$)if(g.Z(c.ka,b),g.i(b,a),g.ma(c.b,b,c.b),c.Ba+=Math.PI/80,
0>c.b.x||c.b.x>this.a.x||0>c.b.y||c.b.y>this.a.y)this.gb(c),c.Pa()};a.prototype.Hb=function(){b.prototype.Hb.call(this);var a=this.$a;a.qa=k.zb(a.qa,this.Lc);this.wc?a.Ea=this.wc:(a.Cache(),this.wc=a.Ea);.5<Math.random()||(a.qa=k.zb(p.la.color.active,this.Lc),this.ic?a.Ea=this.ic:(a.Cache(),this.ic=a.Ea))};return a}(p.g)})(n||(n={}));
(function(e){var g=k.X,d=function(b){function c(){b.call(this,{Ra:15,ta:15,Ia:"",Xa:10});this.Oc="SEE THIS RED SQUARE?;THIS IS ITS TRAJECTORY;YOUR GOAL IS TO;REVERSE ITS TRAJECTORY;LIKE THAT;SO IT WILL HIT THE BOTTOM;THEN YOU WILL EARN POINTS;BUT YOU HAVE TO;DO THIS BEFORE;TIME RUN OUT;GOT IT?;".split(";")}l(c,b);c.prototype.j=function(){var a=this;b.prototype.j.call(this);var c=this.c.a.x/2;this.Ca=1;var d=new u.w(c,100);d.ba(15);d.h.Set(.5,.5);this.Ud=d;this.nb=0;var e=new u.w(c,130,"TAP TO CONTINIUE");
e.h.Set(.5,.5);e.ba(10);e.ea=.7;this.cc=e;this.kb.Pa();this.fa=new k.pb;this.aa.ia(1.5,function(){a.Ca=0;d.Qa(a.Oc[a.nb++]);a.c.f(e);a.c.f(d);a.fa.Da(a.c,a.qc.bind(a))})};c.prototype.qc=function(){var a=this;this.Ud.Qa(this.Oc[this.nb]);switch(this.nb){case 1:this.bd(this.g.wa);break;case 2:case 3:break;case 4:this.Od(this.g.wa);break;case 5:this.Ca=1;if(1>this.g.v){this.cc.Oa&&this.cc.Pa();this.aa.ia(.1,function(){return a.qc()});return}this.Ca=0;this.c.f(this.cc);this.aa.Gc();break;case 6:this.Ca=
1;this.aa.ia(1.5,function(){return a.Ca=0});break;case 7:case 8:break;case 9:this.Ca=1,this.g.l(this.g.xb-5.5),this.aa.ia(5.3,function(){return a.Ca=0});case 10:break;case 11:this.m.Play("select");p.lb.Gd=!0;return;default:throw Error();}this.nb+=1};c.prototype.bd=function(a){var b=g.Ta;g.Z(a.ka,b);g.i(b,10);g.ma(b,a.b,b);a.La(a.b);a.La(b)};c.prototype.Od=function(a){var b=g.Ta;a.da=[];g.Z(a.ka,b);g.ma(b,a.b,b);a.La(a.b);a.La(b);b.Set(this.g.a.x/2+k.ub(-30,30),this.g.a.y/2+50);a.La(b);b.Set(this.g.a.x/
2,this.g.a.y+50);a.La(b)};return c}(e.Ec);e.Wd=d})(n||(n={}));var w=new k.m("canvas");w.mb("splash",new n.Rd);w.mb("menu",new n.Cd);w.mb("select",new n.xd);w.mb("tutorial",new n.Wd);w.Play("splash");w.j();
