var k;
(function(f){var h=function(){function d(c){this.Rc={};this.Bc=this.Uc=0;this.jb=[];this.ha=document.getElementById(c);this.kd=this.ha.getContext("2d");this.Nc=window.requestAnimationFrame.bind(window,this.Ld.bind(this))}d.prototype.lb=function(c,a){this.Rc[c]=a};d.prototype.Play=function(c){this.Ta&&this.jd();if(this.Ta=this.Rc[c])this.Ta.l=this,this.Ta.j();else throw Error();};d.prototype.j=function(){this.Nc()};d.prototype.Ua=function(c,a,b){this.jb.push({element:c,type:a,listener:b});c.addEventListener(a,b)};
d.prototype.Pd=function(c,a,b){for(var e=0,g=this.jb;e<g.length;e++){var p=g[e];if(p.element===c&&p.type===a&&p.listener===b){f.Lc(this.jb,p);c.removeEventListener(a,b);return}}throw Error("Couldn't find event listener.");};d.prototype.jd=function(){for(var c=this.jb.length-1;0<=c;--c){var a=this.jb[c];this.Pd(a.element,a.type,a.listener)}this.jb=[];this.Ta.md&&this.Ta.md()};d.prototype.Ld=function(c){var a=c-this.Bc;50<a&&(a=50);this.Uc=a/1E3;this.Ta.m(this.Uc);this.Ta.ma(this.kd);this.Bc=c;this.Nc()};
return d}();f.l=h})(k||(k={}));(function(f){var h=function(){function d(c,a){void 0===c&&(c=0);void 0===a&&(a=0);this.x=c;this.y=a}d.prototype.Set=function(c,a){this.x=c;this.y=a};d.prototype.aa=function(c){return c?(c.x=this.x,c.y=this.y,c):new d(this.x,this.y)};return d}();f.bb=h})(k||(k={}));
(function(f){(function(h){function d(b,e){void 0===b&&(b=0);void 0===e&&(e=0);return new f.bb(b,e)}function c(b,e){if(e)e.x=b.x,e.y=b.y;else return d(b.x,b.y)}function a(b){return Math.sqrt(b.x*b.x+b.y*b.y)}h.je=new f.bb;h.Sa=new f.bb;h.u=d;h.aa=c;h.xd=function(b){return 0===b.x&&0===b.y};h.la=function(b,e,g){g.x=b.x+e.x;g.y=b.y+e.y};h.Ra=function(b,e,g){g.x=b.x-e.x;g.y=b.y-e.y};h.Cc=function(b,e,g){g.x=b.x*e.x;g.y=b.y*e.y};h.i=function(b,e,g){void 0===g&&(g=b);g.x=b.x*e;g.y=b.y*e};h.rb=a;h.Mb=function(b){var e;
void 0===e&&(e=b);var g=a(b);0<g&&(e.x=b.x/g,e.y=b.y/g)};h.Ud=function(b,e,g){void 0===g&&(g=b);var a=Math.sin(e);e=Math.cos(e);b===g&&(b=c(b));g.x=b.x*e-b.y*a;g.y=b.x*a+b.y*e};h.ge=function(b){return Math.atan2(b.y,b.x)};h.ud=function(b,e){e.x=0<b.x?1/b.x:0;e.y=0<b.y?1/b.y:0};h.he=function(b,e){return b.x*e.x+b.y*e.y}})(f.X||(f.X={}))})(k||(k={}));
var l=this&&this.ke||function(f,h){function d(){this.constructor=f}for(var c in h)h.hasOwnProperty(c)&&(f[c]=h[c]);d.prototype=h.prototype;f.prototype=new d};
(function(f){var h=function(){function d(c,a,b,e){this.b=f.X.u(c,a);this.a=f.X.u(b,e);this.h=f.X.u(0,0);this.i=f.X.u(1,1);this.Ca=0;this.ea=1;this.qb=!0}d.prototype.ma=function(c){this.qb&&(c.save(),c.globalAlpha*=this.ea,c.translate(this.b.x,this.b.y),c.scale(this.i.x,this.i.y),c.rotate(this.Ca),f.X.xd(this.h)||c.translate(-this.h.x*this.a.x,-this.h.y*this.a.y),this.Ea?this.nd(c):this.Fa(c),c.restore())};d.prototype.Fa=function(){throw Error("Unimplemented");};d.prototype.nd=function(c){c.drawImage(this.Ea,
0,0)};d.prototype.hc=function(c,a){var b,e=f.X.Sa;a?(f.X.aa(c,a),b=a):b=f.X.aa(c);this.Oa&&this.Oa.hc(c,b);f.X.Ra(b,this.b,b);f.X.aa(this.i,e);f.X.ud(e,e);f.X.Cc(b,e,b);f.X.Ud(b,-this.Ca,b);f.X.aa(this.h,e);f.X.Cc(e,this.a,e);f.X.la(b,e,b);if(!a)return b};d.prototype.Gb=function(c){c=this.hc(c);var a=0<c.y&&c.y<this.a.y;return 0<c.x&&c.x<this.a.x&&a};d.prototype.Pa=function(){this.Oa.ub(this)};d.prototype.Cache=function(){this.Ea=document.createElement("canvas");this.Ea.width=this.a.x;this.Ea.height=
this.a.y;this.Fa(this.Ea.getContext("2d"))};return d}();f.Pb=h;h=function(d){function c(a,b,e,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===e&&(e=0);void 0===g&&(g=0);d.call(this,a,b,e,g);this.Bb=[]}l(c,d);c.prototype.g=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(b=0;b<a.length;b++){var e=a[b];if(e.Oa)throw Error("Child has parent");e.Oa=this;this.Bb.push(e)}};c.prototype.ub=function(a){var b=this.Bb.indexOf(a);if(0<=b)a.Oa=void 0,this.Bb.splice(b,1);else throw Error("Child doesn't exist in this layer");
};c.prototype.Fa=function(a){for(var b=0,e=this.Bb;b<e.length;b++)e[b].ma(a)};return c}(h);f.Aa=h})(k||(k={}));
(function(f){function h(b,e,g){var a=g.pageX,c=g.pageY,d=g.target.getBoundingClientRect(),a=new f.bb(a-d.left,c-d.top);b.call(e,a,g)}function d(b,e,g){var a=0,d=0;if("touchend"!==g.type){var a=g.targetTouches[0].pageX,d=g.targetTouches[0].pageY,f=g.target.getBoundingClientRect();c.Set(a-f.left,d-f.top)}b.call(e,c.aa(),g);g.preventDefault()}var c=new f.bb;f.Yb=function(b,e){return h.bind(null,b,e)};f.Zb=function(b,e){return d.bind(null,b,e)};var a=function(){function b(){this.Ec=[];this.Hc=[]}b.prototype.Ka=
function(b,g){var a=0;this.Ec.push({object:b,action:function(){return a=Date.now()}});this.Hc.push({object:b,action:function(){450>Date.now()-a&&g()}});return this};b.prototype.Xa=function(b){this.zc(this.Ec,b)};b.prototype.sb=function(){};b.prototype.gb=function(b){this.zc(this.Hc,b)};b.prototype.zc=function(b,g){for(var a=0;a<b.length;a++){var c=b[a],d=c.action;c.object.Gb(g)&&d()}};b.prototype.m=function(){};return b}();f.ob=a})(k||(k={}));var m;
(function(f){var h=function(){function d(){this.Cb=new k.bb(320,370)}d.prototype.j=function(){var c=this;this.c=new k.Aa(0,0,320,370);this.o=new k.Xc;this.$=new k.Vc;this.eb=new k.eb(120);this.l.Ua(window,"resize",function(){return c.ua()})};d.prototype.m=function(c){this.$.m(c);this.o.m(c)};d.prototype.ma=function(c){c.clearRect(0,0,c.canvas.width,c.canvas.height);this.c.ma(c)};d.prototype.Xa=function(c){this.fa.Xa(c)};d.prototype.sb=function(c){this.fa.sb(c)};d.prototype.gb=function(c){this.fa.gb(c)};
d.prototype.ua=function(){var c=window.innerHeight,a=Math.min(window.innerWidth/this.Cb.x,c/this.Cb.y);this.c.i.Set(a,a);this.c.a.Set(this.Cb.x,c/a);c=Math.floor(this.c.a.x*a);this.l.ha.width!==c&&(this.l.ha.width=c);a=Math.floor(this.c.a.y*a);this.l.ha.height!==a&&(this.l.ha.height=a)};d.prototype.Wb=function(){if(!this.fa)throw Error();this.l.Ua(this.l.ha,"mousemove",k.Yb(this.sb,this));this.l.Ua(this.l.ha,"mousedown",k.Yb(this.Xa,this));this.l.Ua(this.l.ha,"mouseup",k.Yb(this.gb,this))};d.prototype.Xb=
function(){if(!this.fa)throw Error();this.l.Ua(this.l.ha,"touchmove",k.Zb(this.sb,this));this.l.Ua(this.l.ha,"touchstart",k.Zb(this.Xa,this));this.l.Ua(this.l.ha,"touchend",k.Zb(this.gb,this))};return d}();f.zb=h})(m||(m={}));var n,q=n||(n={});(q.ka||(q.ka={})).color={active:"#88A825",kc:"#911146",cd:"#ED8C2B",background:"#35203B"};var r;
(function(f){var h=function(){function d(c,a,b){void 0===b&&(b="white");this.Ga=c;this.a=a;this.qa=b;this.oc={};this.ra=a/c.Va.Tb;this.Ma=c.Va.Nb*this.ra;this.Cache=document.createElement("canvas");this.Cache.width=Object.keys(c.Vb).length*Math.ceil(this.Ma+this.ra);this.Cache.height=a;console.log("FontCache Size",this.a,"DotPx",this.ra,"Color",this.qa);this.Qd()}d.prototype.tc=function(c,a,b,e,g,p){void 0===b&&(b=0);void 0===e&&(e=0);void 0===g&&(g=1);void 0===p&&(p=g);c.drawImage(this.Cache,this.oc[a],
0,this.Ma,this.a,b,e,this.Ma*g,this.a*p)};d.prototype.Qd=function(){var c=this.Cache.getContext("2d"),a=0;c.fillStyle=this.qa;for(var b in this.Ga.Vb){this.Rd(c,b);this.oc[b]=a;var e=Math.ceil(this.Ma+this.ra),a=a+e;c.translate(e,0)}};d.prototype.Rd=function(c,a){for(var b=this.Ga,e=this.ra,g=0;g<b.Va.Nb;++g)for(var p=0;p<b.Va.Tb;++p)b.Vb[a][p*b.Va.Nb+g]&&c.fillRect(g*e,p*e,e,e)};return d}();f.pd=h})(r||(r={}));
(r||(r={})).Md={Va:{Nb:3,Tb:5},Vb:{"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],".":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],",":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],":":[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"?":[1,1,0,0,0,1,0,1,1,0,0,0,0,1,0],"\u2665":[1,0,1,1,1,1,1,1,1,0,1,0,0,0,0],0:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],1:[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,0],6:[0,
1,1,1,0,0,1,1,1,1,0,1,1,1,1],7:[1,1,1,0,0,1,0,1,0,0,1,0,0,1,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],9:[1,1,1,1,0,1,1,1,1,0,0,1,1,1,0],A:[0,1,0,1,0,1,1,1,1,1,0,1,1,0,1],B:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,0],C:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],D:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],E:[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],F:[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],G:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],H:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],I:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],J:[1,1,1,0,1,0,0,1,0,0,1,0,1,0,0],K:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,
1],L:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],N:[0,0,1,1,0,1,1,1,1,1,0,1,1,0,0],M:[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],O:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],P:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],Q:[1,1,1,1,0,1,1,0,1,1,1,0,0,0,1],R:[1,1,0,1,0,1,1,1,0,1,0,1,1,0,1],S:[1,1,1,1,0,0,1,1,0,0,0,1,1,1,1],T:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],U:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],W:[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],V:[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],Y:[1,0,1,1,0,1,1,0,1,0,1,0,0,1,0]},Cache:{}};
(function(f){var h=function(d){function c(a,b,e,g){void 0===e&&(e="");void 0===g&&(g={a:20,qa:"white",Ga:f.Md});d.call(this,a,b,0,0);this.Text=e;this.ca=g;this.Za(g.qa);this.ba(g.a)}l(c,d);c.prototype.Za=function(a){this.Fb=this.ca.Ga.Cache[a]?this.ca.Ga.Cache[a]:this.ca.Ga.Cache[a]=new f.pd(this.ca.Ga,20,a)};c.prototype.$a=function(a){this.Text=a;this.ad()};c.prototype.ba=function(a){this.ca.a=a;this.ra=a/this.ca.Ga.Va.Tb;this.Ma=this.ca.Ga.Va.Nb*this.ra;this.ad()};c.prototype.Fa=function(a){for(var b=
this.ca.a/this.Fb.a,e=0;e<this.Text.length;++e){var g=this.Text[e];" "!==g&&this.Fb.tc(a,g,0,0,b);a.translate(this.Ma+this.ra,0)}};c.prototype.ad=function(){this.a.x=(this.Ma+this.ra)*this.Text.length-this.ra;this.a.y=this.ca.a};return c}(k.Pb);f.Text=h;h=function(d){function c(){d.apply(this,arguments)}l(c,d);c.prototype.ma=function(a){if(this.qb){var b=this.ca.a/this.Fb.a,e=this.b,g=e.x,e=e.y,g=g-this.a.x*this.h.x*this.i.x,e=e-this.a.y*this.h.y*this.i.y,c=a.globalAlpha;a.globalAlpha*=this.ea;for(var d=
0;d<this.Text.length;++d){var f=this.Text[d];" "!==f&&this.Fb.tc(a,f,g,e,b*this.i.x,b*this.i.y);g+=(this.Ma+this.ra)*this.i.x}a.globalAlpha=c}};c.prototype.Cache=function(){throw Error("Use gfx.Text if you want cache");};return c}(h);f.w=h})(r||(r={}));
(function(f){f.Lc=function(d,c){var a=d.indexOf(c);if(0<=a)d.splice(a,1);else throw Error();};f.$d=function(d,c){var a=d.indexOf(c);0<=a&&d.splice(a,1)};f.yd=function(d){return d[d.length-1]};f.Ab=function(d,c){var a=d.substr(1).match(/.{2}/g).map(function(b){return parseInt(b,16)}),a=a.map(function(b){return Math.min(b*c,255)|0});return"#"+((a[0]<<16)+(a[1]<<8)+a[2]+16777216).toString(16).substr(1)};var h=function(){function d(c){void 0===c&&(c=60);this.ec=c;this.Nd=0;this.fc=Array(c);for(var a=
0;a<c;++a)this.fc[a]=0}d.prototype.m=function(c){this.fc[this.Nd++%this.ec]=c};d.prototype.xc=function(){return 1/this.qd()};d.prototype.qd=function(){for(var c=0,a=0;a<this.ec;++a)c+=this.fc[a];return c/this.ec};return d}();f.eb=h;h=function(){function d(){this.qc=[]}d.prototype.la=function(c,a){this.qc.push([c,a]);return this};d.prototype.gd=function(){for(var c=0,a=this.qc;c<a.length;c++){var b=a[c];b[0].call(b[1])}};return d}();f.hd=h})(k||(k={}));
(function(f){var h=function(){function c(a,b){this.vb=a;this.Ba=b;this.sa=0;this.Lb=[];this.Db=0;this.ac=new f.hd;this.dc=this.Ub=!1}c.prototype.j=function(){var a=this.Sb();a.Ba&&(a.IsPlaying()&&a.Ba.Tc(a),a.Ba.Xd(a));for(;a;)a.Ub=!1,a.sa=0,a=a.Z;return this};c.prototype.s=function(a,b,e){void 0===b&&(b=1);void 0===e&&(e=d.Cd);this.Lb=[];for(var g in a)this.Lb.push({key:g,start:0,bd:0,end:a[g]});this.Db=b;this.od=e;return this};c.prototype.xa=function(a){this.Dc=a;return this};c.prototype.ga=function(a){void 0===
a&&(a=this.vb);this.Z=a=new c(a,this.Ba);a.pa=this;return a};c.prototype.cc=function(a,b){this.ac.la(function(){if(this.Ba)b(this.Ba.u(a).j());else throw Error();},this);return this};c.prototype.ia=function(a){return this.ga().s({},a)};c.prototype.Sd=function(){for(var a=this;a;a=a.pa)a.dc=!a.dc;return this};c.prototype.Dd=function(){var a=this;this.ac.la(function(){setTimeout(a.j.bind(a),0)});return this};c.prototype.m=function(a){for(var b=this;b;)if(0===b.sa&&b.sd(),b.sa+=a,b.sa<=b.Db){b.Yc(b.sa);
break}else b.Ub||(b.Yc(b.Db),b.Dc&&b.Dc(b.vb),b.Ba&&!b.Z&&b.Ba.Tc(b.Sb()),b.Ub=!0),b=b.Z};c.prototype.Sb=function(){for(var a=this;a.pa;)a=a.pa;return a};c.prototype.IsPlaying=function(){if(this.Ba)return 0<=this.Ba.o.indexOf(this.Sb());throw Error();};c.prototype.Yc=function(a){for(var b=0,e=this.Lb;b<e.length;b++){var g=e[b];this.vb[g.key]=this.od(a,g.start,g.bd,this.Db)}};c.prototype.sd=function(){for(var a=0,b=this.Lb;a<b.length;a++){var e=b[a];if(this.dc){var g=e.start||this.vb[e.key];e.start=
e.end;e.end=g}else e.start=this.vb[e.key];e.bd=e.end-e.start}this.ac.gd()};return c}();f.ce=h;var d;(function(c){c.Cd=function(a,b,e,g){return e*a/g+b};c.Na=function(a,b,e,g){a/=g;a--;return e*(a*a*a+1)+b};c.Qc=function(a,b,e,g){return-e/2*(Math.cos(Math.PI*a/g)-1)+b}})(d=f.ya||(f.ya={}));h=function(){function c(){this.o=[]}c.prototype.u=function(a){return new f.ce(a,this)};c.prototype.Xd=function(a){this.o.push(a)};c.prototype.Tc=function(a){f.Lc(this.o,a)};c.prototype.m=function(a){for(var b=0,
e=this.o;b<e.length;b++)e[b].m(a)};return c}();f.Xc=h})(k||(k={}));
(function(f){var h=function(d){function c(){d.apply(this,arguments)}l(c,d);c.prototype.j=function(){var a=this;d.prototype.j.call(this);this.l.ha.style.background="black";this.oa=new k.Aa;this.oa.i.Set(.5,.5);var b=new r.w(0,0,"A GAME BY KAKUS");b.h.Set(.5,.5);var e=new k.Aa(0,b.a.y+10),g=new r.w(0,0,"MADE WITH "),c=new r.w(g.a.x,0,"\u2665");c.Za("red");var f=new r.w(c.b.x+c.a.x,0," FOR JS13K");e.h.Set(.5,.5);e.a.Set(f.b.x+f.a.x,f.a.y);e.g(g,c,f);g=new r.w(0,e.b.y+300,"2015");g.h.Set(.5,.5);this.oa.g(b);
this.oa.g(e);this.oa.g(g);this.c.ea=0;this.o.u(this.c).s({ea:1}).ga().ia(1).ga().s({ea:0}).xa(function(){return a.l.Play("menu")}).j();this.c.g(this.oa);this.ua()};c.prototype.ua=function(){d.prototype.ua.call(this);this.oa.b.Set(this.c.a.x/2,this.c.a.y/3)};return c}(f.zb);f.Wd=h})(m||(m={}));
(function(f){var h=function(d){function c(a,b,e,g,c){void 0===c&&(c={fillStyle:"red"});d.call(this,a,b,e,g);this.ca=c}l(c,d);c.prototype.Fa=function(a){this.ca.jc&&(a.globalCompositeOperation=this.ca.jc);this.ca.fillStyle&&(a.fillStyle=this.ca.fillStyle,a.fillRect(0,0,this.a.x,this.a.y));this.ca.strokeStyle&&(a.strokeStyle=this.ca.strokeStyle,a.strokeRect(0,0,this.a.x,this.a.y))};return c}(k.Pb);f.Ya=h})(r||(r={}));
(function(f){f.tb=function(f,d){if(d<f)throw Error();return f+Math.random()*(d-f)}})(k||(k={}));
(function(f){var h=function(){function c(a,b,e,g){void 0===g&&(g=NaN);this.pc=a;this.sc=b;this.ia=e;this.td=g;this.cb=this.sa=0}c.prototype.m=function(a){this.sa+=a;this.sa>this.ia&&(0===this.cb&&(this.pc.call(this.sc,a),this.cb+=1),this.sa-this.ia>this.td*this.cb&&(this.pc.call(this.sc,a),this.cb+=1))};return c}();f.ie=h;var d=function(){function c(){this.$=[]}c.prototype.ia=function(a,b,e){var g=this,c;this.$.push(c=new h(function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];f.$d(g.$,
c);b.apply(e,a)},e,a));return c};c.prototype.Mc=function(a,b,e,g){void 0===g&&(g=0);this.$.push(new h(b,e,g,a))};c.prototype.m=function(a){for(var b=0,e=this.$;b<e.length;b++)e[b].m(a)};c.prototype.Kc=function(){this.$=[]};return c}();f.Vc=d})(k||(k={}));
(function(f){(function(h){var d=k.X,c=k.X.Sa,a=function(b){function a(){b.apply(this,arguments);this.ja=d.u(0,0);this.da=[];this.qa="red";this.v=1}l(a,b);a.prototype.m=function(b){this.pb()?(this.qa=1<this.f.Hb?f.ka.color.cd:f.ka.color.active,this.ee(b)):(d.aa(this.ja,c),d.i(c,b),d.la(this.b,c,this.b))};a.prototype.Fa=function(){throw Error("Unimplemented");};a.prototype.pb=function(){return 1<this.da.length};a.prototype.La=function(b){if(!(100<this.da.length)){var a=k.yd(this.da),e=2>this.da.length;
if(a){if(d.Ra(b,a,c),b=d.rb(c),20<b){d.Mb(c);d.i(c,20);for(var f=d.aa(c);20<b;)d.la(a,f,c),this.da.push(a=d.aa(c)),b-=20;if(e){e=this.da;a=e[0];e=e[1];d.Ra(e,a,c);b=this.ja;var h;void 0===h&&(h=.01);(0===b.y||0===c.y?b.y===c.y:Math.abs(Math.abs(b.x/b.y)-Math.abs(c.x/c.y))<h)||(h=d.rb(this.ja),d.Ra(e,this.b,this.ja),d.Mb(this.ja),d.aa(this.ja,a),d.i(a,10),d.la(this.b,a,a),d.i(this.ja,h))}}}else this.da.push(d.aa(b))}};a.prototype.ee=function(b){var a=d.rb(this.ja);b=a*b;for(var e=0;0<b;)if(d.Ra(this.da[0],
this.b,c),0<(e=d.rb(c))-b){d.Mb(c);d.aa(c,this.ja);d.i(c,b);d.la(this.b,c,this.b);d.i(this.ja,a);break}else if(b-=e,d.la(this.b,c,this.b),this.da.shift(),this.v+=this.f.Hb,1>this.da.length)break};return a}(k.Pb);h.dd=a})(f.Ob||(f.Ob={}))})(n||(n={}));
(function(f){(function(f){var d=function(c){function a(b,a,g,p){c.call(this,b,a,g,p);this.na=new r.Text(0,0);this.na.h.Set(.5,.5);this.na.b.Set(g/2,p/2)}l(a,c);a.prototype.m=function(b){this.Ca+=1*Math.PI*b;c.prototype.m.call(this,b)};a.prototype.Fa=function(b){b.globalCompositeOperation="xor";b.fillStyle=this.qa;b.fillRect(0,0,this.a.x,this.a.y);this.na.$a(this.v.toFixed(0));this.na.Ca=-this.Ca;this.na.ma(b)};return a}(f.dd);f.Od=d})(f.Ob||(f.Ob={}))})(n||(n={}));
(function(f){var h=k.X,d=function(b){function a(){b.apply(this,arguments)}l(a,b);a.prototype.ma=function(a){var e=a.globalCompositeOperation;a.globalCompositeOperation="xor";b.prototype.ma.call(this,a);a.globalCompositeOperation=e};return a}(r.w),c=function(b){function a(){b.apply(this,arguments)}l(a,b);a.prototype.ma=function(a){var e=a.globalCompositeOperation;a.globalCompositeOperation="destination-over";b.prototype.ma.call(this,a);a.globalCompositeOperation=e};return a}(r.w),a=function(b){function a(g,
e,d){void 0===d&&(d={Qa:3,ta:15});b.call(this,0,0,g,e);this.za=d;this.v=0;this.Hb=1;this.wb=this.za.ta;this.wd=!1;this.o=new k.Xc;this.$=new k.Vc;this.$.Mc(this.za.Qa,this.Jb,this);this.$.ia(this.za.ta,this.bc,this);this.$.Mc(1,this.fe,this,this.za.ta-5.5);this.Ja=new c(g/2,g/3);this.Ja.h.Set(.5,.5);this.Ja.Za(k.Ab(f.ka.color.background,1.4));this.Ja.ba(120)}l(a,b);a.prototype.m=function(b){this.wb-=b;this.o.m(b);this.$.m(b);0<=this.wb&&(this.Ja.$a(this.wb.toFixed(0)),this.ic(b),this.de())};a.prototype.ic=
function(b){for(var a=this.wa;a;a=a.Z)if(a.f){a.m(b);if(a.pb())for(var c=a.Z;c;c=c.Z)c.pb()&&this.vd(a,c)&&this.Jd(a,c);a.b.y<-a.a.y/2?this.Fc(a):a.b.x>this.a.x||0>a.b.x?this.Fc(a):a.b.y>this.a.y&&this.Kd(a)}};a.prototype.de=function(){for(var b=[],a=this.wa;a;a=a.Z)a.pb()&&b.push(a);var c=4>b.length?1:b.length/2|0;if(0<c-this.Hb)for(var e=0;e<b.length;e++)a=b[e],this.o.u(a.i).s({x:1.5,y:1.5},.2,k.ya.Na).ga().s({x:1,y:1},.2).j();this.Hb=c};a.prototype.ed=function(a){this.ab?(this.ab.Z=a,a.pa=this.ab,
this.ab=a):this.wa=this.ab=a;a.f=this};a.prototype.hb=function(a){a.Z?a.pa?(a.pa.Z=a.Z,a.Z.pa=a.pa):(a.Z.pa=null,this.wa=a.Z):a.pa?(a.pa.Z=null,this.ab=a.pa):this.wa=this.ab=null;a.f=void 0};a.prototype.rd=function(a){for(var b=this.wa;b;b=b.Z)if(b.Gb(a))return b;return null};a.prototype.wc=function(a){if(!(2>a.da.length)){var b=a.da[a.da.length-1],c=h.Sa;h.Ra(b,a.da[a.da.length-2],c);h.i(c,20);h.la(b,c,c);a.La(c)}};a.prototype.Fa=function(a){a.strokeStyle=f.ka.color.active;a.setLineDash([3,9]);a.lineWidth=
2;for(var c=this.wa;c;c=c.Z)if(c.pb()){a.beginPath();a.moveTo(c.b.x,c.b.y);for(var e=0,d=c.da;e<d.length;e++){var h=d[e];a.lineTo(h.x,h.y)}a.stroke()}b.prototype.Fa.call(this,a);this.Ja.ma(a)};a.prototype.vd=function(a,b){var c=h.Sa;h.Ra(a.b,b.b,c);return h.rb(c)<(a.a.x+b.a.x)/2};a.prototype.Fc=function(a){var b=Math.min(-a.v,-10);this.v+=b;a.b.y+=a.a.y/2;this.Qb(a.b,b);this.hb(a);this.ub(a);this.Jb()};a.prototype.Kd=function(a){this.v+=a.v;this.Qb(a.b,a.v);this.hb(a);this.ub(a)};a.prototype.Jd=function(){for(var a=
this,b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];b.forEach(function(b){a.hb(b);a.o.u(b).s({ea:0},2).xa(function(){return b.Pa()}).j()})};a.prototype.bc=function(){var a=this;this.$.Kc();var b=this.o.u(null);b.j();for(var c=this.wa;c;c=c.Z)if(1<c.v){var e=this.o.u(c.i).s({x:2,y:2},.3,k.ya.Na).ga(c).s({v:c.v/2|0},.5).xa(function(b){var c=Math.round(b.v);a.Qb(b.b,c);a.v+=c}).ga(c.i).s({x:5,y:5},.35).cc(c,function(a){return a.s({ea:0},.35)}).ga(c).xa(function(b){a.ub(b);a.hb(b)});b.ga(e).xa(function(a){return a.j()});
b=e}b.ga().xa(function(){a.Gc&&a.Gc();for(var b=a.wa;b;b=b.Z)if(1>=b.v&&b.f){var c=k.tb(0,.6);a.o.u(b.i).ia(c).ga().s({x:5,y:5},.35).cc(b,function(a){return a.s({ea:0},.25)}).ga(b).xa(function(b){a.ub(b);a.hb(b)}).j()}a.wd=!0})};a.prototype.Jb=function(){var a=new f.Ob.Od(k.tb(15,this.a.x-15),this.a.y-5,30,30);a.qa=f.ka.color.kc;a.h.Set(.5,.5);a.ea=0;a.i.Set(.1,.1);var b=h.Sa;b.y=0;b.x=k.tb(15,this.a.x-15);h.Ra(a.b,b,b);h.Mb(b);h.i(b,k.tb(-80,-60));h.aa(b,a.ja);this.o.u(a).s({ea:1},.2).j();this.o.u(a.i).s({x:1,
y:1},.2).j();this.ed(a);this.g(a)};a.prototype.Qb=function(a,b){var c=new d(a.x,a.y,(0<b?"+":"")+b);c.h.Set(.5,.5);c.Za(0<b?f.ka.color.active:f.ka.color.kc);this.g(c);var e=0<b?2:1;this.o.u(c.i).s({x:e,y:e},.5,k.ya.Na).ia(.3).ga(c).s({ea:0},.3).xa(function(){c.Pa()}).j();if(0>a.x||a.x>this.a.x){var h=0<a.x?1:-1;this.o.u(c.b).s({x:a.x-h*c.a.x*e},.2).j()}else h=0<a.y?1:-1,this.o.u(c.b).s({y:a.y-h*c.a.y*e},.2).j()};a.prototype.fe=function(){this.Ja.i.Set(2,2);this.o.u(this.Ja.i).ia(.1).ga().s({x:1,y:1},
.4).j()};return a}(k.Aa);f.f=a})(n||(n={}));(function(f){(function(f){f.rc=function(d){return Math.max(Math.min(d,1),0)}})(f.lc||(f.lc={}))})(k||(k={}));
(function(f){var h=function(c){function a(a){void 0===a&&(a={Qa:3,ta:1,Ha:"",Wa:100});c.call(this);this.za=a}l(a,c);a.prototype.j=function(){var a=this;c.prototype.j.call(this);this.Da=0;this.f=new n.f(this.c.a.x,this.c.a.y,this.za);this.f.Gc=function(){return a.$.ia(1,a.bc,a)};this.c.g(this.f);this.fa=new d(this);this.Wb();this.Xb();this.c.g(this.nc=new r.Ya(0,this.f.a.y,this.f.a.x,30,{fillStyle:"rgba(0, 0, 0, 0.5)"}));this.kb=new r.w(0,0,"TAP TO START");this.kb.h.Set(.5,.5);this.c.g(this.kb);this.na=
new r.w(0,0);this.na.h.Set(.5,.5);this.na.ba(15);this.c.g(this.na);this.ib=new r.w(0,0,"RESTART");this.ib.ba(10);this.ib.h.Set(1,.5);this.c.g(this.ib);this.fb=new r.w(0,0,"MENU");this.fb.ba(10);this.fb.h.Set(0,.5);this.c.g(this.fb);this.Eb=new r.w(0,0);this.Eb.ba(10);this.c.g(this.Eb);this.fa.Ka(this.ib,function(){return a.l.Play("game")}).Ka(this.fb,function(){return a.l.Play("select")});this.ua()};a.prototype.m=function(a){c.prototype.m.call(this,a);this.eb.m(a);this.fa.m();this.f.m(a*this.Da);
this.Eb.$a(this.eb.xc().toFixed(1));this.na.$a(this.f.v.toString())};a.prototype.ma=function(a){a.clearRect(0,0,a.canvas.width,a.canvas.height);this.c.ma(a)};a.prototype.bc=function(){var a=this;this.za.Ha&&this.f.v>n.yb.yc(this.za.Ha)&&n.yb.Vd(this.za.Ha,this.f.v);var c=new k.Aa(this.c.a.x/2,150);this.f.Ja.qb=!1;var g=k.lc.rc(this.f.v/this.za.Wa),d=new f.zd(0,0);d.h.Set(.5,.5);d.Wc(this.o,g);g=new r.Text(0,100,"RESTART");g.ba(20);g.h.Set(.5,.5);g.Za(n.ka.color.background);var h=new r.Ya(g.b.x,g.b.y,
g.a.x+20,g.a.y+10,{fillStyle:"white"});h.h.Set(.5,.5);var u=new r.w(0,160,"LEVEL SELECT");u.h.Set(.5,.5);c.g(d);c.g(h);c.g(g);c.g(u);this.c.g(c);this.fb.Pa();this.ib.Pa();this.o.u(this.na.b).s({y:100},1,k.ya.Na).cc(this.na.i,function(a){return a.s({x:2,y:2})}).j();this.fa=(new k.ob).Ka(g,function(){return a.l.Play("game")}).Ka(u,function(){return a.l.Play("select")})};a.prototype.ua=function(){c.prototype.ua.call(this);this.f.a.y=this.c.a.y-this.nc.a.y;this.nc.b.Set(0,this.f.a.y);this.kb.b.Set(this.f.a.x/
2,this.f.a.y/2);this.na.b.Set(this.f.a.x/2,this.f.a.y+13.5);this.ib.b.Set(this.f.a.x-10,this.f.a.y+13.5);this.fb.b.Set(10,this.f.a.y+13.5);this.Eb.b.Set(10.5,10.5)};return a}(f.zb);f.Jc=h;var d=function(c){function a(a){c.call(this);this.Ia=a;this.nb=new k.bb}l(a,c);a.prototype.Xa=function(a){k.X.aa(a,this.nb);var e=this.Ia.f.rd(this.nb);e&&(e.da=[],this.va=e);c.prototype.Xa.call(this,a)};a.prototype.gb=function(a){this.Ia.kb.Oa&&(this.Ia.Da=1,this.Ia.kb.Pa());this.va&&(this.Ia.f.wc(this.va),this.va=
void 0);c.prototype.gb.call(this,a)};a.prototype.sb=function(a){k.X.aa(a,this.nb);!this.va&&this.Ia.f.Gb(a)&&this.Xa(a);this.va&&!this.Ia.f.Gb(this.nb)&&(this.Ia.f.wc(this.va),this.va=void 0)};a.prototype.m=function(){this.va&&(this.va.Oa?this.va.La(this.Ia.f.hc(this.nb)):this.va=void 0)};return a}(k.ob)})(m||(m={}));
(function(f){var h=function(a){function b(){a.apply(this,arguments);this.Bd=[{Ha:"World1.Level1",Qa:6,ta:5,Wa:15},{Ha:"World1.Level2",Qa:3,ta:15,Wa:200},{Ha:"World1.Level3",Qa:3,ta:30,Wa:650},{Ha:"World1.Level4",Qa:3,ta:60,Wa:2100}]}l(b,a);b.prototype.j=function(){var b=this;a.prototype.j.call(this);this.l.ha.style.background=n.ka.color.background;this.fa=new k.ob;this.Wb();this.Xb();var g=new r.w(this.c.a.x/2,10,"CHALLENGE");g.h.Set(.5,0);g.ba(10);this.c.g(g);g=new r.w(this.c.a.x/2,30,"PRECISION");
g.h.Set(.5,0);this.c.g(g);var d=[];this.Bd.forEach(function(a,g){var h=new c(g,a);h.b.Set(g&1?b.c.a.x+h.a.x:-h.a.x,120+70*g);h.h.Set(.5,.5);b.c.g(h);var t=b.o.u(h.b).s({x:b.c.a.x/2},1,k.ya.Na).xa(function(){return h.Yd(b.o)}).j();d.push([h,t]);b.fa.Ka(h,function(){b.o.u(h.i).s({x:1.1,y:1.1},1,k.ya.Na).xa(function(){b.l.lb("game",new f.Jc(a));b.l.Play("game")}).j();for(var c=0;c<d.length;c++){var g=d[c],t=g[1];g[0]!==h&&t.Sd().j()}})});g=new r.w(40,30,"MENU");g.h.Set(.5,.5);g.ba(10);var h=new r.Ya(g.b.x,
g.b.y,50,30,{strokeStyle:"white"});h.h.Set(.5,.5);h.qb=!1;this.c.g(h);this.fa.Ka(h,function(){return b.l.Play("menu")});this.c.g(g);this.ua()};return b}(f.zb);f.Ad=h;var d=function(a){function b(b,c){a.call(this,b,c,200,20);var d=new r.w(5,5,"BAD");d.ba(10);this.g(d);d=new r.w(195,5,"AWESOME");d.ba(10);d.h.Set(1,0);this.g(d);d=new r.Ya(.5,.5,200,20,{strokeStyle:"white"});this.g(d);d=new r.Ya(1.5,1.5,198,18,{fillStyle:"white",jc:"xor"});d.i.Set(0,1);this.g(this.vc=d)}l(b,a);b.prototype.Wc=function(a,
b){var c=this,d=a.u(this.vc.i).s({x:b},1,k.ya.Na).j();1===b&&d.xa(function(){return c.vc.ca.fillStyle=n.ka.color.cd})};return b}(k.Aa);f.zd=d;var c=function(a){function b(b,c){a.call(this,0,0,250,40);this.ld=c;var f=new r.w(0,0,b.toString());f.ba(40);f.Za(n.ka.color.kc);this.g(f);this.v=n.yb.yc(c.Ha);f=new r.w(50,0,"HI-SCORE: "+this.v);f.ba(10);this.g(f);f=new r.w(251,0,"TIME: "+c.ta);f.ba(10);f.h.Set(1,0);this.g(f);this.Oc=new d(50,20);this.g(this.Oc);f=new r.Ya(125,20,270,60,{fillStyle:"rgba(0, 0, 0, 0.5)",
jc:"destination-over"});f.h.Set(.5,.5);this.g(f)}l(b,a);b.prototype.Yd=function(a){var b=k.lc.rc(this.v/this.ld.Wa);this.Oc.Wc(a,b)};return b}(k.Aa)})(m||(m={}));
(function(f){var h=function(){function d(){}d.prototype.Ic=function(c){c&&localStorage.setItem("UserPassedTutorial",c.toString());return!!localStorage.getItem("UserPassedTutorial")};d.prototype.yc=function(c){return parseInt(localStorage.getItem("HiScore."+c),10)||0};d.prototype.Vd=function(c,a){localStorage.setItem("HiScore."+c,a.toString())};return d}();f.yb=new h})(n||(n={}));
(function(f){var h=k.X,d=function(a){function b(){a.apply(this,arguments);this.Kb=0}l(b,a);b.prototype.j=function(){var b=this;a.prototype.j.call(this);this.Zc=[];this.$c=12;this.Rb=new r.w(10,10);this.Rb.ba(10);this.Hd();this.Gd();this.Fd();this.xb=new r.Text(0,0,"0.61B");this.xb.ba(10);this.xb.h.Set(1,1);this.xb.Cache();this.o.u(this.Ib).s({Ca:Math.PI/12},2,k.ya.Qc).ga().s({Ca:-Math.PI/12},2,k.ya.Qc).ga().Dd().j();this.c.ea=0;this.o.u(this.c).s({ea:1}).j();this.fa=new k.ob;this.Wb();this.Xb();this.fa.Ka(this.Ib,
function(){return b.l.Play(n.yb.Ic()?"select":"tutorial")}).Ka(this.be,function(){return b.l.Play("tutorial")});this.ua();this.Ed();this.c.g(this.Rb,this.oa,this.Ib,this.$b,this.xb)};b.prototype.m=function(b){this.Kb+=b;this.eb.m(b);this.Rb.$a(this.eb.xc().toFixed(1));1>this.Kb&&(this.l.ha.style.background=k.Ab(n.ka.color.background,this.Kb));for(var c=0,d=this.Zc;c<d.length;c++)d[c].m(b*this.$c);a.prototype.m.call(this,b)};b.prototype.ua=function(){a.prototype.ua.call(this);var b=this.c.a.x/2,c=
this.c.a.y/2,d=this.c.a.y/this.Cb.y;this.oa.b.Set(b,c-100*d);this.Ib.b.Set(b,c-10*d);this.$b.b.Set(b,c+70*d);this.xb.b.Set(this.c.a.x-10,this.c.a.y-10)};b.prototype.Ed=function(){for(var a=2;1<=a;--a){var b=1/(a/2+1),d=new c(this.c.a.x,this.c.a.y,{Qa:.5,ta:1E9});d.b.Set(this.c.a.x/2,this.c.a.y/2);d.i.Set(b,(a&1?-1:1)*b);d.h.Set(.5,.5);d.ea=b;h.i(d.a,1/b);d.Ja.qb=!1;this.c.g(d);this.Zc.push(d)}this.o.u(this).s({$c:1},2,k.ya.Na).j()};b.prototype.Gd=function(){var a=new k.Aa(0,100);a.h.Set(.5,.5);a.i.Set(2,
2);var b=new r.Text(5,5,"PLAY"),c=new r.Ya(0,0,b.a.x+10,b.a.y+10,{strokeStyle:"white",fillStyle:"rgba(0, 0, 0, 0.2)"});a.g(c,b);h.aa(c.a,a.a);a.Cache();this.Ib=a};b.prototype.Fd=function(){var a=new r.Text(0,0,"TUTORIAL");a.Cache();a.h.Set(.5,.5);this.be=a;var b=new r.Text(0,60,"VOTE");b.Cache();b.h.Set(.5,.5);this.$b=new k.Aa;this.$b.g(a,b)};b.prototype.Hd=function(){this.oa=new k.Aa;var a=new r.Text(0,0,"SHAPES"),b=new r.Text(a.a.x+20,0,"\u2665");b.Za("red");b.h.Set(.5,0);var c=new r.Text(b.b.x+
20,0,"NUMBERS"),d=c.b.x+c.a.x;this.oa.a.Set(d,a.a.y);this.oa.h.Set(b.b.x/d,.5);this.oa.g(a,b,c);this.oa.Cache()};return b}(f.zb);f.Id=d;var c=function(a){function b(){a.apply(this,arguments);this.Pc=1}l(b,a);b.prototype.m=function(a){this.o.m(a);this.$.m(a);this.ic(a)};b.prototype.ic=function(a){for(var b=h.Sa,c=this.wa;c;c=c.Z)if(h.aa(c.ja,b),h.i(b,a),h.la(c.b,b,c.b),c.Ca+=Math.PI*a,0>c.b.y||c.b.y>this.a.y||0>c.b.x||c.b.x>this.a.x)this.hb(c),c.Pa()};b.prototype.Jb=function(){a.prototype.Jb.call(this);
var b=this.ab;b.qa=k.Ab(b.qa,this.Pc);this.Ac?b.Ea=this.Ac:(b.Cache(),this.Ac=b.Ea);.5<Math.random()||(b.qa=k.Ab(n.ka.color.active,this.Pc),this.mc?b.Ea=this.mc:(b.Cache(),this.mc=b.Ea))};return b}(n.f)})(m||(m={}));
(function(f){var h=k.X,d=function(c){function a(){c.call(this,{Qa:15,ta:15,Ha:"",Wa:10});this.Sc="SEE THIS RED SQUARE?;THIS IS ITS TRAJECTORY;YOUR GOAL IS TO;REVERSE ITS TRAJECTORY;LIKE THAT;SO IT WILL HIT THE BOTTOM;THEN YOU WILL EARN POINTS;BUT YOU HAVE TO DO THIS;BEFORE TIME RUNS OUT;GOT IT?;".split(";")}l(a,c);a.prototype.j=function(){var a=this;c.prototype.j.call(this);var d=this.c.a.x/2;this.Da=1;var g=new r.w(d,100);g.ba(15);g.h.Set(.5,.5);this.Zd=g;this.mb=0;var f=new r.w(d,130,"TAP TO CONTINIUE");
f.h.Set(.5,.5);f.ba(10);f.ea=.7;this.gc=f;this.kb.Pa();this.fa=new k.ob;this.$.ia(1.5,function(){a.Da=0;g.$a(a.Sc[a.mb++]);a.c.g(f);a.c.g(g);a.fa.Ka(a.c,a.uc.bind(a))})};a.prototype.uc=function(){var a=this;this.Zd.$a(this.Sc[this.mb]);switch(this.mb){case 1:this.fd(this.f.wa);break;case 2:case 3:break;case 4:this.Td(this.f.wa);break;case 5:this.Da=1;if(1>this.f.v){this.gc.Oa&&this.gc.Pa();this.$.ia(.1,function(){return a.uc()});return}this.Da=0;this.c.g(this.gc);this.$.Kc();break;case 6:this.Da=
1;this.$.ia(1.5,function(){return a.Da=0});break;case 7:break;case 8:this.Da=1,this.f.m(this.f.wb-5.5),this.$.ia(5.3,function(){return a.Da=0});case 9:break;case 10:this.l.Play("select");n.yb.Ic(!0);return;default:throw Error();}this.mb+=1};a.prototype.fd=function(a){var c=h.Sa;h.aa(a.ja,c);h.i(c,10);h.la(c,a.b,c);a.La(a.b);a.La(c)};a.prototype.Td=function(a){var c=h.Sa;a.da=[];h.aa(a.ja,c);h.la(c,a.b,c);a.La(a.b);a.La(c);c.Set(this.f.a.x/2+k.tb(-30,30),this.f.a.y/2+50);a.La(c);c.Set(this.f.a.x/2,
this.f.a.y+50);a.La(c)};return a}(f.Jc);f.ae=d})(m||(m={}));var v=new k.l("canvas");v.lb("splash",new m.Wd);v.lb("menu",new m.Id);v.lb("select",new m.Ad);v.lb("tutorial",new m.ae);v.Play("splash");v.j();
