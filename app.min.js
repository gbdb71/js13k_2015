var h;
(function(e){var g=function(){function d(c){this.Rc={};this.Bc=this.Uc=0;this.jb=[];this.ha=document.getElementById(c);this.kd=this.ha.getContext("2d");this.Nc=window.requestAnimationFrame.bind(window,this.Ld.bind(this))}d.prototype.lb=function(c,b){this.Rc[c]=b};d.prototype.Play=function(c){this.Ua&&this.jd();if(this.Ua=this.Rc[c])this.Ua.l=this,this.Ua.j();else throw Error();};d.prototype.j=function(){this.Nc()};d.prototype.Va=function(c,b,a){this.jb.push({element:c,type:b,listener:a});c.addEventListener(b,a)};
d.prototype.Pd=function(c,b,a){for(var f=0,n=this.jb;f<n.length;f++){var l=n[f];if(l.element===c&&l.type===b&&l.listener===a){e.Lc(this.jb,l);c.removeEventListener(b,a);return}}throw Error("Couldn't find event listener.");};d.prototype.jd=function(){for(var c=this.jb.length-1;0<=c;--c){var b=this.jb[c];this.Pd(b.element,b.type,b.listener)}this.jb=[];this.Ua.md&&this.Ua.md()};d.prototype.Ld=function(c){var b=c-this.Bc;50<b&&(b=50);this.Uc=b/1E3;this.Ua.m(this.Uc);this.Ua.za(this.kd);this.Bc=c;this.Nc()};
return d}();e.l=g})(h||(h={}));(function(e){var g=function(){function d(c,b){void 0===c&&(c=0);void 0===b&&(b=0);this.x=c;this.y=b}d.prototype.Set=function(c,b){this.x=c;this.y=b};d.prototype.aa=function(c){return c?(c.x=this.x,c.y=this.y,c):new d(this.x,this.y)};return d}();e.bb=g})(h||(h={}));
(function(e){(function(g){function d(a,f){void 0===a&&(a=0);void 0===f&&(f=0);return new e.bb(a,f)}function c(a,f){if(f)f.x=a.x,f.y=a.y;else return d(a.x,a.y)}function b(a){return Math.sqrt(a.x*a.x+a.y*a.y)}g.je=new e.bb;g.Ta=new e.bb;g.u=d;g.aa=c;g.xd=function(a){return 0===a.x&&0===a.y};g.la=function(a,f,b){b.x=a.x+f.x;b.y=a.y+f.y};g.Sa=function(a,f,b){b.x=a.x-f.x;b.y=a.y-f.y};g.Cc=function(a,f,b){b.x=a.x*f.x;b.y=a.y*f.y};g.i=function(a,f,b){void 0===b&&(b=a);b.x=a.x*f;b.y=a.y*f};g.tb=b;g.Mb=function(a){var f;
void 0===f&&(f=a);var n=b(a);0<n&&(f.x=a.x/n,f.y=a.y/n)};g.Ud=function(a,f,b){void 0===b&&(b=a);var l=Math.sin(f);f=Math.cos(f);a===b&&(a=c(a));b.x=a.x*f-a.y*l;b.y=a.x*l+a.y*f};g.ge=function(a){return Math.atan2(a.y,a.x)};g.ud=function(a,f){f.x=0<a.x?1/a.x:0;f.y=0<a.y?1/a.y:0};g.he=function(a,f){return a.x*f.x+a.y*f.y}})(e.X||(e.X={}))})(h||(h={}));
var k=this&&this.ke||function(e,g){function d(){this.constructor=e}for(var c in g)g.hasOwnProperty(c)&&(e[c]=g[c]);d.prototype=g.prototype;e.prototype=new d};
(function(e){var g=function(){function d(c,b,a,f){this.b=e.X.u(c,b);this.a=e.X.u(a,f);this.h=e.X.u(0,0);this.i=e.X.u(1,1);this.Ea=0;this.ea=1;this.sb=!0}d.prototype.za=function(c){this.sb&&(c.save(),c.globalAlpha*=this.ea,c.translate(this.b.x,this.b.y),c.scale(this.i.x,this.i.y),c.rotate(this.Ea),e.X.xd(this.h)||c.translate(-this.h.x*this.a.x,-this.h.y*this.a.y),this.Ha?this.nd(c):this.Aa(c),c.restore())};d.prototype.Aa=function(){throw Error("Unimplemented");};d.prototype.nd=function(c){c.drawImage(this.Ha,
0,0)};d.prototype.kc=function(c,b){var a,f=e.X.Ta;b?(e.X.aa(c,b),a=b):a=e.X.aa(c);this.Qa&&this.Qa.kc(c,a);e.X.Sa(a,this.b,a);e.X.aa(this.i,f);e.X.ud(f,f);e.X.Cc(a,f,a);e.X.Ud(a,-this.Ea,a);e.X.aa(this.h,f);e.X.Cc(f,this.a,f);e.X.la(a,f,a);if(!b)return a};d.prototype.Gb=function(c){c=this.kc(c);var b=0<c.y&&c.y<this.a.y;return 0<c.x&&c.x<this.a.x&&b};d.prototype.Ra=function(){this.Qa.wb(this)};d.prototype.Cache=function(c){this.Ha=document.createElement("canvas");this.Ha.width=this.a.x;this.Ha.height=
this.a.y;var b=this.Ha.getContext("2d");c&&c(b);this.Aa(b)};return d}();e.Sb=g;g=function(d){function c(b,a,f,c){void 0===b&&(b=0);void 0===a&&(a=0);void 0===f&&(f=0);void 0===c&&(c=0);d.call(this,b,a,f,c);this.mb=[]}k(c,d);c.prototype.g=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(a=0;a<b.length;a++){var f=b[a];if(f.Qa)throw Error("Child has parent");f.Qa=this;this.mb.push(f)}};c.prototype.wb=function(b){var a=this.mb.indexOf(b);if(0<=a)b.Qa=void 0,this.mb.splice(a,
1);else throw Error("Child doesn't exist in this layer");};c.prototype.Aa=function(b){for(var a=0,f=this.mb;a<f.length;a++)f[a].za(b)};return c}(g);e.Ba=g})(h||(h={}));
(function(e){function g(a,f,b){var c=b.pageX,d=b.pageY,g=b.target.getBoundingClientRect(),c=new e.bb(c-g.left,d-g.top);a.call(f,c,b)}function d(a,f,b){var l=0,d=0;if("touchend"!==b.type){var l=b.targetTouches[0].pageX,d=b.targetTouches[0].pageY,e=b.target.getBoundingClientRect();c.Set(l-e.left,d-e.top)}a.call(f,c.aa(),b);b.preventDefault()}var c=new e.bb;e.ac=function(a,f){return g.bind(null,a,f)};e.bc=function(a,f){return d.bind(null,a,f)};var b=function(){function a(){this.Ec=[];this.Hc=[]}a.prototype.La=
function(a,b){var c=0;this.Ec.push({object:a,action:function(){return c=Date.now()}});this.Hc.push({object:a,action:function(){450>Date.now()-c&&b()}});return this};a.prototype.Xa=function(a){this.zc(this.Ec,a)};a.prototype.ub=function(){};a.prototype.gb=function(a){this.zc(this.Hc,a)};a.prototype.zc=function(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=d.action;d.object.Gb(b)&&e()}};a.prototype.m=function(){};return a}();e.qb=b})(h||(h={}));var m;
(function(e){var g=function(){function d(){this.pb=new h.bb(320,440)}d.prototype.j=function(){var c=this;this.c=new h.Ba(0,0,320,370);this.o=new h.Xc;this.$=new h.Vc;this.eb=new h.eb(120);this.l.Va(window,"resize",function(){return c.ta()})};d.prototype.m=function(c){this.$.m(c);this.o.m(c)};d.prototype.za=function(c){c.clearRect(0,0,c.canvas.width,c.canvas.height);this.c.za(c)};d.prototype.Xa=function(c){this.fa.Xa(c)};d.prototype.ub=function(c){this.fa.ub(c)};d.prototype.gb=function(c){this.fa.gb(c)};
d.prototype.ta=function(){var c=window.innerWidth,b=window.innerHeight;this.pb.x=h.Ob.Rb(c,320,400);c=Math.min(c/this.pb.x,b/this.pb.y);this.c.i.Set(c,c);this.c.a.Set(this.pb.x,b/c);b=Math.floor(this.c.a.x*c);this.l.ha.width!==b&&(this.l.ha.width=b);b=Math.floor(this.c.a.y*c);this.l.ha.height!==b&&(this.l.ha.height=b)};d.prototype.Zb=function(){if(!this.fa)throw Error();this.l.Va(this.l.ha,"mousemove",h.ac(this.ub,this));this.l.Va(this.l.ha,"mousedown",h.ac(this.Xa,this));this.l.Va(this.l.ha,"mouseup",
h.ac(this.gb,this))};d.prototype.$b=function(){if(!this.fa)throw Error();this.l.Va(this.l.ha,"touchmove",h.bc(this.ub,this));this.l.Va(this.l.ha,"touchstart",h.bc(this.Xa,this));this.l.Va(this.l.ha,"touchend",h.bc(this.gb,this))};return d}();e.Bb=g})(m||(m={}));var p,q=p||(p={});(q.ka||(q.ka={})).color={active:"#88A825",nc:"#911146",cd:"#ED8C2B",background:"#35203B"};var r;
(function(e){var g=function(){function d(c,b,a){void 0===a&&(a="white");this.Ia=c;this.a=b;this.qa=a;this.pc={};this.ra=b/c.Wa.Wb;this.Na=c.Wa.Nb*this.ra;this.Cache=document.createElement("canvas");this.Cache.width=Object.keys(c.Yb).length*Math.ceil(this.Na+this.ra);this.Cache.height=b;console.log("FontCache Size",this.a,"DotPx",this.ra,"Color",this.qa);this.Qd()}d.prototype.tc=function(c,b,a,f,n,l){void 0===a&&(a=0);void 0===f&&(f=0);void 0===n&&(n=1);void 0===l&&(l=n);c.drawImage(this.Cache,this.pc[b],
0,this.Na,this.a,a,f,this.Na*n,this.a*l)};d.prototype.Qd=function(){var c=this.Cache.getContext("2d"),b=0;c.fillStyle=this.qa;for(var a in this.Ia.Yb){this.Rd(c,a);this.pc[a]=b;var f=Math.ceil(this.Na+this.ra),b=b+f;c.translate(f,0)}};d.prototype.Rd=function(c,b){for(var a=this.Ia,f=this.ra,n=0;n<a.Wa.Nb;++n)for(var l=0;l<a.Wa.Wb;++l)a.Yb[b][l*a.Wa.Nb+n]&&c.fillRect(n*f,l*f,f,f)};return d}();e.pd=g})(r||(r={}));
(r||(r={})).Md={Wa:{Nb:3,Wb:5},Yb:{"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],".":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],",":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],":":[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"?":[1,1,0,0,0,1,0,1,1,0,0,0,0,1,0],"\u2665":[1,0,1,1,1,1,1,1,1,0,1,0,0,0,0],0:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],1:[0,1,0,1,1,0,0,1,0,0,1,0,0,1,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,0],6:[0,
1,1,1,0,0,1,1,1,1,0,1,1,1,1],7:[1,1,1,0,0,1,0,1,0,0,1,0,0,1,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],9:[1,1,1,1,0,1,1,1,1,0,0,1,1,1,0],A:[0,1,0,1,0,1,1,1,1,1,0,1,1,0,1],B:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,0],C:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],D:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],E:[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],F:[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],G:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],H:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],I:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],J:[1,1,1,0,1,0,0,1,0,0,1,0,1,0,0],K:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,
1],L:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],N:[0,0,1,1,0,1,1,1,1,1,0,1,1,0,0],M:[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],O:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],P:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],Q:[1,1,1,1,0,1,1,0,1,1,1,0,0,0,1],R:[1,1,0,1,0,1,1,1,0,1,0,1,1,0,1],S:[1,1,1,1,0,0,1,1,0,0,0,1,1,1,1],T:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],U:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],W:[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],V:[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],Y:[1,0,1,1,0,1,1,0,1,0,1,0,0,1,0]},Cache:{}};
(function(e){var g=function(d){function c(b,a,f,c){void 0===f&&(f="");void 0===c&&(c={a:20,qa:"white",Ia:e.Md});d.call(this,b,a,0,0);this.Text=f;this.ca=c;this.Za(c.qa);this.ba(c.a)}k(c,d);c.prototype.Za=function(b){this.Fb=this.ca.Ia.Cache[b]?this.ca.Ia.Cache[b]:this.ca.Ia.Cache[b]=new e.pd(this.ca.Ia,20,b)};c.prototype.$a=function(b){this.Text=b;this.ad()};c.prototype.ba=function(b){this.ca.a=b;this.ra=b/this.ca.Ia.Wa.Wb;this.Na=this.ca.Ia.Wa.Nb*this.ra;this.ad()};c.prototype.Aa=function(b){for(var a=
this.ca.a/this.Fb.a,f=0;f<this.Text.length;++f){var c=this.Text[f];" "!==c&&this.Fb.tc(b,c,0,0,a);b.translate(this.Na+this.ra,0)}};c.prototype.ad=function(){this.a.x=(this.Na+this.ra)*this.Text.length-this.ra;this.a.y=this.ca.a};return c}(h.Sb);e.Text=g;g=function(d){function c(){d.apply(this,arguments)}k(c,d);c.prototype.za=function(b){if(this.sb){var a=this.ca.a/this.Fb.a,f=this.b,c=f.x,f=f.y,c=c-this.a.x*this.h.x*this.i.x,f=f-this.a.y*this.h.y*this.i.y,l=b.globalAlpha;b.globalAlpha*=this.ea;for(var d=
0;d<this.Text.length;++d){var e=this.Text[d];" "!==e&&this.Fb.tc(b,e,c,f,a*this.i.x,a*this.i.y);c+=(this.Na+this.ra)*this.i.x}b.globalAlpha=l}};c.prototype.Cache=function(){throw Error("Use gfx.Text if you want cache");};return c}(g);e.w=g})(r||(r={}));
(function(e){e.Lc=function(d,c){var b=d.indexOf(c);if(0<=b)d.splice(b,1);else throw Error();};e.$d=function(d,c){var b=d.indexOf(c);0<=b&&d.splice(b,1)};e.yd=function(d){return d[d.length-1]};e.Cb=function(d,c){var b=d.substr(1).match(/.{2}/g).map(function(a){return parseInt(a,16)}),b=b.map(function(a){return Math.min(a*c,255)|0});return"#"+((b[0]<<16)+(b[1]<<8)+b[2]+16777216).toString(16).substr(1)};var g=function(){function d(c){void 0===c&&(c=60);this.hc=c;this.Nd=0;this.ic=Array(c);for(var b=
0;b<c;++b)this.ic[b]=0}d.prototype.m=function(c){this.ic[this.Nd++%this.hc]=c};d.prototype.xc=function(){return 1/this.qd()};d.prototype.qd=function(){for(var c=0,b=0;b<this.hc;++b)c+=this.ic[b];return c/this.hc};return d}();e.eb=g;g=function(){function d(){this.rc=[]}d.prototype.la=function(c,b){this.rc.push([c,b]);return this};d.prototype.gd=function(){for(var c=0,b=this.rc;c<b.length;c++){var a=b[c];a[0].call(a[1])}};return d}();e.hd=g})(h||(h={}));
(function(e){var g=function(){function c(b,a){this.xb=b;this.Da=a;this.sa=0;this.Lb=[];this.Db=0;this.dc=new e.hd;this.gc=this.Xb=!1}c.prototype.j=function(){var b=this.Vb();b.Da&&(b.IsPlaying()&&b.Da.Tc(b),b.Da.Xd(b));for(;b;)b.Xb=!1,b.sa=0,b=b.Z;return this};c.prototype.s=function(b,a,f){void 0===a&&(a=1);void 0===f&&(f=d.Cd);this.Lb=[];for(var c in b)this.Lb.push({key:c,start:0,bd:0,end:b[c]});this.Db=a;this.od=f;return this};c.prototype.wa=function(b){this.Dc=b;return this};c.prototype.ga=function(b){void 0===
b&&(b=this.xb);this.Z=b=new c(b,this.Da);b.pa=this;return b};c.prototype.fc=function(b,a){this.dc.la(function(){if(this.Da)a(this.Da.u(b).j());else throw Error();},this);return this};c.prototype.ia=function(b){return this.ga().s({},b)};c.prototype.Sd=function(){for(var b=this;b;b=b.pa)b.gc=!b.gc;return this};c.prototype.Dd=function(){var b=this;this.dc.la(function(){setTimeout(b.j.bind(b),0)});return this};c.prototype.m=function(b){for(var a=this;a;)if(0===a.sa&&a.sd(),a.sa+=b,a.sa<=a.Db){a.Yc(a.sa);
break}else a.Xb||(a.Yc(a.Db),a.Dc&&a.Dc(a.xb),a.Da&&!a.Z&&a.Da.Tc(a.Vb()),a.Xb=!0),a=a.Z};c.prototype.Vb=function(){for(var b=this;b.pa;)b=b.pa;return b};c.prototype.IsPlaying=function(){if(this.Da)return 0<=this.Da.o.indexOf(this.Vb());throw Error();};c.prototype.Yc=function(b){for(var a=0,f=this.Lb;a<f.length;a++){var c=f[a];this.xb[c.key]=this.od(b,c.start,c.bd,this.Db)}};c.prototype.sd=function(){for(var b=0,a=this.Lb;b<a.length;b++){var f=a[b];if(this.gc){var c=f.start||this.xb[f.key];f.start=
f.end;f.end=c}else f.start=this.xb[f.key];f.bd=f.end-f.start}this.dc.gd()};return c}();e.ce=g;var d;(function(c){c.Cd=function(b,a,f,c){return f*b/c+a};c.Pa=function(b,a,f,c){b/=c;b--;return f*(b*b*b+1)+a};c.Qc=function(b,a,f,c){return-f/2*(Math.cos(Math.PI*b/c)-1)+a}})(d=e.xa||(e.xa={}));g=function(){function c(){this.o=[]}c.prototype.u=function(b){return new e.ce(b,this)};c.prototype.Xd=function(b){this.o.push(b)};c.prototype.Tc=function(b){e.Lc(this.o,b)};c.prototype.m=function(b){for(var a=0,
f=this.o;a<f.length;a++)f[a].m(b)};return c}();e.Xc=g})(h||(h={}));
(function(e){var g=function(d){function c(){d.apply(this,arguments)}k(c,d);c.prototype.j=function(){var b=this;d.prototype.j.call(this);this.l.ha.style.background="black";this.na=new h.Ba;this.na.i.Set(.5,.5);var a=new r.w(0,0,"A GAME BY KAKUS");a.h.Set(.5,.5);var f=new h.Ba(0,a.a.y+10),c=new r.w(0,0,"MADE WITH "),l=new r.w(c.a.x,0,"\u2665");l.Za("red");var e=new r.w(l.b.x+l.a.x,0," FOR JS13K");f.h.Set(.5,.5);f.a.Set(e.b.x+e.a.x,e.a.y);f.g(c,l,e);c=new r.w(0,f.b.y+300,"2015");c.h.Set(.5,.5);this.na.g(a);
this.na.g(f);this.na.g(c);this.c.ea=0;this.o.u(this.c).s({ea:1}).ga().ia(1).ga().s({ea:0}).wa(function(){return b.l.Play("menu")}).j();this.c.g(this.na);this.ta()};c.prototype.ta=function(){d.prototype.ta.call(this);this.na.b.Set(this.c.a.x/2,this.c.a.y/3)};return c}(e.Bb);e.Wd=g})(m||(m={}));
(function(e){var g=function(d){function c(b,a,f,c,l){void 0===l&&(l={fillStyle:"red"});d.call(this,b,a,f,c);this.ca=l}k(c,d);c.prototype.Aa=function(b){this.ca.mc&&(b.globalCompositeOperation=this.ca.mc);this.ca.fillStyle&&(b.fillStyle=this.ca.fillStyle,b.fillRect(0,0,this.a.x,this.a.y));this.ca.strokeStyle&&(b.strokeStyle=this.ca.strokeStyle,b.strokeRect(0,0,this.a.x,this.a.y))};return c}(h.Sb);e.Ya=g})(r||(r={}));
(function(e){e.vb=function(e,d){if(d<e)throw Error();return e+Math.random()*(d-e)}})(h||(h={}));
(function(e){var g=function(){function c(b,a,f,c){void 0===c&&(c=NaN);this.qc=b;this.sc=a;this.ia=f;this.td=c;this.cb=this.sa=0}c.prototype.m=function(b){this.sa+=b;this.sa>this.ia&&(0===this.cb&&(this.qc.call(this.sc,b),this.cb+=1),this.sa-this.ia>this.td*this.cb&&(this.qc.call(this.sc,b),this.cb+=1))};return c}();e.ie=g;var d=function(){function c(){this.$=[]}c.prototype.ia=function(b,a,f){var c=this,l;this.$.push(l=new g(function(){for(var b=[],d=0;d<arguments.length;d++)b[d-0]=arguments[d];e.$d(c.$,
l);a.apply(f,b)},f,b));return l};c.prototype.Mc=function(b,a,f,c){void 0===c&&(c=0);this.$.push(new g(a,f,c,b))};c.prototype.m=function(b){for(var a=0,f=this.$;a<f.length;a++)f[a].m(b)};c.prototype.Kc=function(){this.$=[]};return c}();e.Vc=d})(h||(h={}));
(function(e){(function(g){var d=h.X,c=h.X.Ta,b=function(a){function b(){a.apply(this,arguments);this.ja=d.u(0,0);this.da=[];this.qa="red";this.v=1}k(b,a);b.prototype.m=function(a){this.rb()?(this.qa=1<this.f.Hb?e.ka.color.cd:e.ka.color.active,this.ee(a)):(d.aa(this.ja,c),d.i(c,a),d.la(this.b,c,this.b))};b.prototype.Aa=function(){throw Error("Unimplemented");};b.prototype.rb=function(){return 1<this.da.length};b.prototype.Ma=function(a){if(!(100<this.da.length)){var b=h.yd(this.da),f=2>this.da.length;
if(b){if(d.Sa(a,b,c),a=d.tb(c),20<a){d.Mb(c);d.i(c,20);for(var e=d.aa(c);20<a;)d.la(b,e,c),this.da.push(b=d.aa(c)),a-=20;if(f){f=this.da;b=f[0];f=f[1];d.Sa(f,b,c);a=this.ja;var g;void 0===g&&(g=.01);(0===a.y||0===c.y?a.y===c.y:Math.abs(Math.abs(a.x/a.y)-Math.abs(c.x/c.y))<g)||(g=d.tb(this.ja),d.Sa(f,this.b,this.ja),d.Mb(this.ja),d.aa(this.ja,b),d.i(b,10),d.la(this.b,b,b),d.i(this.ja,g))}}}else this.da.push(d.aa(a))}};b.prototype.ee=function(a){var b=d.tb(this.ja);a=b*a;for(var f=0;0<a;)if(d.Sa(this.da[0],
this.b,c),0<(f=d.tb(c))-a){d.Mb(c);d.aa(c,this.ja);d.i(c,a);d.la(this.b,c,this.b);d.i(this.ja,b);break}else if(a-=f,d.la(this.b,c,this.b),this.da.shift(),this.v+=this.f.Hb,1>this.da.length)break};return b}(h.Sb);g.dd=b})(e.Pb||(e.Pb={}))})(p||(p={}));
(function(e){(function(e){var d=function(c){function b(a,b,d,l){c.call(this,a,b,d,l);this.ma=new r.Text(0,0);this.ma.h.Set(.5,.5);this.ma.b.Set(d/2,l/2)}k(b,c);b.prototype.m=function(a){this.Ea+=1*Math.PI*a;c.prototype.m.call(this,a)};b.prototype.Aa=function(a){a.fillStyle=this.qa;a.fillRect(0,0,this.a.x,this.a.y);this.ma.$a(this.v.toFixed(0));this.ma.Ea=-this.Ea;this.ma.za(a)};return b}(e.dd);e.Od=d})(e.Pb||(e.Pb={}))})(p||(p={}));
(function(e){var g=h.X,d=function(c){function b(a,b,d){void 0===d&&(d={Ja:3,oa:15});c.call(this,0,0,a,b);this.ya=d;this.v=0;this.Hb=1;this.yb=this.ya.oa;this.wd=!1;this.o=new h.Xc;this.$=new h.Vc;this.$.Mc(this.ya.Ja,this.Jb,this);this.$.ia(this.ya.oa,this.ec,this);this.$.Mc(1,this.fe,this,this.ya.oa-5.5);this.Fa=new r.w(a/2,a/3);this.Fa.h.Set(.5,.5);this.Fa.Za(h.Cb(e.ka.color.background,1.4));this.Fa.ba(120)}k(b,c);b.prototype.m=function(a){this.yb-=a;this.o.m(a);this.$.m(a);0<=this.yb&&(this.Fa.$a(this.yb.toFixed(0)),
this.lc(a),this.de())};b.prototype.lc=function(a){for(var b=this.va;b;b=b.Z)if(b.f){b.m(a);if(b.rb())for(var c=b.Z;c;c=c.Z)c.rb()&&this.vd(b,c)&&this.Jd(b,c);b.b.y<-b.a.y/2?this.Fc(b):b.b.x>this.a.x||0>b.b.x?this.Fc(b):b.b.y>this.a.y&&this.Kd(b)}};b.prototype.de=function(){for(var a=[],b=this.va;b;b=b.Z)b.rb()&&a.push(b);var c=4>a.length?1:a.length/2|0;if(0<c-this.Hb)for(var d=0;d<a.length;d++)b=a[d],this.o.u(b.i).s({x:1.5,y:1.5},.2,h.xa.Pa).ga().s({x:1,y:1},.2).j();this.Hb=c};b.prototype.ed=function(a){this.ab?
(this.ab.Z=a,a.pa=this.ab,this.ab=a):this.va=this.ab=a;a.f=this};b.prototype.hb=function(a){a.Z?a.pa?(a.pa.Z=a.Z,a.Z.pa=a.pa):(a.Z.pa=null,this.va=a.Z):a.pa?(a.pa.Z=null,this.ab=a.pa):this.va=this.ab=null;a.f=void 0};b.prototype.rd=function(a){for(var b=this.va;b;b=b.Z)if(b.Gb(a))return b;return null};b.prototype.wc=function(a){if(!(2>a.da.length)){var b=a.da[a.da.length-1],c=g.Ta;g.Sa(b,a.da[a.da.length-2],c);g.i(c,20);g.la(b,c,c);a.Ma(c)}};b.prototype.Aa=function(a){a.strokeStyle=e.ka.color.active;
a.setLineDash([3,9]);a.lineCap="butt";a.lineWidth=2;for(var b=this.va;b;b=b.Z)if(b.rb()){a.beginPath();a.moveTo(b.b.x,b.b.y);for(var d=0,l=b.da;d<l.length;d++){var g=l[d];a.lineTo(g.x,g.y)}a.stroke()}a.globalCompositeOperation="xor";c.prototype.Aa.call(this,a);a.globalCompositeOperation="destination-over";a.imageSmoothingEnabled=!1;a.webkitImageSmoothingEnabled=!1;this.Fa.za(a)};b.prototype.vd=function(a,b){var c=g.Ta;g.Sa(a.b,b.b,c);return g.tb(c)<(a.a.x+b.a.x)/2};b.prototype.Fc=function(a){var b=
Math.min(-a.v,-10);this.v+=b;a.b.y+=a.a.y/2;this.Tb(a.b,b);this.hb(a);this.wb(a);this.Jb()};b.prototype.Kd=function(a){this.v+=a.v;this.Tb(a.b,a.v);this.hb(a);this.wb(a)};b.prototype.Jd=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];b.forEach(function(b){a.hb(b);a.o.u(b).s({ea:0},2).wa(function(){return b.Ra()}).j()})};b.prototype.ec=function(){var a=this;this.$.Kc();var b=this.o.u(null);b.j();for(var c=this.va;c;c=c.Z)if(1<c.v){var d=this.o.u(c.i).s({x:2,y:2},.3,h.xa.Pa).ga(c).s({v:c.v/
2|0},.5).wa(function(b){var c=Math.round(b.v);a.Tb(b.b,c);a.v+=c}).ga(c.i).s({x:5,y:5},.35).fc(c,function(a){return a.s({ea:0},.35)}).ga(c).wa(function(b){a.wb(b);a.hb(b)});b.ga(d).wa(function(a){return a.j()});b=d}b.ga().wa(function(){a.Gc&&a.Gc();for(var b=a.va;b;b=b.Z)if(1>=b.v&&b.f){var c=h.vb(0,.6);a.o.u(b.i).ia(c).ga().s({x:5,y:5},.35).fc(b,function(a){return a.s({ea:0},.25)}).ga(b).wa(function(b){a.wb(b);a.hb(b)}).j()}a.wd=!0})};b.prototype.Jb=function(){var a=new e.Pb.Od(h.vb(15,this.a.x-
15),this.a.y-5,30,30);a.qa=e.ka.color.nc;a.h.Set(.5,.5);a.ea=0;a.i.Set(.1,.1);var b=g.Ta;b.y=0;b.x=h.vb(15,this.a.x-15);g.Sa(a.b,b,b);g.Mb(b);g.i(b,h.vb(-80,-60));g.aa(b,a.ja);this.o.u(a).s({ea:1},.2).j();this.o.u(a.i).s({x:1,y:1},.2).j();this.ed(a);this.g(a)};b.prototype.Tb=function(a,b){var c=new r.w(a.x,a.y,(0<b?"+":"")+b);c.h.Set(.5,.5);c.Za(0<b?e.ka.color.active:e.ka.color.nc);this.g(c);var d=0<b?2:1;this.o.u(c.i).s({x:d,y:d},.5,h.xa.Pa).ia(.3).ga(c).s({ea:0},.3).wa(function(){c.Ra()}).j();if(0>
a.x||a.x>this.a.x){var g=0<a.x?1:-1;this.o.u(c.b).s({x:a.x-g*c.a.x*d},.2).j()}else g=0<a.y?1:-1,this.o.u(c.b).s({y:a.y-g*c.a.y*d},.2).j()};b.prototype.fe=function(){this.Fa.i.Set(2,2);this.o.u(this.Fa.i).ia(.1).ga().s({x:1,y:1},.4).j()};return b}(h.Ba);e.f=d})(p||(p={}));(function(e){(function(e){e.Rb=function(d,c,b){return Math.max(Math.min(d,b),c)}})(e.Ob||(e.Ob={}))})(h||(h={}));
(function(e){var g=function(c){function b(a){void 0===a&&(a={Ja:3,oa:1,Ca:"",Oa:100});c.call(this);this.ya=a}k(b,c);b.prototype.j=function(){var a=this;c.prototype.j.call(this);this.Ga=0;this.f=new p.f(this.c.a.x,this.c.a.y,this.ya);this.f.Gc=function(){return a.$.ia(1,a.ec,a)};this.c.g(this.f);this.fa=new d(this);this.Zb();this.$b();this.c.g(this.Qb=new r.Ya(0,this.f.a.y,this.f.a.x,30,{fillStyle:"rgba(0, 0, 0, 0.5)"}));this.kb=new r.w(0,0,"TAP TO START");this.kb.h.Set(.5,.5);this.c.g(this.kb);this.ma=
new r.w(0,0);this.ma.h.Set(.5,.5);this.ma.ba(15);this.c.g(this.ma);this.ib=new r.w(0,0,"RESTART");this.ib.ba(10);this.ib.h.Set(1,.5);this.c.g(this.ib);this.fb=new r.w(0,0,"MENU");this.fb.ba(10);this.fb.h.Set(0,.5);this.c.g(this.fb);this.Eb=new r.w(0,0);this.Eb.ba(10);this.c.g(this.Eb);this.fa.La(this.ib,function(){return a.l.Play("game")}).La(this.fb,function(){return a.l.Play("select")});this.ta()};b.prototype.m=function(a){c.prototype.m.call(this,a);this.eb.m(a);this.fa.m();this.f.m(a*this.Ga);
this.Eb.$a(this.eb.xc().toFixed(1));this.ma.$a(this.f.v.toString())};b.prototype.za=function(a){a.clearRect(0,0,a.canvas.width,a.canvas.height);this.c.za(a)};b.prototype.ec=function(){var a=this;this.ya.Ca&&this.f.v>p.Ab.yc(this.ya.Ca)&&p.Ab.Vd(this.ya.Ca,this.f.v);var b=new h.Ba(this.c.a.x/2,150);this.f.Fa.sb=!1;var c=h.Ob.Rb(this.f.v/this.ya.Oa,0,1),d=new e.zd(0,0);d.h.Set(.5,.5);d.Wc(this.o,c);c=new r.Text(0,100,"RESTART");c.ba(20);c.h.Set(.5,.5);c.Za(p.ka.color.background);var g=new r.Ya(c.b.x,
c.b.y,c.a.x+20,c.a.y+10,{fillStyle:"white"});g.h.Set(.5,.5);var t=new r.w(0,160,"LEVEL SELECT");t.h.Set(.5,.5);b.g(d);b.g(g);b.g(c);b.g(t);this.c.g(b);this.fb.Ra();this.ib.Ra();this.o.u(this.ma.b).s({y:100},1,h.xa.Pa).fc(this.ma.i,function(a){return a.s({x:2,y:2})}).j();this.fa=(new h.qb).La(c,function(){return a.l.Play("game")}).La(t,function(){return a.l.Play("select")})};b.prototype.ta=function(){c.prototype.ta.call(this);this.f.a.y=this.c.a.y-this.Qb.a.y;this.f.a.x=this.c.a.x;this.f.Fa.b.Set(this.f.a.x/
2,this.f.a.y/3);this.Qb.b.Set(0,this.f.a.y);this.Qb.a.x=this.f.a.x;this.kb.b.Set(this.f.a.x/2,this.f.a.y/2);this.ma.b.Set(this.f.a.x/2,this.f.a.y+13.5);this.ib.b.Set(this.f.a.x-10,this.f.a.y+13.5);this.fb.b.Set(10,this.f.a.y+13.5);this.Eb.b.Set(10.5,10.5)};return b}(e.Bb);e.Jc=g;var d=function(c){function b(a){c.call(this);this.Ka=a;this.ob=new h.bb}k(b,c);b.prototype.Xa=function(a){h.X.aa(a,this.ob);var b=this.Ka.f.rd(this.ob);b&&(b.da=[],this.ua=b);c.prototype.Xa.call(this,a)};b.prototype.gb=function(a){this.Ka.kb.Qa&&
(this.Ka.Ga=1,this.Ka.kb.Ra());this.ua&&(this.Ka.f.wc(this.ua),this.ua=void 0);c.prototype.gb.call(this,a)};b.prototype.ub=function(a){h.X.aa(a,this.ob);!this.ua&&this.Ka.f.Gb(a)&&this.Xa(a);this.ua&&!this.Ka.f.Gb(this.ob)&&(this.Ka.f.wc(this.ua),this.ua=void 0)};b.prototype.m=function(){this.ua&&(this.ua.Qa?this.ua.Ma(this.Ka.f.kc(this.ob)):this.ua=void 0)};return b}(h.qb)})(m||(m={}));
(function(e){var g=function(b){function a(){b.apply(this,arguments);this.Bd=[{Ca:"World1.Level0",Ja:6,oa:5,Oa:15},{Ca:"World1.Level1",Ja:5,oa:10,Oa:30},{Ca:"World1.Level2",Ja:3,oa:15,Oa:170},{Ca:"World1.Level3",Ja:3,oa:30,Oa:600},{Ca:"World1.Level4",Ja:3,oa:60,Oa:1500}]}k(a,b);a.prototype.j=function(){var a=this;b.prototype.j.call(this);this.ta();this.l.ha.style.background=p.ka.color.background;this.fa=new h.qb;this.Zb();this.$b();var d=new r.w(this.c.a.x/2,10,"CHALLENGE");d.h.Set(.5,0);d.ba(10);
this.c.g(d);d=new r.w(this.c.a.x/2,30,"PRECISION");d.h.Set(.5,0);this.c.g(d);var l=[];this.Bd.forEach(function(b,d){var g=new c(d,b);g.b.Set(d&1?a.c.a.x+g.a.x:-g.a.x,120+70*d);g.h.Set(.5,.5);a.c.g(g);var n=a.o.u(g.b).s({x:a.c.a.x/2},1,h.xa.Pa).wa(function(){return g.Yd(a.o)}).j();l.push([g,n]);a.fa.La(g,function(){a.o.u(g.i).s({x:1.1,y:1.1},1,h.xa.Pa).wa(function(){a.l.lb("game",new e.Jc(b));a.l.Play("game")}).j();for(var c=0;c<l.length;c++){var d=l[c],n=d[1];d[0]!==g&&n.Sd().j()}})});d=new r.w(40,
30,"MENU");d.h.Set(.5,.5);d.ba(10);var g=new r.Ya(d.b.x,d.b.y,50,30,{strokeStyle:"white"});g.h.Set(.5,.5);g.sb=!1;this.c.g(g);this.fa.La(g,function(){return a.l.Play("menu")});this.c.g(d)};return a}(e.Bb);e.Ad=g;var d=function(b){function a(a,c){b.call(this,a,c,200,20);var d=new r.w(5,5,"BAD");d.ba(10);this.g(d);d=new r.w(195,5,"AWESOME");d.ba(10);d.h.Set(1,0);this.g(d);d=new r.Ya(.5,.5,200,20,{strokeStyle:"white"});this.g(d);d=new r.Ya(1.5,1.5,198,18,{fillStyle:"white",mc:"xor"});d.i.Set(0,1);this.g(this.vc=
d)}k(a,b);a.prototype.Wc=function(a,b){var c=this,d=a.u(this.vc.i).s({x:b},1,h.xa.Pa).j();1===b&&d.wa(function(){return c.vc.ca.fillStyle=p.ka.color.cd})};return a}(h.Ba);e.zd=d;var c=function(b){function a(a,c){b.call(this,0,0,250,40);this.ld=c;var e=new r.w(0,0,a.toString());e.ba(40);e.Za(p.ka.color.nc);this.g(e);this.v=p.Ab.yc(c.Ca);e=new r.w(50,0,"HI-SCORE: "+this.v);e.ba(10);this.g(e);e=new r.w(251,0,"TIME: "+c.oa);e.ba(10);e.h.Set(1,0);this.g(e);this.Oc=new d(50,20);this.g(this.Oc);e=new r.Ya(125,
20,270,60,{fillStyle:"rgba(0, 0, 0, 0.3)",mc:"destination-over"});e.h.Set(.5,.5);this.g(e)}k(a,b);a.prototype.Yd=function(a){var b=h.Ob.Rb(this.v/this.ld.Oa,0,1);this.Oc.Wc(a,b)};return a}(h.Ba)})(m||(m={}));
(function(e){var g=function(){function b(){}b.prototype.Ic=function(a){a&&localStorage.setItem("UserPassedTutorial",a.toString());return!!localStorage.getItem("UserPassedTutorial")};b.prototype.yc=function(a){return parseInt(localStorage.getItem("HiScore."+a),10)||0};b.prototype.Vd=function(a,b){localStorage.setItem("HiScore."+a,b.toString())};return b}();if("object"===typeof localStorage){var d=!0;try{localStorage.setItem("storageTest","1"),localStorage.removeItem("storageTest")}catch(c){Storage.prototype.setItem=
function(){d&&alert("If you want to save your scores please leave private browsing.");d=!1}}}e.Ab=new g})(p||(p={}));
(function(e){var g=h.X,d=function(b){function a(){b.apply(this,arguments);this.Kb=0}k(a,b);a.prototype.j=function(){var a=this;b.prototype.j.call(this);this.Zc=[];this.$c=12;this.Ub=new r.w(10,10);this.Ub.ba(10);this.Hd();this.Gd();this.Fd();this.zb=new r.Text(0,0,"0.7B");this.zb.ba(10);this.zb.h.Set(1,1);this.zb.Cache();this.o.u(this.Ib).s({Ea:Math.PI/12},2,h.xa.Qc).ga().s({Ea:-Math.PI/12},2,h.xa.Qc).ga().Dd().j();this.c.ea=0;this.o.u(this.c).s({ea:1}).j();this.fa=new h.qb;this.Zb();this.$b();this.fa.La(this.Ib,
function(){return a.l.Play(p.Ab.Ic()?"select":"tutorial")}).La(this.be,function(){return a.l.Play("tutorial")});this.ta();this.Ed();this.c.g(this.Ub,this.na,this.Ib,this.cc,this.zb)};a.prototype.m=function(a){this.Kb+=a;this.eb.m(a);this.Ub.$a(this.eb.xc().toFixed(1));1>this.Kb&&(this.l.ha.style.background=h.Cb(p.ka.color.background,this.Kb));for(var c=0,d=this.Zc;c<d.length;c++)d[c].m(a*this.$c);b.prototype.m.call(this,a)};a.prototype.ta=function(){b.prototype.ta.call(this);var a=this.c.a.x/2,c=
this.c.a.y/2,d=this.c.a.y/this.pb.y;this.na.b.Set(a,c-100*d);this.Ib.b.Set(a,c-10*d);this.cc.b.Set(a,c+70*d);this.zb.b.Set(this.c.a.x-10,this.c.a.y-10)};a.prototype.Ed=function(){for(var a=2;1<=a;--a){var b=1/(a/2+1),d=new c(this.c.a.x,this.c.a.y,{Ja:.5,oa:1E9});d.b.Set(this.c.a.x/2,this.c.a.y/2);d.i.Set(b,(a&1?-1:1)*b);d.h.Set(.5,.5);d.ea=b;g.i(d.a,1/b);d.Fa.sb=!1;this.c.g(d);this.Zc.push(d)}this.o.u(this).s({$c:1},2,h.xa.Pa).j()};a.prototype.Gd=function(){var a=new h.Ba(0,100);a.h.Set(.5,.5);a.i.Set(2,
2);var b=new r.Text(5,5,"PLAY"),c=new r.Ya(0,0,b.a.x+10,b.a.y+10,{strokeStyle:"white",fillStyle:"rgba(0, 0, 0, 0.2)"});a.g(c,b);g.aa(c.a,a.a);a.Cache();this.Ib=a};a.prototype.Fd=function(){var a=new r.Text(0,0,"TUTORIAL");a.Cache();a.h.Set(.5,.5);this.be=a;var b=new r.Text(0,60,"VOTE");b.Cache();b.h.Set(.5,.5);this.cc=new h.Ba;this.cc.g(a,b)};a.prototype.Hd=function(){this.na=new h.Ba;var a=new r.Text(0,0,"SHAPES"),b=new r.Text(a.a.x+20,0,"\u2665");b.Za("red");b.h.Set(.5,0);var c=new r.Text(b.b.x+
20,0,"NUMBERS"),d=c.b.x+c.a.x;this.na.a.Set(d,a.a.y);this.na.h.Set(b.b.x/d,.5);this.na.g(a,b,c);this.na.Cache()};return a}(e.Bb);e.Id=d;var c=function(b){function a(){b.apply(this,arguments);this.Pc=1}k(a,b);a.prototype.m=function(a){this.o.m(a);this.$.m(a);this.lc(a)};a.prototype.Aa=function(a){for(var b=0,c=this.mb;b<c.length;b++)c[b].za(a)};a.prototype.lc=function(a){for(var b=g.Ta,c=this.va;c;c=c.Z)if(g.aa(c.ja,b),g.i(b,a),g.la(c.b,b,c.b),c.Ea+=Math.PI*a,0>c.b.y||c.b.y>this.a.y||0>c.b.x||c.b.x>
this.a.x)this.hb(c),c.Ra()};a.prototype.Jb=function(){b.prototype.Jb.call(this);var a=this.ab;a.qa=h.Cb(a.qa,this.Pc);this.Ac?a.Ha=this.Ac:(a.Cache(function(a){return a.globalCompositeOperation="xor"}),this.Ac=a.Ha);.5<Math.random()||(a.qa=h.Cb(p.ka.color.active,this.Pc),this.oc?a.Ha=this.oc:(a.Cache(function(a){return a.globalCompositeOperation="xor"}),this.oc=a.Ha))};return a}(p.f)})(m||(m={}));
(function(e){var g=h.X,d=function(c){function b(){c.call(this,{Ja:15,oa:15,Ca:"",Oa:10});this.Sc="SEE THIS RED SQUARE?;THIS IS ITS TRAJECTORY;YOUR GOAL IS TO;REVERSE ITS TRAJECTORY;LIKE THAT;SO IT WILL HIT THE BOTTOM;THEN YOU WILL EARN POINTS;BUT YOU HAVE TO DO THIS;BEFORE TIME RUNS OUT;GOT IT?;".split(";")}k(b,c);b.prototype.j=function(){var a=this;c.prototype.j.call(this);var b=this.c.a.x/2;this.Ga=1;var d=new r.w(b,100);d.ba(15);d.h.Set(.5,.5);this.Zd=d;this.nb=0;var e=new r.w(b,130,"TAP TO CONTINIUE");
e.h.Set(.5,.5);e.ba(10);e.ea=.7;this.jc=e;this.kb.Ra();this.fa=new h.qb;this.$.ia(1.5,function(){a.Ga=0;d.$a(a.Sc[a.nb++]);a.c.g(e);a.c.g(d);a.fa.La(a.c,a.uc.bind(a))})};b.prototype.uc=function(){var a=this;this.Zd.$a(this.Sc[this.nb]);switch(this.nb){case 1:this.fd(this.f.va);break;case 2:case 3:break;case 4:this.Td(this.f.va);break;case 5:this.Ga=1;if(1>this.f.v){this.jc.Qa&&this.jc.Ra();this.$.ia(.1,function(){return a.uc()});return}this.Ga=0;this.c.g(this.jc);this.$.Kc();break;case 6:this.Ga=
1;this.$.ia(1.5,function(){return a.Ga=0});break;case 7:break;case 8:this.Ga=1,this.f.m(this.f.yb-5.5),this.$.ia(5.3,function(){return a.Ga=0});case 9:break;case 10:this.l.Play("select");p.Ab.Ic(!0);return;default:throw Error();}this.nb+=1};b.prototype.fd=function(a){var b=g.Ta;g.aa(a.ja,b);g.i(b,10);g.la(b,a.b,b);a.Ma(a.b);a.Ma(b)};b.prototype.Td=function(a){var b=g.Ta;a.da=[];g.aa(a.ja,b);g.la(b,a.b,b);a.Ma(a.b);a.Ma(b);b.Set(this.f.a.x/2+h.vb(-30,30),this.f.a.y/2+50);a.Ma(b);b.Set(this.f.a.x/2,
this.f.a.y+50);a.Ma(b)};return b}(e.Jc);e.ae=d})(m||(m={}));var u=new h.l("canvas");u.lb("splash",new m.Wd);u.lb("menu",new m.Id);u.lb("select",new m.Ad);u.lb("tutorial",new m.ae);u.Play("splash");u.j();
